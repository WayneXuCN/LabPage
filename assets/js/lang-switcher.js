!function(){"use strict";const e={breakpoint:767,animationDuration:300,touchThreshold:44,slideThreshold:50},t=()=>window.innerWidth<=e.breakpoint,o=(e,t)=>{let o;return function(...s){const n=()=>{clearTimeout(o),e(...s)};clearTimeout(o),o=setTimeout(n,t)}};class s{constructor(){this.dropdownToggles=document.querySelectorAll(".lang-switcher-toggle"),this.dropdownMenus=document.querySelectorAll(".lang-dropdown-menu"),this.init()}init(){this.bindEvents(),this.enhanceAccessibility(),this.optimizeForTouch()}bindEvents(){this.dropdownToggles.forEach(e=>{e.addEventListener("click",e=>this.handleToggleClick(e)),e.addEventListener("keydown",e=>this.handleToggleKeydown(e))}),document.addEventListener("click",e=>this.handleDocumentClick(e)),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.closeAllDropdowns()}),window.addEventListener("resize",o(()=>{t()||this.closeAllDropdowns()},250))}handleToggleClick(e){e.preventDefault();const t=e.currentTarget,o=t.closest(".lang-switcher-dropdown").querySelector(".lang-dropdown-menu"),s=o.classList.contains("show");this.closeAllDropdowns(),s||this.openDropdown(t,o)}handleToggleKeydown(e){const t=e.currentTarget,o=t.closest(".lang-switcher-dropdown").querySelector(".lang-dropdown-menu");switch(e.key){case"Enter":case" ":e.preventDefault(),this.handleToggleClick(e);break;case"ArrowDown":e.preventDefault(),o.classList.contains("show")||this.openDropdown(t,o),this.focusFirstItem(o);break;case"Escape":this.closeAllDropdowns(),t.focus()}}handleDocumentClick(e){e.target.closest(".lang-switcher-dropdown")||this.closeAllDropdowns()}openDropdown(o,s){s.classList.add("show"),o.setAttribute("aria-expanded","true"),t()&&(s.style.maxHeight=e.animationDuration+"ms"),this.focusFirstItem(s)}closeDropdown(e,t){t.classList.remove("show"),e.setAttribute("aria-expanded","false")}closeAllDropdowns(){this.dropdownMenus.forEach(e=>{e.classList.remove("show")}),this.dropdownToggles.forEach(e=>{e.setAttribute("aria-expanded","false")})}focusFirstItem(e){const t=e.querySelector(".lang-dropdown-item");t&&setTimeout(()=>t.focus(),100)}enhanceAccessibility(){this.dropdownToggles.forEach(e=>{e.hasAttribute("aria-haspopup")||e.setAttribute("aria-haspopup","true"),e.hasAttribute("aria-expanded")||e.setAttribute("aria-expanded","false");const t=e.closest(".lang-switcher-dropdown").querySelectorAll(".lang-dropdown-item");t.forEach((o,s)=>{o.setAttribute("tabindex","-1"),o.addEventListener("keydown",o=>{switch(o.key){case"ArrowDown":o.preventDefault();(t[s+1]||t[0]).focus();break;case"ArrowUp":o.preventDefault();(t[s-1]||t[t.length-1]).focus();break;case"Escape":this.closeAllDropdowns(),e.focus()}})})})}optimizeForTouch(){"ontouchstart"in window&&(this.dropdownToggles.forEach(t=>{const o=t.getBoundingClientRect();(o.width<e.touchThreshold||o.height<e.touchThreshold)&&(t.style.minWidth=e.touchThreshold+"px",t.style.minHeight=e.touchThreshold+"px"),t.addEventListener("touchstart",()=>{t.style.transform="scale(0.95)"}),t.addEventListener("touchend",()=>{setTimeout(()=>{t.style.transform=""},100)})}),t()&&this.enableSlideToClose())}enableSlideToClose(){let e=0,t=0;this.dropdownMenus.forEach(o=>{o.addEventListener("touchstart",t=>{e=t.changedTouches[0].screenY}),o.addEventListener("touchend",s=>{t=s.changedTouches[0].screenY,this.handleSwipe(o,e,t)})})}handleSwipe(t,o,s){if(o-s<-e.slideThreshold){const e=t.closest(".lang-switcher-dropdown").querySelector(".lang-switcher-toggle");this.closeDropdown(e,t)}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{new s}):new s,window.LangSwitcher=s}();