!function(){"use strict";const e={breakpoint:767},t=()=>window.innerWidth<=e.breakpoint;class s{constructor(){this.dropdowns=Array.from(document.querySelectorAll(".lang-switcher-dropdown")),this.toggles=this.dropdowns.map(e=>e.querySelector(".lang-switcher-toggle")).filter(Boolean),this.menus=this.dropdowns.map(e=>e.querySelector(".lang-dropdown-menu")).filter(Boolean),this.lastToggle=null,this.init()}init(){this.bindEvents(),this.enhanceAccessibility()}bindEvents(){this.toggles.forEach(e=>{e.addEventListener("click",e=>this.handleToggleClick(e)),e.addEventListener("keydown",e=>this.handleToggleKeydown(e))}),document.addEventListener("click",e=>this.handleDocumentClick(e),!0),document.addEventListener("keydown",e=>this.handleDocumentKeydown(e)),window.addEventListener("resize",()=>this.handleResize())}handleToggleClick(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget,s=t.closest(".lang-switcher-dropdown"),o=s?.querySelector(".lang-dropdown-menu");if(!s||!o)return;const n=s.classList.contains("is-open");this.closeAll(),n||this.open(s,t,o,!1)}handleToggleKeydown(e){const t=e.currentTarget,s=t.closest(".lang-switcher-dropdown"),o=s?.querySelector(".lang-dropdown-menu");if(s&&o)switch(e.key){case"Enter":case" ":e.preventDefault(),this.handleToggleClick(e);break;case"ArrowDown":e.preventDefault(),s.classList.contains("is-open")?this.focusFirstItem(o):this.open(s,t,o,!0);break;case"Escape":this.closeAll(),t.focus()}}handleDocumentClick(e){const t="function"==typeof e.composedPath?e.composedPath():[];this.dropdowns.some(s=>t.length?t.includes(s):e.target&&e.target.closest&&e.target.closest(".lang-switcher-dropdown"))||this.closeAll()}handleDocumentKeydown(e){"Escape"===e.key&&(this.closeAll(),this.lastToggle&&this.lastToggle.focus())}handleResize(){this.closeAll()}open(e,s,o,n){e.classList.add("is-open"),o.classList.add("show"),s.setAttribute("aria-expanded","true"),o.setAttribute("data-mode",t()?"inline":"floating"),this.lastToggle=s,n&&this.focusFirstItem(o)}close(e){const t=e.querySelector(".lang-switcher-toggle"),s=e.querySelector(".lang-dropdown-menu");s&&s.classList.remove("show"),t&&t.setAttribute("aria-expanded","false"),e.classList.remove("is-open")}closeAll(){this.dropdowns.forEach(e=>this.close(e))}focusFirstItem(e){const t=e.querySelectorAll(".lang-dropdown-item");t.length&&(t.forEach((e,t)=>e.setAttribute("tabindex",0===t?"0":"-1")),setTimeout(()=>t[0].focus(),0))}enhanceAccessibility(){this.toggles.forEach(e=>{e.hasAttribute("aria-haspopup")||e.setAttribute("aria-haspopup","true"),e.hasAttribute("aria-expanded")||e.setAttribute("aria-expanded","false");const t=e.closest(".lang-switcher-dropdown"),s=t?.querySelectorAll(".lang-dropdown-item")||[];s.forEach((t,o)=>{t.setAttribute("tabindex","-1"),t.addEventListener("keydown",t=>{switch(t.key){case"ArrowDown":t.preventDefault();(s[o+1]||s[0]).focus();break;case"ArrowUp":t.preventDefault();(s[o-1]||s[s.length-1]).focus();break;case"Home":t.preventDefault(),s[0]?.focus();break;case"End":t.preventDefault(),s[s.length-1]?.focus();break;case"Escape":this.closeAll(),e.focus()}})})})}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{new s}):new s,window.LangSwitcher=s}();