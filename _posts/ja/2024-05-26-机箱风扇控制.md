---
layout: post
title: PCケースファンの制御
date: 2024-05-26 19:06:14
last_updated: 2024-05-26 19:06:14
description: 温度カーブでPCケースファンの回転数を制御する方法
tags: Hardware Optimization
categories: Tools
featured: false
giscus_comments: true
related_posts: true
toc:
  sidebar: right
---

## 雑感

以前は自分のATXデスクトップのファンがうるさいとは思いませんでしたが、新しくITX小型PCを組んでから、ATXの方が本当にうるさいと感じるようになりました。特に、もう一台のmini PCと並べて使うと、以前はうるさいと思っていたmini PCですら静かに感じます。

マザーボード標準のファン制御機能は、マザーボード温度またはCPU温度の2つしか選べません。CPUが低温のときにファン回転数を最低に設定しても、効果がないようです。これはMAXSUNのBIOSがイマイチなのか、私のケースファンが原因なのかもしれません。

ケースファンが高速回転する必要があるのは、主にグラフィックボードが高負荷のときです。しかし、マザーボード標準のファン制御はマザーボードの温度センサーに依存しており、マザーボード自体は主な発熱源ではなく、間接的に熱を受けているだけなので誤差が生じます。グラボの温度に応じてケースファンの回転数を調整するのが正解ですが、BIOSではそのような設定ができません。

GitHubで「FanControl」という小さなソフトを見つけました。機能がとても強力なので、ここに記録しておきます。

## 回転数の制御

主に3つのモジュールがあります：**Controls（制御）**、**Speeds（速度）**、**Curves（カーブ）**。

<img src="https://xwj770427414.oss-cn-beijing.aliyuncs.com/img/image-20240620182749451.png" alt="image-20240620182749451" style="zoom: 33%;" />

最初に適当に調整してみたところ、問題が発覚しました。私のケースファンはこのソフトで制御できず、CPUファンだけが制御可能でした。もう一つの問題は、実は2つのケースファンが常に最高回転数（1350rpm）で回っていたことです。どうりでうるさいわけです。もともと4つのケースファンがありましたが、2つ外して正解でした。ファンの情報を調べたところ、Arctic F12 3Pinで、評判も悪くありません。1000rpm以下なら静かですが、それ以上だとうるさいという意見もありました。

さらにファンの仕様を調べると、なんとPWM制御に対応していませんでした。だからマザーボードで調整しても効果がなかったのです。BIOSを再確認すると、2つのケースファンのうち1つだけがDC制御を選択でき、もう1つはなぜか調整できません。時間があるときに外してコネクタを確認してみます。BIOS設定を保存した後、ケース外側のファンは回転数調整ができるようになりました。これで必要に応じて調整できます。

<img src="https://xwj770427414.oss-cn-beijing.aliyuncs.com/img/image-20240620184306186.png" alt="image-20240620184306186" style="zoom: 33%;" />

## パラメータ設定

- **Curvesは手動で回転数ルールを作成する必要があります。** 初回起動時はCurvesがありません。右下のプラスボタンでルールを追加できます。LinearまたはGraphはどちらも簡単に設定できます。
  - HysteresisやResponse timeは感度や応答速度の設定で、デフォルトのままで問題ありません。Temperature source（温度ソース）はGPU（グラフィックボード）に設定します。
  - Graph形式のCurvesの方が直感的で分かりやすいと感じたので、3段階でケースファンを制御するように設定しました：
    - 低温域（CPU/GPU温度が40°C未満）：ファン回転数10-20%。静音性を保ちつつ、軽負荷に十分な冷却。
    - 中温域（CPU/GPU温度が40°C〜60°C）：ファン回転数20-40%。ネットや動画視聴、軽いゲームなど中程度の負荷に対応し、騒音も抑えめ。
    - 高温域（CPU/GPU温度が60°C超）：ファン回転数40-100%。高負荷時（大型ゲームや重いレンダリング作業）に最大の冷却性能を発揮し、温度上昇に応じて非線形に回転数を上げて温度を効果的に制御。

<img src="https://xwj770427414.oss-cn-beijing.aliyuncs.com/img/image-20240620185657196.png" alt="image-20240620185657196" style="zoom: 50%;" />

- **Speedsの各ボックスは、システム内のすべてのファンを表します。** デフォルトではFan #1、Fan #2、Fan #3...と表示されますが、名前を変更できます。
- **ControlsはSpeedsとCurvesを関連付ける役割です。**
  - Control右上の設定から「Select matching fan」でファンを紐付けます。
  - Controlのパラメータも分かりやすいです：Enable（有効化）、Fan curve（回転数ルール、先ほど設定したものを選択）、offset（オフセット、複数ファンの回転数を均等にするための調整）

---

最後に、パラメータ調整後のファン制御結果は以下の通りです：

<img src="https://xwj770427414.oss-cn-beijing.aliyuncs.com/img/image-20240620190508654.png" alt="image-20240620190508654" style="zoom: 33%;" />

<footer lang="ja" style="
  background-color: #f8f9fa;
  color: #6c757d;
  font-size: 0.85rem;
  line-height: 1.5;
  padding: 1rem 1.5rem;
  margin-top: 2rem;
  border-top: 1px solid #e9ecef;
  text-align: center;
">
  <p style="margin: 0; word-break: break-word;">
    このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。
    <a href="mailto:wenjie.xu.cn@outlook.com" style="
      color: #007bff;
      text-decoration: none;
    ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。
  </p>
</footer>
