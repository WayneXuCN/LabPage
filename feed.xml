<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://waynexucn.github.io//feed.xml" rel="self" type="application/atom+xml"/><link href="https://waynexucn.github.io//" rel="alternate" type="text/html" hreflang="en"/><updated>2025-07-08T01:43:14+00:00</updated><id>https://waynexucn.github.io//feed.xml</id><title type="html">Wenjie Xu</title><subtitle>Wenjie Xu&apos;s home page. feedId:120017115220794368+userId:72841831310508032 </subtitle><entry><title type="html"></title><link href="https://waynexucn.github.io//blog/2025/2024-07-15-Python%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E8%B7%AF%E5%BE%84%E7%9A%84%E8%8C%83%E5%BC%8F/" rel="alternate" type="text/html" title=""/><published>2025-07-08T01:43:14+00:00</published><updated>2025-07-08T01:43:14+00:00</updated><id>https://waynexucn.github.io//blog/2025/2024-07-15-Python%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E8%B7%AF%E5%BE%84%E7%9A%84%E8%8C%83%E5%BC%8F</id><content type="html" xml:base="https://waynexucn.github.io//blog/2025/2024-07-15-Python%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E8%B7%AF%E5%BE%84%E7%9A%84%E8%8C%83%E5%BC%8F/"><![CDATA[<h1 id="effiziente-pfadverwaltung-in-python-projekten-best-practices">Effiziente Pfadverwaltung in Python-Projekten: Best Practices</h1> <p>In Python-Projekten müssen Programme häufig auf Daten-, Konfigurations- oder Logdateien zugreifen. Werden Pfade direkt im Code fest verdrahtet oder ständig relativ zusammengesetzt, wird der Code nicht nur unübersichtlich, sondern es schleichen sich auch leicht Fehler ein, die zu Abstürzen führen können. Um diese Probleme zu vermeiden, stelle ich hier einen standardisierten Ansatz zur Pfadverwaltung vor, der Lesbarkeit, Wartbarkeit und Plattformkompatibilität verbessert。</p> <h2 id="四种方法-zur-pfadverwaltung">四种方法 zur Pfadverwaltung</h2> <h3 id="1-festlegen-des-projekt-stammverzeichnisses">1. Festlegen des Projekt-Stammverzeichnisses</h3> <p>Das Projekt-Stammverzeichnis (Project Root) dient als Basis für alle weiteren Pfade, anstatt sich auf relative Pfade einzelner Dateien zu verlassen. Die Position des Projekt-Roots kann dynamisch ermittelt werden, zum Beispiel:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Über die aktuelle Datei (z.B. paths.py) das Projekt-Root bestimmen, ggf. mehrere parent verwenden
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">__file__</span><span class="p">).</span><span class="nf">resolve</span><span class="p">().</span><span class="n">parent</span><span class="p">.</span><span class="n">parent</span>
<span class="c1"># PROJECT_ROOT = Path.cwd().resolve().parent.parent
</span></code></pre></div></div> <h4 id="vorteile">Vorteile</h4> <ul> <li>Unabhängig von Umgebungsvariablen, funktioniert in verschiedenen Entwicklungsumgebungen。</li> <li>Einheitliche Basis für die Pfadverwaltung， klare Logik。</li> </ul> <hr/> <h3 id="2-projekt-stammverzeichnis-über-umgebungsvariablen-konfigurieren">2. Projekt-Stammverzeichnis über Umgebungsvariablen konfigurieren</h3> <p>Das Projekt-Root wird über eine Umgebungsvariable (z.B. <code class="language-plaintext highlighter-rouge">PYTHONPATH</code>) gesetzt, alle Pfade werden davon abgeleitet。</p> <ol> <li> <p>Das Projekt-Root zur Umgebungsvariable hinzufügen。</p> <ul> <li> <p><strong>Linux/MacOS</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PYTHONPATH</span><span class="o">=</span>/path/to/your/project
</code></pre></div> </div> </li> <li> <p><strong>Windows</strong>：</p> <div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">set</span><span class="w"> </span><span class="nx">PYTHONPATH</span><span class="o">=</span><span class="n">C:\path\to\your\project</span><span class="w">
</span></code></pre></div> </div> </li> </ul> </li> <li> <p>Im Code die Umgebungsvariable auslesen：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">osfrom</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span><span class="c1"># 从环境变量中获取项目根目录 PROJECT_ROOT = Path(os.environ["PYTHONPATH"])
</span></code></pre></div> </div> </li> </ol> <h4 id="vorteile-1">Vorteile</h4> <ul> <li>Entkoppelt Code und Dateisystemstruktur， flexible Pfadverwaltung。</li> <li>Besonders geeignet für Deployments in unterschiedlichen Umgebungen (Entwicklung/Produktion)。</li> </ul> <hr/> <h3 id="3-zentrale-pfadverwaltung-empfohlen">3. Zentrale Pfadverwaltung (empfohlen)</h3> <p>Ein eigenes Modul zur Pfadverwaltung anlegen， in dem alle wichtigen Pfade zentral definiert werden， z.B. in <code class="language-plaintext highlighter-rouge">config/paths.py</code>：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Projekt-Stammverzeichnis
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">__file__</span><span class="p">).</span><span class="nf">resolve</span><span class="p">().</span><span class="n">parent</span><span class="p">.</span><span class="n">parent</span>

<span class="c1"># Datenordner
</span><span class="n">DATA_RAW</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">raw</span><span class="sh">"</span>
<span class="n">DATA_PROCESSED</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">processed</span><span class="sh">"</span>

<span class="c1"># Log-Ordner
</span><span class="n">LOGS</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">logs</span><span class="sh">"</span>

<span class="c1"># Ergebnis-Ordner
</span><span class="n">RESULTS</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">results</span><span class="sh">"</span>
</code></pre></div></div> <p>In anderen Modulen verwenden：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">config.paths</span> <span class="kn">import</span> <span class="n">DATA_RAW</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="n">DATA_RAW</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data.txt</span><span class="sh">"</span>
<span class="k">with</span> <span class="n">file_path</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div></div> <h4 id="vorteile-2">Vorteile</h4> <ul> <li>Zentrale Verwaltung aller Pfade， Änderungen an der Verzeichnisstruktur müssen nur an einer Stelle angepasst werden。</li> <li>Erhöht Lesbarkeit und Modularität des Codes。</li> </ul> <hr/> <h3 id="4-dynamische-pfadverwaltung-mit-tools">4. Dynamische Pfadverwaltung mit Tools</h3> <p>Mit Standardbibliothek oder Drittanbieter-Tools (wie <code class="language-plaintext highlighter-rouge">importlib.resources</code>) können Pfade zu Ressourcen dynamisch verwaltet werden， besonders nützlich für statische Dateien。</p> <ul> <li> <p><strong>​<code class="language-plaintext highlighter-rouge">importlib.resources</code>​</strong>​ (ab Python 3.9)：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">importlib.resources</span> <span class="kn">import</span> <span class="n">files</span>

<span class="c1"># Dateipfad ermitteln
</span><span class="n">file_path</span> <span class="o">=</span> <span class="nf">files</span><span class="p">(</span><span class="sh">"</span><span class="s">data.raw</span><span class="sh">"</span><span class="p">)</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data.txt</span><span class="sh">"</span>

<span class="c1"># Datei lesen
</span><span class="k">with</span> <span class="n">file_path</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div> </div> </li> <li> <p><strong>​<code class="language-plaintext highlighter-rouge">pkg_resources</code>​</strong>​ (klassische Methode)：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">pkg_resources</span> <span class="kn">import</span> <span class="n">resource_filename</span>

<span class="c1"># Dateipfad ermitteln
</span><span class="n">file_path</span> <span class="o">=</span> <span class="nf">resource_filename</span><span class="p">(</span><span class="sh">"</span><span class="s">data.raw</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">data.txt</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># Datei lesen
</span><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div> </div> </li> </ul> <h4 id="vorteile-3">Vorteile</h4> <ul> <li>Pfade werden dynamisch berechnet， unterstützt Packaging und Distribution。</li> <li>Vermeidet Hardcoding von Pfaden， erhöht Portabilität。</li> </ul> <hr/> <h2 id="fortgeschritten-pfadverwaltung-mit-env-dateien">Fortgeschritten: Pfadverwaltung mit <code class="language-plaintext highlighter-rouge">.env</code>-Dateien</h2> <p>Mit einer <code class="language-plaintext highlighter-rouge">.env</code>-Datei können Pfadkonfigurationen zentral verwaltet und mit der Bibliothek <code class="language-plaintext highlighter-rouge">dotenv</code> im Code geladen werden。</p> <h4 id="beispiel">Beispiel</h4> <ol> <li> <p><strong>Erstellen einer</strong> <strong>​<code class="language-plaintext highlighter-rouge">.env</code>​</strong>​ <strong>Datei</strong>：</p> <div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">PROJECT_ROOT</span><span class="p">=</span><span class="s">/path/to/your/project</span>
</code></pre></div> </div> </li> <li> <p><strong>Laden der</strong> <strong>​<code class="language-plaintext highlighter-rouge">.env</code>​</strong>​ <strong>Datei im Code</strong>：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span><span class="p">,</span> <span class="n">find_dotenv</span>
<span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="n">os</span>

<span class="c1"># Automatisches Finden der .env-Datei im Projekt-Root
# find_dotenv() sucht von aktuellem Arbeitsverzeichnis nach oben， bis eine .env gefunden wird。
# Die .env muss nur im Projekt-Root liegen， der Code findet sie automatisch。
</span><span class="n">dotenv_path</span> <span class="o">=</span> <span class="nf">find_dotenv</span><span class="p">()</span>
<span class="nf">load_dotenv</span><span class="p">(</span><span class="n">dotenv_path</span><span class="p">)</span>

<span class="c1"># Projekt-Root aus Umgebungsvariable lesen
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">"</span><span class="s">PROJECT_ROOT</span><span class="sh">"</span><span class="p">))</span>

<span class="c1"># Unterordner zusammensetzen
</span><span class="n">DATA_RAW</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">raw</span><span class="sh">"</span>
</code></pre></div> </div> </li> </ol> <h4 id="vorteile-4">Vorteile</h4> <ul> <li><code class="language-plaintext highlighter-rouge">.env</code>-Dateien sind praktisch für Versionskontrolle und Umgebungswechsel。</li> <li>Vermeidet Hardcoding von Pfaden im Code。</li> </ul> <h2 id="sonstiges">Sonstiges</h2> <ol> <li> <p>Um Pfad-Trennzeichen zu vereinheitlichen， kann <code class="language-plaintext highlighter-rouge">os.path.normpath</code> verwendet werden。 Diese Funktion passt die Trennzeichen an das Betriebssystem an (Backslash <code class="language-plaintext highlighter-rouge">\</code> unter Windows， Slash <code class="language-plaintext highlighter-rouge">/</code> unter Linux/macOS)。</p> </li> <li>Mit <code class="language-plaintext highlighter-rouge">os.path.relpath(file, root_path)</code> kann der relative Pfad von <code class="language-plaintext highlighter-rouge">file</code> zum Projekt-Root <code class="language-plaintext highlighter-rouge">root_path</code> ermittelt werden， wobei <code class="language-plaintext highlighter-rouge">file</code> ein absoluter Pfad sein sollte， der <code class="language-plaintext highlighter-rouge">root_path</code> enthält。</li> <li>Um sicherzustellen， dass ein Zielverzeichnis existiert， kann <code class="language-plaintext highlighter-rouge">os.makedirs(path, exist_ok=True)</code> verwendet werden； falls es nicht existiert， wird es angelegt。</li> </ol> <footer lang="de" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> Diese Seite wurde automatisch von generativer KI übersetzt und kann Ungenauigkeiten oder unvollständige Informationen enthalten. <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">Feedback ist willkommen</a>, um uns bei der Verbesserung zu helfen. </p> </footer>]]></content><author><name></name></author></entry><entry><title type="html">macOS System Configuration Notes</title><link href="https://waynexucn.github.io//blog/2025/Mac%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/" rel="alternate" type="text/html" title="macOS System Configuration Notes"/><published>2025-02-16T17:05:53+00:00</published><updated>2025-02-16T17:05:53+00:00</updated><id>https://waynexucn.github.io//blog/2025/Mac%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95</id><content type="html" xml:base="https://waynexucn.github.io//blog/2025/Mac%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/"><![CDATA[<blockquote> <p>Most configuration methods for macOS are similar to Linux. This post only records macOS-specific configurations, issues, and some commonly used tools.</p> </blockquote> <h2 id="system-configuration">System Configuration</h2> <h3 id="1-initial-setup">1. Initial Setup</h3> <ul> <li>Enable installation of apps from any source: <code class="language-plaintext highlighter-rouge">sudo spctl --master-disable</code></li> <li> <p>Install software to an external hard drive</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create an Applications directory on the external drive</span>
<span class="nb">mkdir</span> /Volumes/Work/Application
<span class="c"># Create Library and Application Support directories on the external drive</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /Volumes/Work/Library/Application<span class="se">\ </span>Support
<span class="c"># Move the app folder from /Applications to the external Applications directory (manually or via command)</span>
<span class="nb">mv</span> /Applications/A.app /Volumes/Work/Application
<span class="c"># Go to the system Applications directory</span>
<span class="nb">cd</span> /Applications
<span class="c"># Link the app back to the internal drive</span>
<span class="nb">ln</span> <span class="nt">-s</span> /Volumes/Work/Application/A.app ./A.app
<span class="c"># If the app has files in ~/Library/Application Support, move them to the external drive</span>
<span class="nb">mv</span> ~/Library/Application<span class="se">\ </span>Support/A /Volumes/Work/Library/Application<span class="se">\ </span>Support
<span class="c"># And create a symlink</span>
<span class="nb">ln</span> <span class="nt">-s</span> /Volumes/Work/Library/Application<span class="se">\ </span>Support/A ~/Library/Application<span class="se">\ </span>Support
</code></pre></div> </div> </li> <li> <p>Commonly used tools</p> <table> <thead> <tr> <th>Function</th> <th>Name</th> <th>Notes</th> <th>Download Link</th> </tr> </thead> <tbody> <tr> <td>Compression</td> <td>Keka</td> <td>Free on website</td> <td><a href="https://www.keka.io/zh-cn/">Website</a></td> </tr> <tr> <td>Uninstaller</td> <td>AppCleaner</td> <td>Free</td> <td><a href="https://freemacsoft.net/appcleaner/">Website</a></td> </tr> <tr> <td>Quick Actions</td> <td>Raycast</td> <td>Basic free</td> <td><a href="https://www.raycast.com/">Website</a></td> </tr> <tr> <td>PDF Reader</td> <td>PDF Expert</td> <td>Paid</td> <td><a href="https://pdfexpert.com/">Website</a></td> </tr> <tr> <td>Screenshot</td> <td>PixPin</td> <td>Basic free</td> <td><a href="https://pixpin.cn/docs/official-log/1.9.11">Website</a></td> </tr> <tr> <td>Context Menu</td> <td>iRightMouse</td> <td>Free/Pro</td> <td>App Store</td> </tr> <tr> <td>Package Manager</td> <td>HomeBrew</td> <td>Open Source</td> <td><a href="https://brew.sh/zh-cn/">Website</a></td> </tr> <tr> <td>Menu Manager</td> <td>Ice</td> <td>Open Source</td> <td><code class="language-plaintext highlighter-rouge">brew install jordanbaird-ice</code></td> </tr> <tr> <td>Terminal</td> <td>iTerm2</td> <td>Open Source</td> <td><a href="https://iterm2.com/index.html">Website</a></td> </tr> <tr> <td>SSH</td> <td>Termius</td> <td>In-app purchase</td> <td><a href="https://termius.com/">Website</a></td> </tr> <tr> <td>Clipboard</td> <td>Raycast (partial)</td> <td>Basic free</td> <td><a href="https://www.raycast.com/">Website</a></td> </tr> <tr> <td>Window Manager</td> <td>Loop</td> <td>Open Source</td> <td><code class="language-plaintext highlighter-rouge">brew install --cask loop</code></td> </tr> <tr> <td>Wake-on-LAN</td> <td>wakeonlan</td> <td>Open Source</td> <td><code class="language-plaintext highlighter-rouge">brew install wakeonlan</code></td> </tr> <tr> <td>Audio Manager</td> <td>SoundSource</td> <td>Paid</td> <td><a href="https://rogueamoeba.com/soundsource/">Website</a></td> </tr> <tr> <td>Audio Manager</td> <td>LosslessSwitcher</td> <td>Open Source</td> <td><a href="https://github.com/LosslessSwitcher">GitHub</a></td> </tr> <tr> <td>Mouse/KB Share</td> <td>DeskFlow</td> <td>Open Source</td> <td><a href="https://github.com/DeskFlow/DeskFlow">GitHub</a></td> </tr> <tr> <td>Media Player</td> <td>IINA</td> <td>Open Source</td> <td><a href="https://iina.io/">Website</a></td> </tr> <tr> <td>Shell Autocomplete</td> <td>Amazon Q</td> <td>Open Source</td> <td><a href="https://github.com/withfig/autocomplete">GitHub</a></td> </tr> </tbody> </table> </li> <li> <p>Remove unnecessary login items and extensions</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Open the following folders in Finder and delete files matching the login item names</span>
~/Library/LaunchAgents
/Library/LaunchAgents
/Library/LaunchDaemons
</code></pre></div> </div> </li> </ul> <h3 id="2-unlimited-trial-for-eudic-dictionary">2. Unlimited Trial for Eudic Dictionary</h3> <p>The Mac version of Eudic Dictionary differs from the Windows version. The Mac version limits trial usage if not registered. You can bypass this by modifying local preferences as follows:</p> <ul> <li>Open Finder</li> <li>Shortcut: <code class="language-plaintext highlighter-rouge">Cmd + Shift + G</code></li> <li>Enter path: <code class="language-plaintext highlighter-rouge">~/Library/Preferences</code></li> <li>Find the file: <code class="language-plaintext highlighter-rouge">com.eusoft.eudic.plist</code></li> <li>Open the binary plist file as XML (you can use the Binary Plist extension in VSCode)</li> <li>Locate the field: <code class="language-plaintext highlighter-rouge">MAIN_TimesLeft</code></li> <li>Change its value to a large number (e.g., 99999) and save</li> </ul> <p>Reopen Eudic Dictionary to use pro features unlimited times. This persists even after upgrades.</p> <h2 id="development-configuration">Development Configuration</h2> <h3 id="1-python-conda-forge">1. Python (conda-forge)</h3> <h4 id="numpy">numpy</h4> <ul> <li> <p>NumPy is optimized via Apple’s Accelerate framework (BLAS). When using conda, you need to specify <code class="language-plaintext highlighter-rouge">numpy</code>’s BLAS dependency. If installing via PyPI Wheel, <code class="language-plaintext highlighter-rouge">numpy&gt;2.0</code> will automatically use Accelerate BLAS.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda <span class="nb">install </span>numpy <span class="s2">"blas=*=*accelerate*"</span>
</code></pre></div> </div> </li> <li> <p>You can also switch the BLAS implementation for the environment. This command only affects the BLAS library itself and does not automatically install other packages that depend on BLAS. If other packages require BLAS, you need to install them manually.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda <span class="nb">install</span> <span class="s2">"libblas=*=*accelerate"</span> <span class="c"># new command</span>
conda <span class="nb">install</span> <span class="s2">"blas=*=accelerate"</span> <span class="c"># old command</span>
</code></pre></div> </div> </li> <li> <p>To pin a specific BLAS implementation and prevent conda from rolling back, add <code class="language-plaintext highlighter-rouge">libblas=*=*accelerate</code> to <code class="language-plaintext highlighter-rouge">&lt;conda-root&gt;/envs/&lt;env-name&gt;/conda-meta/pinned</code> as described in the conda docs.</p> </li> </ul> <footer lang="en" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> This page was automatically translated by generative AI and may contain inaccuracies or incomplete information. <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">Feedback is welcome</a> to help us improve. </p> </footer>]]></content><author><name></name></author><category term="Tools"/><category term="macOS"/><category term="Configuration"/><summary type="html"><![CDATA[Notes on macOS software configuration and common error solutions]]></summary></entry><entry><title type="html">Practical Configuration Notes for Low-Performance Cloud Servers</title><link href="https://waynexucn.github.io//blog/2025/%E4%BD%8E%E9%85%8D%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/" rel="alternate" type="text/html" title="Practical Configuration Notes for Low-Performance Cloud Servers"/><published>2025-02-12T17:05:53+00:00</published><updated>2025-02-12T17:05:53+00:00</updated><id>https://waynexucn.github.io//blog/2025/%E4%BD%8E%E9%85%8D%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE</id><content type="html" xml:base="https://waynexucn.github.io//blog/2025/%E4%BD%8E%E9%85%8D%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"><![CDATA[<h2 id="server-configuration-overview">Server Configuration Overview</h2> <p>Recently, I purchased a cheap Alibaba Cloud ECS server with the following specs:</p> <ul> <li><strong>CPU</strong>: 2 cores (vCPU)</li> <li><strong>Memory</strong>: 2 GiB</li> <li><strong>Storage</strong>: Cloud disk 40 GiB (2120 IOPS)</li> <li><strong>Network</strong>: Fixed bandwidth 3M</li> </ul> <p>The configuration is very basic. This post documents various issues encountered during use and their solutions.</p> <h2 id="configuration-optimization">Configuration Optimization</h2> <h3 id="pnpm-optimization">pnpm Optimization</h3> <p>Due to memory and CPU limitations, pnpm may freeze when installing dependencies. It’s necessary to limit concurrency and retry parameters:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Limit concurrency to avoid running out of memory</span>
pnpm config <span class="nb">set </span>concurrency 2

<span class="c"># Disable pnpm's automatic lockfile updates to reduce disk IO during install</span>
pnpm config <span class="nb">set </span>auto-install-peers<span class="o">=</span><span class="nb">false</span>

<span class="c"># Set retry count to improve success rate in unstable networks</span>
pnpm config <span class="nb">set </span>fetch-retries 3

<span class="c"># Set retry factor to increase the interval between retries</span>
pnpm config <span class="nb">set </span>fetch-retry-factor 2

<span class="c"># Set network timeout</span>
pnpm config <span class="nb">set </span>network-timeout 60000
</code></pre></div></div> <footer lang="en" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> This page was automatically translated by generative AI and may contain inaccuracies or incomplete information. <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">Feedback is welcome</a> to help us improve. </p> </footer>]]></content><author><name></name></author><category term="Tools"/><category term="Server"/><category term="Configuration"/><summary type="html"><![CDATA[Notes on configuring cloud servers]]></summary></entry><entry><title type="html">Essay: Memories of the Old Home</title><link href="https://waynexucn.github.io//blog/2025/%E9%9A%8F%E7%AC%94%E5%B9%B4%E5%89%8D%E9%87%8D%E8%AE%BF%E6%97%A7%E5%B1%85/" rel="alternate" type="text/html" title="Essay: Memories of the Old Home"/><published>2025-01-27T23:40:15+00:00</published><updated>2025-01-27T23:40:15+00:00</updated><id>https://waynexucn.github.io//blog/2025/%E9%9A%8F%E7%AC%94%E5%B9%B4%E5%89%8D%E9%87%8D%E8%AE%BF%E6%97%A7%E5%B1%85</id><content type="html" xml:base="https://waynexucn.github.io//blog/2025/%E9%9A%8F%E7%AC%94%E5%B9%B4%E5%89%8D%E9%87%8D%E8%AE%BF%E6%97%A7%E5%B1%85/"><![CDATA[<p>After three or four years, I once again stand at the entrance to my old home. The faded Spring Festival couplets still hang on the security door. The wall paint is peeling, and the air smells musty, as if everything has returned to the past. The neighbor granny’s dog barks noisily, cooking fumes drift in through the window cracks, and the surrounding scenes are all so familiar. Only the person standing here is no longer the eighteen-year-old who thought the future could be as clear as a textbook.</p> <p>As my fingertips touch the peeling wall, I suddenly remember that when I moved to the new house three years ago, I didn’t take any photos of this memory-filled place. Back then, I was only thinking about rushing into a new life, not realizing that some farewells require a sense of ceremony. I never expected that a space carrying twenty years of memories would one day make me nostalgic for even the mold stains in the corners. Now I finally understand why elders always reminisce about the past. It turns out that when a decade of time is compressed into a tangible scene, anyone would become a nostalgic storyteller.</p> <p>I raise my phone and aim it at the rusty door. In the frame, the sunlight of 2025 intertwines with the dust of 2003. The scratches on the metal lock become clearer and clearer. As my fingertip gently traces the uneven grooves, I realize these scars record the passage of time more faithfully than any words.</p> <p>The viewfinder trembles slightly. I see my own shadow overlapping with the teenager from ten years ago who used to twirl the keychain. The neighbor granny’s frying pan still sizzles, and the dog’s barking breaks the quiet of the hallway. In the flickering light and shadow, the upside-down “Fu” character on the security door gradually peels off, its fragments drifting away in the wind. These fragments, tinged with the smell of cooking oil, suddenly feel heavy.</p> <p>It turns out that what proves we have truly lived is not grand narratives, but the patina on the doorknob, the pencil marks measuring height in the corner, the dust and rust accumulated in the door cracks over the years—these tiny fragments quietly emerge in memory, outlining the contours of time.</p> <footer lang="en" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> This page was automatically translated by generative AI and may contain inaccuracies or incomplete information. <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">Feedback is welcome</a> to help us improve. </p> </footer>]]></content><author><name></name></author><category term="Life"/><category term="Thoughts"/><category term="Discussion"/><summary type="html"><![CDATA[Random musings]]></summary></entry><entry><title type="html">Essay: The First Day of 2025, Some Thoughts</title><link href="https://waynexucn.github.io//blog/2025/%E9%9A%8F%E7%AC%9425%E5%B2%81%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9/" rel="alternate" type="text/html" title="Essay: The First Day of 2025, Some Thoughts"/><published>2025-01-01T18:00:00+00:00</published><updated>2025-01-01T18:00:00+00:00</updated><id>https://waynexucn.github.io//blog/2025/%E9%9A%8F%E7%AC%9425%E5%B2%81%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9</id><content type="html" xml:base="https://waynexucn.github.io//blog/2025/%E9%9A%8F%E7%AC%9425%E5%B2%81%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9/"><![CDATA[<p>Today is January 1st, 2025. A new year has begun, and I am a year older. There was no special celebration—just a cup of coffee, sitting at my desk, thinking about jotting down something random. I’m someone who lacks a sense of ritual and feel indifferent toward all holidays. To me, every day is the same—good or bad, it’s all the same. All meaning is assigned by people. 2025 is no different; just like every year before, there’s academic pressure, the joy of exploration, anxiety, and peace. Year after year passes like this, days flowing gently like water, occasionally rippling, but eventually returning to calm.</p> <p>This year, I’m about to turn 25. Twenty-five is a subtle number for me. At 15, being 20 seemed to mean “adulthood”—maturity, independence, and all the answers to life’s questions. At 20, 25 represented my ideal self: someone who had found direction and was moving forward steadily. My sense of time at 25 is different from when I was 15 or 20. At 15, I had no concept of time, always feeling the future was far away and days were endless, never thinking about things from the perspective of time. At 20, I started to have some vague goals, but still felt time was inexhaustible, doing whatever I liked, however I wanted.</p> <p>And so, muddling along, suddenly I’m 25. Now, I’ve reached the age I once looked forward to, only to find that many things aren’t as simple as I imagined. In fact, it’s not much different from when I was 20—no clear answers, perhaps even more confusion and uncertainty. Sometimes it makes me anxious, but sometimes it also feels liberating.</p> <p>To be honest, I rarely look at my life from the perspective of “time.” In the past few years, I’ve mostly gone with the flow. Each day is divided into classes, experiments, writing, and entertainment, rarely stopping to think about who I am or where I want to go. Perhaps because of this, time has become blurry in my life. It’s no longer a countdown or a goal to chase, but a natural flow—like air, imperceptible yet everywhere.</p> <p>Standing at the beginning of the new year, I think maybe I can try to view time from another angle. It’s not a straight line, but a slowly expanding circle. As time passes, our experiences, knowledge, and perspectives extend the boundary of this circle. As a child, the world seemed simple because the circle was small and the boundaries were close. Now, having seen more scenery and met more people, I realize the world’s complexity and vastness. Everyone’s boundary is different, and each circle has a unique shape. This helps me better understand diversity and makes me more willing to respect and accept it.</p> <p>This year, I don’t want to make grand plans. Past experience tells me that plans are easily disrupted by life’s randomness, making it harder to focus on the present. So, for me, 2025 is more about maintaining an awareness: to see. See myself, see others, see the many possibilities of this world. Maybe I’ll still feel lost this year, but as long as I gain new insights and understand myself and what I want more clearly, that’s enough.</p> <p>So, the new year is still meaningful. Through time, I see my own growth, the world’s complexity and diversity, and I become clearer about who I am, what I want, and where I want to go. Meaning is what we give it, not something it inherently possesses.</p> <p>And that’s just fine.</p> <footer lang="en" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> This page was automatically translated by generative AI and may contain inaccuracies or incomplete information. <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">Feedback is welcome</a> to help us improve. </p> </footer>]]></content><author><name></name></author><category term="Life"/><category term="Thoughts"/><category term="Discussion"/><summary type="html"><![CDATA[Random musings]]></summary></entry><entry><title type="html">2024 Work Summary</title><link href="https://waynexucn.github.io//blog/2024/2024%E5%B9%B4%E7%A7%91%E7%A0%94%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/" rel="alternate" type="text/html" title="2024 Work Summary"/><published>2024-12-15T22:30:35+00:00</published><updated>2024-12-15T22:30:35+00:00</updated><id>https://waynexucn.github.io//blog/2024/2024%E5%B9%B4%E7%A7%91%E7%A0%94%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/2024%E5%B9%B4%E7%A7%91%E7%A0%94%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/"><![CDATA[<p>I started my research journey in 2020, when the concept of “scientific research” was still unfamiliar to me. By 2023, I had entered graduate school and applied for a direct PhD transfer at the end of 2024. Looking back over these four years, the process was not always smooth, but I did not encounter any insurmountable difficulties. The period from 2023 to 2024 was both a new starting point (beginning my graduate studies) and a stage full of contradictions for me—it was both my most diligent and my most idle year. I say diligent because I devoted considerable time to learning new skills, methods, and ideas; idle because I almost completely gave up exercising, lost interest in writing papers, and spent about half my time playing games (Auto Chess) or tinkering with various gadgets (I love coding), with my focus not really on research work, resulting in a lot of wasted time. Nevertheless, this year was not without gains. My main achievements can be summarized as follows:</p> <ul> <li>Published four Chinese papers (three were project-commissioned reports, each several thousand words, and the other was previous work published in a CSSCI journal); and one English paper (EI indexed, conference submission);</li> <li>Applied for two software copyrights (mainly to meet the requirements for my supervisor’s National Natural Science Foundation project completion, so I quickly finished two);</li> <li>Received two academic awards (both “Best Paper” at conferences, one of which was recognized as an important conference by the Strategic Institute, though the overall level was low);</li> <li>Participated as a key researcher in six or seven research projects (although these tasks were not technically challenging, they improved my ability to handle different types of academic writing. However, after each task, I would experience a period of “paper fatigue”);</li> <li>Helped a fellow student revise a Chinese C-journal paper at my supervisor’s request (helping others revise is even more exhausting than writing my own, but I got second authorship as a result);</li> <li>Submitted a long-delayed English paper (this paper integrated two projects, one of which was my colleague’s work that I was not familiar with, so I lacked motivation during the writing process; after several rejections, I reorganized and resubmitted it at the end of the year);</li> <li>One ongoing project (the scope is too ambitious, progress is slow, mainly due to my own laziness).</li> </ul> <footer lang="en" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> This page was automatically translated by generative AI and may contain inaccuracies or incomplete information. <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">Feedback is welcome</a> to help us improve. </p> </footer>]]></content><author><name></name></author><category term="Life"/><category term="Blogging"/><summary type="html"><![CDATA[2024]]></summary></entry><entry><title type="html">Repost: The Normality and Abnormality of Chinese</title><link href="https://waynexucn.github.io//blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%AD%E6%96%87%E7%9A%84%E5%B8%B8%E6%80%81%E4%B8%8E%E5%8F%98%E6%80%81/" rel="alternate" type="text/html" title="Repost: The Normality and Abnormality of Chinese"/><published>2024-12-02T15:13:29+00:00</published><updated>2024-12-02T15:13:29+00:00</updated><id>https://waynexucn.github.io//blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%AD%E6%96%87%E7%9A%84%E5%B8%B8%E6%80%81%E4%B8%8E%E5%8F%98%E6%80%81</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%AD%E6%96%87%E7%9A%84%E5%B8%B8%E6%80%81%E4%B8%8E%E5%8F%98%E6%80%81/"><![CDATA[<blockquote> <p>Excerpted from Mr. Yu Kwang-chung’s 1987 article “The Normality and Abnormality of Chinese” (<a href="https://mp.weixin.qq.com/s/8gvq--Hsb4dpIAHCleH-oQ">https://mp.weixin.qq.com/s/8gvq--Hsb4dpIAHCleH-oQ</a>). This is a reprint only, and some views are debatable; I do not fully agree with them.</p> </blockquote> <h2 id="i">I</h2> <p>Since the May Fourth New Culture Movement, over the past seventy years, the Chinese language has undergone tremendous changes. On one hand, the vernacular Chinese written by outstanding writers and scholars has become increasingly mature, capable of expressing emotions and analyzing matters with ease. On the other hand, our connection with authentic Chinese, including classical Chinese and the vernacular of folk literature, has grown distant. Meanwhile, the influence of English, whether through direct learning or indirect osmosis, has become increasingly significant. As a result, the vernacular Chinese written by the general public is suffering from a growing pathology of Westernization. What people learn from mass media is not just popular concepts, but also the various expressions used to package them; sometimes, even the most discerning individuals cannot resist these expressions. Although contemporary Chinese varies by region, the common trend is toward verbosity and stiffness. For example, where Chinese would originally say “因此” (therefore), many now prefer “基于这个原因” (based on this reason); where it was once “问题很多” (many problems), many now say “有很多问题存在” (there exist many problems). If concerned individuals do not promptly warn against this trend of complicating the simple and replacing skill with clumsiness, our Chinese language is bound to worsen, and the inherent virtues of authentic Chinese—its concise and flexible linguistic ecology—will be altered beyond recognition.</p> <p>Does Chinese have an ecology? Of course, it does. Concise wording, flexible sentence structures, and sonorous tones are the normal state of the Chinese language’s vitality. Following this ecology can maintain the health of Chinese. If we consistently violate this ecology, over time, Chinese will become polluted and clogged, with a crisis looming ever closer.</p> <p>A major crisis facing Chinese today is Westernization. As a graduate of a foreign languages department who experimented with innovating Chinese in my thirties, I do not consider myself a linguistic conservative. Anyone dedicated to creative writing in Chinese would not think that skillfully using four-character idioms is the pinnacle of creative ability. On the contrary, relying heavily on idioms in writing is like thinking with the minds of the ancients and speaking with their mouths—hardly the mark of a great talent. However, on the other hand, being unable to use idioms in writing is an even bigger problem. Writing an article completely devoid of idioms is not impossible, but it is very difficult; to write such an article well is even more commendable. The current situation is that many people writing in Chinese can no longer use idioms, or at least have a limited repertoire, leaving them struggling. For instance, many students in Hong Kong today only know how to say “总的来说” (generally speaking), seemingly having forgotten “总而言之” (in short). Similarly, they probably wouldn’t say “一言难尽” (it’s a long story), but rather “不是一句话就能够说得清楚的” (it cannot be explained clearly in one sentence).</p> <p>Idioms have survived for thousands of years and become part of our culture. For example, “千锤百炼” (thoroughly tempered) has symmetrical meaning and coordinated tones. One could say “千炼百锤,” but it sounds awkward and lacks the aesthetic quality of “千锤百炼.” Similarly, phrases like “朝秦暮楚” (fickle allegiance), “齐大非偶” (too powerful to be a suitable match), and “乐不思蜀” (too happy to think of home) all contain Chinese history. The decline of idioms reflects a fading memory of classical Chinese and a shrinking cultural consciousness.</p> <p>Our English hasn’t been mastered, yet our Chinese has been corrupted, or one might say, led astray. The Westernization of Chinese is not necessarily a flaw. A slow and moderate Westernization is an almost unavoidable trend, and skillful Westernization can even be beneficial. But excessively rapid and strong Westernization destroys the natural ecology of Chinese, becoming a malignant Westernization. This is a crisis that all concerned individuals should be alert to and actively resist. Among European languages, English, with its relatively simple grammar, is perhaps the closest to Chinese. Nevertheless, there are still many fundamental differences between English and Chinese that prevent them from blending harmoniously. Anyone with experience in Chinese-English translation will surely agree. In fact, studying translation is equivalent to studying comparative linguistics. Below, I will briefly analyze the pathology of Westernized Chinese by examining the differences between the two languages.</p> <h2 id="ii">II</h2> <p>Compared to Chinese, English is not only rich in abstract nouns but also fond of using them. English can say, “The reduction of his income changed his lifestyle,” which sounds overly Westernized in Chinese. In English, using the abstract noun “reduction” as the subject is perfectly natural. The Chinese way of saying this would be to use a concrete noun, especially a person, as the subject: “他因为收入减少而改变生活方式” (He changed his lifestyle because his income decreased), or “他收入减少，乃改变生活方式” (His income decreased, so he changed his lifestyle).</p> <p>Chinese often uses an event (a short clause) as the subject, whereas English often uses a noun (or noun phrase). “横贯公路再度坍方，是今日的头条新闻” (The Cross-Island Highway collapsing again is today’s top news) is the Chinese way. “横贯公路的再度坍方，是今日的头条新闻” (The second collapse of the Cross-Island Highway is today’s top news) reveals the influence of English grammar. Similarly, “选购书籍，只好委托你了” (As for selecting books, I’ll have to entrust it to you) is Chinese grammar, while “书籍的选购，只好委托你了” (The selection of books will have to be entrusted to you) is slightly Westernized. “推行国语，要靠大家努力” (Promoting the national language depends on everyone’s effort) is a natural expression, whereas “国语的推行，要靠大家的努力” (The promotion of the national language depends on everyone’s effort) is rather cumbersome. This situation is also seen in objects. For example, “他们杯葛这种风俗的继续” (They boycott the continuation of this custom) is a terrible sentence. In any case, “杯葛继续” (boycott continuation) sounds awkward. If changed to “他们反对保存这种风俗” (They oppose preserving this custom), it becomes much more natural.</p> <p>The English preference for abstract nouns results in the weakening, or one might say, the hollowing out of verbs. The language of science, social sciences, and official documents has heavily invaded daily life, forcing many clear and powerful verbs to transform into expressionless phrases. Here are a few common examples:</p> <blockquote> <p>apply pressure: press</p> <p>give authorization: permit</p> <p>send a communication: write</p> <p>take appropriate action: act</p> </blockquote> <p>In the examples above, concise single-syllable verbs have been turned into phrases containing abstract nouns, which on the surface appear more formal and advanced. For instance, “press” becomes “apply pressure,” where the action is split in two: half is tamed into the static abstract noun “pressure,” and the other half is diluted into the broad and vague verb “apply.” Scholars like Jacques Barzun and Lionel Trilling call these broad verbs “weak verbs.” They say, “The influence of the scientific report, necessarily monotonous and cold, has been to make modern prose prefer the string of static concepts, linked by prepositions and by weak verbs, usually in the passive voice.”</p> <p>What Barzun calls “weak verbs” is equivalent to what the British novelist George Orwell called “verbal false limbs.” Contemporary Chinese also exhibits this pathology, favoring the decomposition of simple, clear verbs into phrases of “all-purpose verb + abstract noun.” The most popular all-purpose verbs currently are “作出” (to make) and “进行” (to carry out), whose malignant influence is so great that they are on the verge of consuming half of the regular verbs. Consider the following examples:</p> <blockquote> <p>(一) 本校的校友对社会作出了重大的贡献。 (The alumni of our school have made significant contributions to society.)</p> <p>(二) 昨晚的听众对访问教授作出了十分热烈的反应。 (Last night’s audience gave a very enthusiastic response to the visiting professor.)</p> <p>(三) 我们对国际贸易的问题已经进行了详细的研究。 (We have conducted a detailed study of the problem of international trade.)</p> <p>(四) 心理学家在老鼠的身上进行试验。 (Psychologists conduct experiments on rats.)</p> </blockquote> <p>Whether through direct or indirect influence, such grammar is an increasingly Westernized phenomenon, as original Chinese verbs are decomposed into the cumbersome phrases mentioned above. The four sentences could have been said as:</p> <blockquote> <p>(一) 本校的校友对社会贡献很大。 (The alumni of our school contributed greatly to society.)</p> <p>(二) 昨晚的听众对访问教授反应十分热烈。 (Last night’s audience reacted very enthusiastically to the visiting professor.)</p> <p>(三) 我们对国际贸易的问题已经详加研究。 (We have studied the problem of international trade in detail.)</p> <p>(四) 心理学家用老鼠来做试验。(或：心理学家用老鼠试验。) (Psychologists use rats for experiments. or: Psychologists experiment with rats.)</p> </blockquote> <p>Scholars like Barzun lament that modern English tends to complicate the simple, turn the dynamic into static, the concrete into abstract, and the direct into circuitous, to the point of a “noun-plague.” As knowledge becomes more specialized, the jargon of various disciplines, especially the “cant” of science and social sciences, spreads from professional use to lay borrowing, and is further disseminated by “journalese.” On one hand, this makes modern English appear colorful and diverse; on the other, it creates confusion and makes everyday language mottled. The British poet Robert Graves (1895-1986) criticized this phenomenon in his short poem “Tilth”:</p> <blockquote> <p>Gone are the sad monosyllabic days</p> <p>When “agricultural labour”still was tilth.</p> <p>And “100% approbation”, praise;</p> <p>And “pornographic modernism”, filth-</p> <p>And still I stand by tilth and filth and praise.</p> </blockquote> <p>In the epidemic of “noun-plague,” the most severe affliction is arguably “scientism.” In modern industrial society, science has long been esteemed, and technology is its favored child. Thus, intellectuals, consciously or unconsciously, love to use “academic-sounding” abstract nouns in their speech and writing to appear objective and precise. Some call this “pseudo-jargon.” For example, saying “initial phase” instead of “first step,” or “communication” instead of “letter,” falls into this category.</p> <p>The same is true for Chinese. One could originally say “名气” (fame), but the term “知名度” (visibility/name recognition) was created out of thin air. Instead of saying “很有名” (very famous), people now take a roundabout, affectedly elegant route to say “具有很高的知名度” (possesses a high degree of visibility), which is truly pedantic and ridiculous. Another piece of pseudo-jargon is “可读性” (readability), which is equally active in book reviews and publishing advertisements. One could clearly say “这本传记很动人” (this biography is very moving), “这本传记引人入胜” (this biography is captivating), or simply “这本传记很好看” (this biography is a good read), but instead they say “这本传记的可读性颇高” (this biography’s readability is quite high). I don’t understand where this word came from, because in English this concept is expressed with the adjective “readable,” not the abstract noun “readability.” English would say, “The biography is highly readable,” but not “The biography has high readability.” This trend is becoming increasingly rampant in Taiwan. On television, reporters are already saying “昨晚的演奏颇具可听性” (last night’s performance had considerable listenability). In book reviews, sentences like this have appeared: “只要写得好，传统写实作品岂不比一篇急躁的实验小说更具可看性？” (As long as it’s well-written, doesn’t a traditional realist work have more ‘watchability’ than a hasty experimental novel?)</p> <p>I really don’t understand why that book reviewer couldn’t say “岂不比一篇……更耐看 (更动人)？” (isn’t it more engaging/moving than…). By the same token, is “更具前瞻性” (possessing more forward-looking nature) really more elegant than “更有远见” (more visionary)? If this continues, won’t we see strange sentences like “他讲的这件趣事可笑性很高” (The funny story he told has a high degree of laughability)? Furthermore, abstract nouns like “某某主义” (-ism) are also overused. Intellectuals in Britain and America advocate for using them sparingly. Mainland Chinese writing is fond of saying “富于爱国主义的精神” (rich in the spirit of patriotism), which is actually quite ungrammatical. Patriotism is a simple emotion; why academicize it into an “-ism”? If patriotism becomes an “-ism,” couldn’t we also say “pro-Japan-ism,” “anti-America-ism,” or “nostalgia-ism”? Secondly, an “-ism” is already a kind of spirit, so there’s no need for repetition. It’s sufficient to say “富于爱国精神” (rich in patriotic spirit).</p> <p>That nouns have singular and plural forms is a convention in European languages. The pluralization rules in English grammar are much simpler compared to other European languages. Look at the different ways to say “The roses are small” in English, French, German, Spanish, and Italian:</p> <blockquote> <p>The roses are small.</p> <p>Les roses sont petites.</p> <p>Die Rosen sind klein.</p> <p>Las rosas son chiquitas.</p> <p>Le rose sono piccole.</p> </blockquote> <p>Each sentence has four words in the exact same order: article, noun, verb, adjective. In the English sentence, only the verb changes with the noun; the other two words do not distinguish between singular and plural. In the German sentence, only the adjective remains unchanged. In the French, Spanish, and Italian sentences, because the subject noun is plural, all the other words change accordingly.</p> <p>Fortunately, Chinese nouns do not have plural forms, nor do they distinguish gender; otherwise, it would be overwhelmingly cumbersome. In the dialogue of old novels, there are indeed plural words like “爷们” (men), “娘们” (women), and “丫头们” (maids), but in the narrative parts, “诸姐妹” (all the sisters) and “众丫鬟” (all the maids) are used. When Chinese needs to express a majority, it also says “民众” (the populace), “徒众” (disciples), “观众” (audience), “听众” (listeners), so “众” has a function similar to “们” (-men/s). But whether it’s “众” or “们,” they are not needed everywhere in Chinese as plural suffixes. Often, we say “文武百官” (all civil and military officials), not “官们” (officials-s), nor “文官们” (civil officials-s) and “武官们” (military officials-s). Similarly, “全国的同胞” (all compatriots of the nation), “全校的师生” (all teachers and students of the school), “所有的顾客” (all customers), “一切乘客” (all passengers) are naturally plural and do not need the superfluous addition of a plural marker. Many Chinese people, influenced by Westernization, love to add this unnecessary flourish. Thus, “人们” (people-s) has replaced the original “人人” (everyone), “大家” (everyone), “大众” (the public), “众人” (the crowd), “世人” (people of the world). “人们” is truly an ugly Westernized word that Lin Yutang never used, and I hope everyone else will avoid it too. On television, people also say “民众们” (populace-s), “听众们” (listeners-s), “球员们” (players-s), which is truly redundant. Especially using “众” and “们” together is simply ungrammatical.</p> <p>The lack of number distinction in Chinese words can sometimes lead to difficulties. For example, “一位观众” (one audience) is clearly ungrammatical, but “观众之一” (one of the audience) is cumbersome and unnatural. “一位观者” (one viewer) is not as readily available as “一位读者” (one reader), so sentences like “一位观众来信说……” (an audience member wrote in to say…) have to be tolerated.</p> <p>However, the proliferation of “…之一” (…one of) cannot be ignored. Although “…之一” is singular, the underlying consciousness is plural. Like other European languages, English loves to say “one of my favorite actresses,” “one of those who believe…,” “one of the most active promoters.” Chinese originally did not have the “…之一” sentence structure. Our current use of “观众之一” is a matter of necessity. As for sentences like:</p> <blockquote> <p>刘伶是竹林七贤之一。 (Liu Ling was one of the Seven Sages of the Bamboo Grove.)</p> <p>作为竹林七贤之一的刘伶…… (As one of the Seven Sages of the Bamboo Grove, Liu Ling…)</p> </blockquote> <p>These are now very popular. The first sentence, though Westernized, is not redundant. The second sentence, however, is a malformed product of malignant Westernization. Not only are the words “作为” (as) purely superfluous, but “之一的” is a clumsy mix of classical and vernacular, making it fragmented to read. It also pushes the subject “刘伶” down, which is an awkward affectation. In fact, the meaning of the second sentence is identical to the first. It crudely transplants the English grammar of “As one of the Seven Worthies of the Bamboo Grove, Liu Ling…” into Chinese. So, instead of saying “作为竹林七贤之一的刘伶以嗜酒闻名” (As one of the Seven Sages of the Bamboo Grove, Liu Ling was famous for his love of wine), why not just say plainly, “刘伶是竹林七贤之一，以嗜酒闻名” (Liu Ling was one of the Seven Sages of the Bamboo Grove and was famous for his love of wine)? In fact, there are many ways to avoid saying “之一” in the first sentence. Chinese could originally say “刘伶乃竹林七贤之同侪” (Liu Ling was a peer of the Seven Sages); “刘伶列于竹林七贤” (Liu Ling was ranked among the Seven Sages); “刘伶跻身竹林七贤” (Liu Ling was among the Seven Sages); “刘伶是竹林七贤的同人” (Liu Ling was a member of the Seven Sages).</p> <p>Whether it’s “竹林七贤之一” (one of the Seven Sages) or “文房四宝之一” (one of the Four Treasures of the Study), the situation is not severe, because seven and four are specific numbers, and logically one cannot simply say “刘伶是竹林七贤” (Liu Ling is the Seven Sages) or “砚乃文房四宝” (The inkstone is the Four Treasures). The current undesirable trend is in sentences like these:</p> <blockquote> <p>红楼梦是中国文学的名著之一。 (Dream of the Red Chamber is one of the masterpieces of Chinese literature.)</p> <p>李广乃汉朝名将之一。 (Li Guang was one of the famous generals of the Han Dynasty.)</p> </blockquote> <p>In both sentences, “之一” (one of) is superfluous. Everything in the world has its peers and kind; to have to account for all others every time one is mentioned is a bit too considerate. Of course, there is more than one masterpiece of Chinese literature, and there was certainly more than one famous general in the Han Dynasty. Without adding this pedantic “之一,” absolutely no one would mistake you for being ignorant or for making an omission. Once this bad habit is formed, one might end up writing sentences like “小张是我的好朋友之一” (Xiao Zhang is one of my good friends), “我不过是您的平庸的学生之一” (I am but one of your mediocre students), and “他的嗜好之一是收集茶壶” (One of his hobbies is collecting teapots).</p> <p>The malady of “之一” has worsened in Hong Kong, becoming “其中之一” (one among them). In Hong Kong newspapers and magazines, strange sentences like “我是听王家的兄弟其中之一说的” (I heard it from one among the Wang family’s brothers) or “戴维连一直以来都是我最喜欢的导演其中之一” (David Lean has always been one among my favorite directors) are already prevalent. The deep harm of the English plural concept to Chinese is evident from this.</p> <p>This brings us to the “最…之一” (one of the most…) grammatical structure. English loves to say “He is one of the greatest thinkers of our time,” as if it were extremely precise, but it’s not necessarily so. “The greatest” elevates to the highest level, while “one of” slightly lowers it, resulting in an elevation that doesn’t quite reach the absolute peak. You don’t know how many “greatest thinkers” there are—four? or seven?—so there’s considerable flexibility. After going in a big circle, there’s not much difference. Therefore, it’s enough to say “他是一个大名人” (He is a great celebrity) or “他是赫赫有名的人物” (He is a very famous figure), without being circuitous and saying “他是最有名气的人物之一” (He is one of the most famous figures).</p> <h2 id="iii">III</h2> <p>In English, words of the same part of speech are often connected by “and”: for example, “man and wife,” “you and I,” “back and forth.” But in Chinese, similar situations often do not use a conjunction, so it is sufficient to say “夫妻” (husband and wife), “你我” (you and I), “前后” (back and forth). Similarly, a long string of similar words in Chinese can be listed without conjunctions: for example, “东南西北” (east, south, west, north), “金木水火土” (metal, wood, water, fire, earth), “礼乐射御书数” (rites, music, archery, charioteering, calligraphy, mathematics), “柴米油盐酱醋茶” (firewood, rice, oil, salt, soy sauce, vinegar, tea). A Chinese person would never say “开门七件事，柴、米、油、盐、酱、醋以及茶” (The seven necessities of life are firewood, rice, oil, salt, soy sauce, vinegar, and tea). Anyone who said that would surely be laughed at. Similarly, Chinese only says “思前想后” (think back and forth), “说古道今” (talk about the past and present). However, recently the consciousness of “and” has crept into Chinese and is causing trouble everywhere. A Hong Kong newspaper once had this sentence:</p> <blockquote> <p>在政治民主化与经济自由化的发展道路，台北显然比北京起步更早及迈步更快，致在政经体制改革的观念、行动、范围及对象，更为深广更具实质…… (On the path of political democratization and economic liberalization, Taipei clearly started earlier and moved faster than Beijing, resulting in the concepts, actions, scope, and targets of political and economic system reform being broader, deeper, and more substantial…)</p> </blockquote> <p>This kind of writing is not very smooth. For example, in the first half of the sentence, the conjunctions “与” (and) and “及” (and) are unnecessary. “与” could be said to be unnecessary, but “及” is simply unacceptable. The latter part, “更为深广更具实质” (broader, deeper, and more substantial), sounds like Chinese, but “起步更早及迈步更快” (started earlier and moved faster) is practically English. The character “及” disrupts the Chinese ecology because Chinese does not have this usage. If a conjunction must be used here, it can only be “而,” not “及.” Just as “slow but sure” in Chinese should be “慢而可靠” (slow and reliable) or “缓慢而有把握” (slow and with certainty), it cannot be “慢及可靠” (slow and reliable) or “缓慢与有把握” (slow and with certainty). The conjunction “而” can not only indicate a further step, as in “学而时习之” (to learn and review it from time to time), but also a retreat or correction, as in “国风好色而不淫，小雅怨诽而不乱” (The Airs of the States are amorous but not licentious; the Minor Odes are critical but not chaotic). It can be said to have the functions of both “and” and “but.”</p> <p>The current undesirable trend is that places that originally did not use conjunctions are now fitted with them under the influence of the “and” consciousness. Moreover, these so-called conjunctions are monopolized by “和,” “与,” “及,” and “以及,” while flexible and nuanced words like “而,” “并,” and “而且” are on the verge of extinction. (※EN: But don’t overuse “而” either!)</p> <h2 id="iv">IV</h2> <p>Prepositions are far more important in English than in Chinese; they are practically the lubricants of the English language. In English, an intransitive verb plus a preposition often becomes a transitive verb, such as “look after” and “take in.” Prepositional phrases can also be used as adjectives or adverbs, for example, “a friend in need,” “said it in earnest.” So English is almost inseparable from prepositions. Chinese is not necessarily so. The phrases “扬州十日、嘉定三屠” (Ten Days of Yangzhou, Three Massacres of Jiading) do not use a single preposition; if translated into English, they would be indispensable.</p> <p>“欢迎王教授今天来到我们的中间，在有关环境污染的各种问题上，为我们作一次学术性的演讲。” (Welcome Professor Wang to our midst today, to give us an academic lecture on the various issues concerning environmental pollution.) Such a half-Chinese, half-Western opening can be heard everywhere. In fact, prepositions like “中间” (midst) and “有关” (concerning) are superfluous. Some Chinese translations of the Bible and sermons by pastors, disregarding the ecology of Chinese, will say “神在你的里面” (God is inside of you). The meaning is understood, but it doesn’t sound like Chinese.</p> <p>“有关” (concerning) and “关于” (about) are probably the most overused prepositions. “有关文革的种种，令人不能置信” (The various things concerning the Cultural Revolution are unbelievable); “今天我们讨论有关台湾交通的问题” (Today we will discuss the problem concerning Taiwan’s transportation); “关于他的申请，你看过了没有？” (Have you seen his application?). In these sentences, “有关” and “关于” are completely redundant. Recently, I served as a judge for the “National Student Literature Award,” and one submission had a very long title: “关于一个河堤孩子的成长故事” (About the growing-up story of a child from the riverbank). In these thirteen characters, “关于” (About) has no function, and “一个” (a) and “故事” (story) are also dispensable. “关于” has several cousins, the most prominent of which is “由于” (due to). This word is often used improperly in contemporary Chinese:</p> <blockquote> <p>由于秦末天下大乱，(所以) 群雄四起。 (Due to the great chaos at the end of the Qin Dynasty, (so) warlords rose up.)</p> <p>由于好奇心的驱使，我向窗内看了一眼。 (Driven by curiosity, I glanced inside the window.)</p> <p>由于他的家境贫穷，使得他只好休学。 (Due to his poor family background, it made him have to drop out of school.)</p> </blockquote> <p>English is formally logical and likes to explain the causal relationships of things. Chinese is not necessarily so. “清风徐来，水波不兴” (A gentle breeze came, and the water remained calm) certainly has a causal relationship, but Chinese uses context for unspoken implication. If it were in English, it would probably say “Because a gentle breeze came, so the water remained calm,” or “A gentle breeze came, and did not stir the water.” In the first sentence above, deleting “由于” (due to) and “所以” (so) not only does not harm the meaning but also makes the writing cleaner. The phrase “由于好奇心的驱使” (driven by curiosity) in the second sentence is not a major flaw (Note 4), but it is a bit wordy and doesn’t need to use formal words like “驱使” (driven). If simplified to “出于好奇，我向窗内看了一眼” (Out of curiosity, I glanced inside the window) or “为了好奇，我向窗内看了一眼” (For the sake of curiosity, I glanced inside the window), it would be much better. The ungrammaticality of the third sentence is a very common mistake. A phrase like “由于他的家境贫穷” (due to his poor family background) can only be used to modify a verb, not as a subject. If this sentence were to delete redundant causal words like “由于” and “使得” (made), and be written as “他家境贫穷，只好休学” (His family was poor, so he had to drop out of school), it would look much cleaner.</p> <h2 id="v">V</h2> <p>The influence of English adverbial forms on Chinese is not yet significant, but it has begun. For example, sentences like these:</p> <blockquote> <p>他苦心孤诣地想出一套好办法来。 (He painstakingly devised a good plan.)</p> <p>老师苦口婆心地劝了他半天。 (The teacher earnestly persuaded him for a long time.)</p> <p>大家苦中作乐地竟然大唱其民谣。 (Everyone, finding joy in hardship, actually started singing folk songs loudly.)</p> </blockquote> <p>The three idioms starting with “苦” (bitterly/painstakingly) were originally verbs, but with the adverbial suffix “地,” they are demoted to adverbs. In this way, the writing is still clear, but the grammar becomes too rigid with a clear subject-object distinction, which is a bit stiff. If “地” were uniformly deleted and replaced with a comma, not only could this subject-object relationship be shed, but the tone would also become more flexible.</p> <p>Sometimes such Westernized adverbial phrases are too long, for example, “他知其不可为而为之地还是去赴了约” (He, knowing it was impossible but doing it anyway-ly, still went to the appointment). In such cases, “地” should be deleted and replaced with a comma to loosen up the sentence structure. The most overused adverb currently is “成功地” (successfully). Once, I regrettably gave the essay topic “Reflections on the Birthday of the Nation’s Father” for an entrance exam. As a result, at least six out of ten candidates said: “国父孙中山先生成功地推翻了满清” (The Father of the Nation, Sun Yat-sen, successfully overthrew the Manchu Qing dynasty). The adverb “成功地” is meaningless here because if he overthrew it, it was a success; there’s no need for repetition. Similarly, “成功地发明了相对论” (successfully invented the theory of relativity) and “成功地泳渡了直布罗陀海峡” (successfully swam across the Strait of Gibraltar) are also verbose. If everything that is accomplished must be preceded by “成功地,” wouldn’t it be tiring?</p> <h2 id="vi">VI</h2> <p>When vernacular Chinese uses adjectives, it seems inseparable from “的,” to the point where no sentence is complete without “的.” In vernacular Chinese, this character “的” has become an irremovable tail of adjectives, appearing at least in these situations:</p> <blockquote> <p>好的，好的，我就来。是的，没问题。 (Okay, okay, I’m coming. Yes, no problem.)</p> <p>快来看这壮丽的落日！ (Come quick and see this magnificent sunset!)</p> <p>你的笔干了，先用我的笔吧。 (Your pen is dry, use my pen first.)</p> <p>也像西湖的有里外湖一样，丽芒分为大湖小湖两部分。 (Just like West Lake has an inner and outer lake, Lijiang is divided into a large lake and a small lake.)</p> <p>他当然是别有用心的。你不去是对的。 (Of course he has ulterior motives. You are right not to go.)</p> </blockquote> <p>Those who like to use “的” or are unable to resist it may find even more occasions to trouble this versatile character. I say “trouble” because in English, common adjective suffixes include -tive, -able, -ical, -ous, and many others, unlike in Chinese where “的” handles everything. English sentences often use several adjectives in a row, but because the suffixes vary greatly, they don’t fall into the formulaic pattern of today’s Chinese. For example, Shelley’s line:</p> <blockquote> <p>An old, mad, blind, despised, and dying king──</p> <p>A direct translation of these five consecutive adjectives becomes:</p> <p>一位衰老的、疯狂的、瞎眼的、被人蔑视的、垂死的君王── (An old, mad, blind, despised, dying king──)</p> </blockquote> <p>The moment an adjective is encountered, it is unthinkingly handed over to “的” for organization, which is precisely the reason for the rigidity of popular vernacular Chinese. A major reason why vernacular Chinese is wordy and weak is the excessive use of function words, and the most overused function word is “的.” Learning to use “的” sparingly is probably the first lesson for a vernacular writer. In fact, many famous writers are quite casual in this regard, as a few examples will show:</p> <blockquote> <p>(一) 月光是隔了树照过来的，高处丛生的灌木，落下参差的斑驳的黑影，峭楞楞如鬼一般；弯弯的杨柳的稀疏的倩影，却又像是画在荷叶上。 (The moonlight shone through the trees, the dense bushes on high ground cast uneven, mottled black shadows, stark like ghosts; the sparse, graceful shadows of the weeping willows, however, seemed as if painted on the lotus leaves.)</p> <p>(二) 最后的鸽群……也许是误认这灰暗的凄冷的天空为夜色的来袭，或是也预感到风雨的将至，遂过早地飞回它们温暖的木舍。 (The last flock of pigeons… perhaps mistook the gray, desolate sky for the coming of night, or perhaps sensed the approaching storm, and thus flew back to their warm wooden homes too early.)</p> <p>(三) 白色的鸭也似有一点烦躁了，有不洁的颜色的都市的河沟里传出它们焦急的叫声。 (The white ducks also seemed a bit restless, their anxious calls coming from the city ditches of unclean colors.)</p> </blockquote> <p>The “参差的斑驳的黑影” (uneven, mottled black shadows) and “弯弯的杨柳的稀疏的倩影” (sparse, graceful shadows of the weeping willows) in the first sentence are monotonous and stiff repetitions. Is it really necessary to use so many “的”s? Why not say “参差而斑驳” (uneven and mottled)? The original meaning of the second half is “弯弯的杨柳投下稀疏的倩影” (the weeping willows cast sparse, graceful shadows), but it uses three “的”s without layering, leading the reader to naturally parse it as “弯弯的、杨柳的、稀疏的、倩影” (of the weeping, of the willows, of the sparse, graceful shadows). The second sentence could save at least three “的”s. Change “灰暗的凄冷的天空” (the gray, desolate sky) to “灰暗而凄冷的天空” (the gray and desolate sky), and change “夜色的来袭” (the coming of night) and “风雨的将至” (the approaching of the storm) to “夜色来袭” (night comes) and “风雨将至” (the storm approaches). As mentioned earlier, Chinese prefers short clauses, while English prefers nouns, especially abstract ones. “夜色来袭” is so powerful, while “夜色的来袭” becomes limp. The worst is probably the third sentence. What’s the difference between “白色的鸭” (white-colored ducks) and “白鸭” (white ducks)? “有不洁的颜色的都市的河沟” (the city ditches of unclean colors) is a confusing misuse of “的.” The original meaning should be “颜色不洁的都市河沟” (city ditches of unclean color), which could be simplified to “都市的脏河沟” (the city’s dirty ditches), but the reader would still read it as “有不洁的、颜色的、都市的、河沟” (of the unclean, of the color, of the city, of the ditches).</p> <p>Adjectives now have a new trick, which is to dress them up with academic-looking abstract nouns. A few more examples:</p> <blockquote> <p>这是难度很高的技巧。 (This is a technique of high difficulty.)</p> <p>他不愧为热情型的人。 (He is worthy of being a passionate-type person.)</p> <p>太专业性的字眼恐怕查不到吧。 (Words that are too professional-natured probably can’t be found.)</p> </blockquote> <p>What on earth is “难度很高的” (of high difficulty)? Doesn’t it just mean “很难的” (very difficult)? Similarly, “热情型的人” (passionate-type person) is just “热情的人” (a passionate person); “太专业性的字眼” (words that are too professional-natured) is just “太专门的字眼” (words that are too specialized). Taking a detour through abstract nouns makes the facade seem grand, but the content remains empty.</p> <p>Adjectives or modifiers can be placed before a noun (pre-modification) or after a noun (post-modification). French often uses post-modification, for example, in Gide’s works <em>La Symphonie pastorale</em> and <em>Les Nourritures terrestres</em>, the adjectives follow the nouns; if translated into English, for example, <em>The Pastoral Symphony</em>, it becomes pre-modification. The Chinese translation “田园交响乐” is also pre-modification.</p> <p>English adjectives are typically pre-modifiers, as in the Shelley line quoted earlier, but they can also be post-modifiers, as in another line by Shelley: “One too like thee–tameless, and swift, and proud.” As for adjectival phrases or clauses, they are often post-modifiers, for example: “man of action,” “I saw a man who looked like your brother.” (※EN: This is an excellent example, please note!)</p> <p>For some reason, current vernacular Chinese almost exclusively uses pre-modification, seemingly unaware of the art of post-modification. For example, the English sentence just quoted would be unthinkingly rendered by most people in Chinese as: “我见到一个长得像你兄弟的男人” (I saw a man who looks like your brother). Few would say: “我见到一个男人，长得像你兄弟” (I saw a man, who looks like your brother). If the sentence is short, pre-modification is fine. If it’s long, pre-modification becomes too stiff. For example, the following sentence: “我见到一个长得像你兄弟说话也有点像他的陌生男人” (I saw a strange man who looks like your brother and also talks a bit like him) becomes cumbersomely long-tailed. If changed to post-modification, it would be much more natural: “我见到一个陌生男人，长得像你兄弟，说话也有点像他” (I saw a strange man, who looks like your brother and also talks a bit like him). In fact, sentences in classical Chinese often use post-modification, for example, these two lines by Sima Qian about Xiang Yu and Li Guang:</p> <blockquote> <p>籍长八尺余，力能扛鼎，才气过人。 (Xiang Yu was over eight feet tall, strong enough to lift a tripod cauldron, and exceptionally talented and spirited.)</p> <p>广为人长，猿臂，其善射亦天性也。 (Li Guang was tall, had arms like an ape, and his skill in archery was also innate.)</p> </blockquote> <p>Post-modified sentences can be extended indefinitely without losing their naturalness and flexibility. Pre-modified sentences, with the noun at the end, become cumbersome, tense, and overloaded when they get long. Therefore, pre-modified sentences are closed sentences, while post-modified sentences are open sentences.</p> <h2 id="vii">VII</h2> <p>The verb is the battleground of English grammar; so many disputes are caused by verbs. The tense changes in English are, after all, much simpler than in other European languages. In Spanish, a single verb can have seventy-eight different tenses. Chinese nouns do not distinguish between singular/plural or gender, and verbs do not change for tense, which saves a lot of trouble. In the “Epang Palace Fu,” the sentence: “秦人不暇自哀，而后人哀之。后人哀之而不鉴之，亦使后人而复哀后人也。” (The people of Qin had no time to mourn for themselves, and so later generations mourned for them. If later generations mourn for them but do not learn from it, they will cause even later generations to mourn for them in turn.) Just this one character “哀” (mourn), if expressed in a Western language, would involve countless variations.</p> <p>Since Chinese has no tense changes, it has fortunately been spared Westernization in this respect. Chinese culture is so subtle, so of course the Chinese language would not be clumsy at distinguishing the sequence of time. In prose, it says: “人之将死，其言也善” (When a person is about to die, their words are good); “议论未定，而兵已渡河” (Before the discussion was settled, the troops had already crossed the river). In poetry: “已凉天气未寒时” (The weather is already cool but not yet cold). The tenses here are clear enough. Su Shi’s quatrain: “荷尽已无擎雨盖，菊残犹有傲霜枝。一年好景君须记，最是橙黄橘绿时。” (The lotuses are gone, no more leaves to hold the rain; the chrysanthemums are withered, yet their stems still defy the frost. You must remember the best scenery of the year, it is when the oranges are yellow and the tangerines are green.) The temporal sequence within—what has passed, what is passing, and what is happening—is distinguished accurately and finely.</p> <p>Since Chinese verbs are not easily Westernized, the most people can write are sentences like “我们将要开始比赛了” (We are going to start the competition), which is not a serious problem. The crisis of verb Westernization lies in two other areas: one is the decomposition of simple verbs into “weak verb + abstract noun” compound verbs, as discussed earlier. Instead of saying “一架客机失事，死了九十八人” (A passenger plane crashed, ninety-eight people died), people say “一架客机失事，造成九十八人死亡” (A passenger plane crash caused the deaths of ninety-eight people), which is truly circuitous and affected. The other area is the adoption of the passive voice. All transitive verbs originate from an agent and act upon a recipient. Therefore, there are no more than the following three ways to describe an event with a transitive verb:</p> <blockquote> <p>(一) 哥伦布发现了新大陆。 (Columbus discovered the New World.)</p> <p>(二) 新大陆被哥伦布发现了。 (The New World was discovered by Columbus.)</p> <p>(三) 新大陆被发现了。 (The New World was discovered.)</p> </blockquote> <p>The first sentence has the agent as the subject, which is the active voice. The second sentence has the recipient as the subject, which is the passive voice. The third sentence also has the recipient as the subject and is also passive, but the agent is not mentioned. These three types of sentences are all common in English, but in Chinese, the first type is the most common, while the second and third are much less so. The third type in Chinese often becomes an active voice, for example, “糖都吃光了” (The candy has all been eaten), “戏看完了” (The play has been watched), “稿写了一半” (The draft is half-written), “钱已经用了” (The money has been used).</p> <p>The current trend of Westernization is to replace natural active voice constructions with passive ones. Look at the following examples:</p> <blockquote> <p>(一) 我不会被你这句话吓倒。 (I will not be scared by this sentence of yours.)</p> <p>(二) 他被怀疑偷东西。 (He was suspected of stealing.)</p> <p>(三) 他这意见不被人们接受。 (This opinion of his is not accepted by people.)</p> <p>(四) 他被升为营长。 (He was promoted to battalion commander.)</p> <p>(五) 他不被准许入学。 (He was not permitted to enroll.)</p> </blockquote> <p>These sentences are all stiff and violate the ecology of the Chinese language. In fact, we can easily restore them to the active voice as follows:</p> <blockquote> <p>(一) 你这句话吓不倒我。 (This sentence of yours can’t scare me.)</p> <p>(二) 他有偷东西的嫌疑。 (He is suspected of stealing.)</p> <p>(三) 他这意见大家都不接受。 (Nobody accepts this opinion of his.)</p> <p>(四) 他升为营长。 (He was promoted to battalion commander.)</p> <p>(五) 他未获准入学。 (He was not approved for enrollment.)</p> </blockquote> <p>Similarly, “他被选为议长” (He was elected speaker) is not as good as “他当选为议长” (He was elected speaker). “他被指出许多错误” (He was pointed out many mistakes) is not as good as “有人指出他许多错误” (Someone pointed out his many mistakes). “他常被询及该案的真相” (He was often asked about the truth of the case) is not as good as “常有人问起他该案的真相” (People often asked him about the truth of the case).</p> <p>The passive voice in current Chinese has two problems. One is using a stiff passive voice to replace a natural active voice. The other is the monotonous use of the character “被,” seemingly because its pronunciation is close to the English “by,” without understanding that from “受难” (to suffer) to “遇害” (to be murdered), from “挨打” (to be beaten) to “遭殃” (to suffer disaster), from “轻人指点” (to be guided by someone) to “为世所重” (to be valued by the world), there are many other words that can be used, without having to stick to one formula.</p> <h2 id="viii">VIII</h2> <p>The Westernization of Chinese varies in severity and visibility, but its scope is expanding and its phenomena are becoming more apparent, with a tendency to accelerate. The above analysis has only briefly touched upon the pathologies of Westernization in nouns, conjunctions, prepositions, adverbs, adjectives, and verbs, hoping that readers can draw inferences and be on guard.</p> <p>Optimists often say that language is alive, like a river, and its progress cannot be stopped; so-called Westernization is an inevitable trend. Language is indeed alive, but it should live healthily, not prolong its life with illness. As for the river analogy, one must not forget the banks, otherwise floods will also become disasters. The trend of Westernization is certainly unavoidable, but it should not be too fast or too extreme. We should adopt its strengths to make up for our weaknesses, not harm our strengths with its weaknesses.</p> <p>Many avant-garde writers do not take this anxiety seriously, believing that insisting on the conventions of Chinese will hinder a writer’s innovation. I am very sympathetic to this statement, as I have “been there” myself. “How can grammar be made for the likes of us!” Poets have the freedom to transgress boundaries. In this article, I emphasize the ecology of Chinese for general writing, with no intention of regulating literary creation. Avant-garde writers can feel free to chase the Muses without being constrained, becoming slaves to grammar.</p> <p>However, there is one point that must be known. Chinese has developed for several thousand years, from clarity to sublimity, and has its own well-tempered normality. Anyone who, without knowing what this normality is, rashly claims to be seeking change, may end up presenting clumsiness rather than creating ingenuity. The beauty of change is only apparent when contrasted with normality. Once normality ceases to exist, what remains is not change, but chaos.</p> <footer lang="en" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> This page was automatically translated by generative AI and may contain inaccuracies or incomplete information. <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">Feedback is welcome</a> to help us improve. </p> </footer>]]></content><author><name></name></author><category term="Writing"/><category term="Chinese"/><category term="Expression"/><category term="Article"/><summary type="html"><![CDATA[A reprint of Mr. Yu Kwang-chung's article "The Normality and Abnormality of Chinese," which does not mean I fully agree with all his views.]]></summary></entry><entry><title type="html">Deploying a Linux Server for Academic Research</title><link href="https://waynexucn.github.io//blog/2024/%E9%83%A8%E7%BD%B2%E7%94%A8%E4%BA%8E%E5%AD%A6%E6%9C%AF%E7%A0%94%E7%A9%B6%E7%9A%84Linux%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="alternate" type="text/html" title="Deploying a Linux Server for Academic Research"/><published>2024-08-24T14:34:28+00:00</published><updated>2024-08-24T14:34:28+00:00</updated><id>https://waynexucn.github.io//blog/2024/%E9%83%A8%E7%BD%B2%E7%94%A8%E4%BA%8E%E5%AD%A6%E6%9C%AF%E7%A0%94%E7%A9%B6%E7%9A%84Linux%E6%9C%8D%E5%8A%A1%E5%99%A8</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/%E9%83%A8%E7%BD%B2%E7%94%A8%E4%BA%8E%E5%AD%A6%E6%9C%AF%E7%A0%94%E7%A9%B6%E7%9A%84Linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"><![CDATA[<p>Recently, I repurposed a MiniPC into a server running the Ubuntu operating system, configuring it to meet potential future research needs.</p> <p>Given my limited knowledge of Linux, I spent some time learning and attempting to complete the deployment, documenting the configuration steps, potential issues, and their corresponding solutions.</p> <hr/> <h2 id="creating-a-new-user-with-administrator-privileges-on-ubuntu">Creating a New User with Administrator Privileges on Ubuntu</h2> <p>When using a cloud service, a vendor-provided, or a self-configured Ubuntu server, a default user is created. Typically, this user can temporarily elevate privileges using the <code class="language-plaintext highlighter-rouge">sudo</code> command to perform tasks requiring administrator rights, but it remains essentially a regular user (not an administrator account). If you need to create a custom user with the same administrator privileges, follow these steps:</p> <h3 id="1-create-a-new-user-and-specify-home-directory-login-shell">1. Create a New User and Specify Home Directory, Login Shell</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>useradd <span class="nt">-d</span> <span class="s2">"/home/&lt;user_name&gt;"</span> <span class="nt">-m</span> <span class="nt">-s</span> <span class="s2">"/bin/bash"</span> &lt;user_name&gt;
</code></pre></div></div> <p>Parameter Description:</p> <ul> <li><code class="language-plaintext highlighter-rouge">-d "/home/&lt;user_name&gt;"</code>: Sets the user’s home directory to <code class="language-plaintext highlighter-rouge">/home/&lt;user_name&gt;</code>.</li> <li><code class="language-plaintext highlighter-rouge">-m</code>: Automatically creates the home directory.</li> <li><code class="language-plaintext highlighter-rouge">-s "/bin/bash"</code>: Specifies the user’s default login shell as <code class="language-plaintext highlighter-rouge">/bin/bash</code>.</li> </ul> <h3 id="2-grant-administrator-privileges-to-the-new-user">2. Grant Administrator Privileges to the New User</h3> <p>To create a user with sudo (administrator) privileges, run the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>useradd <span class="nt">-d</span> <span class="s2">"/home/&lt;user_name&gt;"</span> <span class="nt">-m</span> <span class="nt">-s</span> <span class="s2">"/bin/bash"</span> <span class="nt">-G</span> <span class="nb">sudo</span> &lt;user_name&gt;
</code></pre></div></div> <p>Where:</p> <ul> <li><code class="language-plaintext highlighter-rouge">-G sudo</code>: Adds <code class="language-plaintext highlighter-rouge">&lt;user_name&gt;</code> to the <code class="language-plaintext highlighter-rouge">sudo</code> group, granting it administrator privileges.</li> </ul> <h3 id="3-set-the-new-users-password">3. Set the New User’s Password</h3> <p>The newly created user has no password by default. Set a password for <code class="language-plaintext highlighter-rouge">&lt;user_name&gt;</code> using the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>passwd &lt;user_name&gt;
</code></pre></div></div> <p>After running this command, the system will prompt you to enter the password twice. Note that for security reasons, no characters will be displayed when entering the password (no text or prompts will appear). Simply enter the password and press <code class="language-plaintext highlighter-rouge">Enter</code> to confirm.</p> <p>By following the above steps, you can successfully create a new user <code class="language-plaintext highlighter-rouge">&lt;user_name&gt;</code> with administrator privileges, who can execute commands using <code class="language-plaintext highlighter-rouge">sudo</code>.</p> <hr/> <h2 id="terminal-beautification">Terminal Beautification</h2> <p>A good-looking and easy-to-use terminal prompt can increase work pleasure. Here, <code class="language-plaintext highlighter-rouge">zsh</code> is used to beautify the terminal. Refer to <a href="/blog/2022/Linux实用配置记录/">previous records</a> for related operations.</p> <hr/> <h2 id="enabling-remote-access-to-the-server">Enabling Remote Access to the Server</h2> <p>To enable remote access to the Ubuntu server from a non-physical location, you can install and configure the SSH service and perform the necessary firewall configurations.</p> <h3 id="1-install-and-configure-ssh-service">1. Install and Configure SSH Service</h3> <p>If only basic SSH access is required, installing <code class="language-plaintext highlighter-rouge">openssh-server</code> and enabling the SSH service is sufficient. However, in environments with higher security requirements, you can further optimize the SSH configuration file <code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>openssh-server
</code></pre></div></div> <p>After completing the installation, check the status of the SSH service to ensure it is running normally:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status ssh
</code></pre></div></div> <ul> <li> <p><strong>Configuration Suggestions</strong>:</p> <ul> <li> <p><strong>Disable Root User Direct Login</strong> (Recommended): Avoid logging into the server directly as root to increase security. Find <code class="language-plaintext highlighter-rouge">PermitRootLogin</code> in <code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code> and set it to <code class="language-plaintext highlighter-rouge">no</code>.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/ssh/sshd_config
</code></pre></div> </div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PermitRootLogin no
</code></pre></div> </div> </li> <li> <p><strong>Limit Allowed Users</strong>: You can specify users allowed to log in via SSH through the <code class="language-plaintext highlighter-rouge">AllowUsers</code> configuration item, further enhancing security.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AllowUsers &lt;user_name&gt;
</code></pre></div> </div> </li> <li> <p><strong>Use a Non-Default Port</strong> (Optional): Change the SSH port from the default 22 to another port, such as 2200. This method can reduce the possibility of scanning attacks, but you need to update the firewall rules at the same time.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Port 2200
</code></pre></div> </div> </li> <li> <p><strong>Enable Automatic Disconnection of Idle Connections</strong>: To avoid unused SSH sessions from occupying resources for a long time, you can add the following lines to the configuration to set automatic disconnection of idle connections.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ClientAliveInterval 300
ClientAliveCountMax 2
</code></pre></div> </div> </li> </ul> </li> </ul> <p>After making the changes, restart the SSH service to apply the configuration:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ssh
</code></pre></div></div> <h3 id="2-configure-ufw-firewall">2. Configure UFW Firewall</h3> <p>If the UFW firewall is enabled, make sure to open the SSH port and make corresponding settings depending on whether the port number has been changed. If you are using the default port 22, you can directly use:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw allow ssh
</code></pre></div></div> <p>If you have changed the port number, such as setting it to 2200, you need the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw allow 2200/tcp
</code></pre></div></div> <ul> <li> <p><strong>Configuration Suggestions:</strong></p> <ul> <li> <p>After enabling the firewall, check the status to ensure the rules are applied correctly:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw <span class="nb">enable
sudo </span>ufw status
</code></pre></div> </div> </li> </ul> </li> </ul> <h3 id="3-verify-ssh-connection">3. Verify SSH Connection</h3> <p>Test the connection to the server on the client system (such as Windows). It is recommended to use terminal tools that support the SSH protocol, such as <a href="https://www.putty.org/">PuTTY</a> or <a href="https://aka.ms/terminal">Windows Terminal</a> in Windows, to ensure the security and stability of the connection.</p> <p>To test the remote connection to the server on a Windows system, you can use the telnet command (note: telnet is often used to test connections, but a more secure SSH client should be used in a production environment):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>telnet &lt;remote_ip&gt; &lt;remote_port&gt;
</code></pre></div></div> <p>Replace <code class="language-plaintext highlighter-rouge">&lt;remote_ip&gt;</code> with the IP address of the server, and <code class="language-plaintext highlighter-rouge">&lt;remote_port&gt;</code> with the SSH port the server is listening on (default is 22).</p> <h3 id="4-fix-xauthority-file-permission-issues">4. Fix .Xauthority File Permission Issues</h3> <p>Incorrect permissions for the <code class="language-plaintext highlighter-rouge">/home/&lt;user_name&gt;/.Xauthority</code> file may be due to the file being created without root privileges. In addition to modifying the ownership of the user directory, ensure that the permissions of the relevant SSH session directory are also correct:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chown</span> &lt;user_name&gt;:&lt;user_name&gt; <span class="nt">-R</span> /home/&lt;user_name&gt;
</code></pre></div></div> <p>If the problem persists, you can try creating a new <code class="language-plaintext highlighter-rouge">.Xauthority</code> file:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-u</span> &lt;user_name&gt; <span class="nb">touch</span> /home/&lt;user_name&gt;/.Xauthority
<span class="nb">sudo chown</span> &lt;user_name&gt;:&lt;user_name&gt; /home/&lt;user_name&gt;/.Xauthority
</code></pre></div></div> <h3 id="5-set-up-fail2ban-recommended">5. Set Up Fail2Ban (Recommended)</h3> <p>To further protect the SSH service from brute-force attacks, you can install and configure <code class="language-plaintext highlighter-rouge">fail2ban</code>. This tool automatically detects multiple failed login attempts and temporarily disables the corresponding IP:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>fail2ban
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">fail2ban</code> will automatically enable SSH protection. You can also customize the <code class="language-plaintext highlighter-rouge">/etc/fail2ban/jail.local</code> file to adjust parameters such as the ban time and number of retries:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[sshd]
enabled = true
port = 22
maxretry = 5
bantime = 600
</code></pre></div></div> <p>Fail2Ban will automatically identify multiple failed login attempts and disable the corresponding IP, further ensuring server security.</p> <hr/> <h2 id="configuring-ssh-connection-between-server-and-github">Configuring SSH Connection between Server and GitHub</h2> <p>The following are detailed steps to configure an SSH connection between an Ubuntu server and GitHub, ensuring you can securely clone, push, and pull repositories on GitHub.</p> <h3 id="1-install-and-verify-git">1. Install and Verify Git</h3> <p>First, install Git and confirm the installed version:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>git
git <span class="nt">--version</span>
</code></pre></div></div> <h3 id="2-configure-git-user-information">2. Configure Git User Information</h3> <p>Configure Git with your GitHub username and email. Make sure to fill in the information consistent with your GitHub account so that the author identity is correctly recorded when submitting code:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git config <span class="nt">--global</span> user.name <span class="s2">"&lt;github_account_name&gt;"</span>
git config <span class="nt">--global</span> user.email <span class="s2">"&lt;github_account_email&gt;"</span>
</code></pre></div></div> <p>The above configuration will be added to the <code class="language-plaintext highlighter-rouge">~/.gitconfig</code> file, which is a global setting, that is, applied to all Git repositories under this user.</p> <h3 id="3-generate-ssh-key-pair">3. Generate SSH Key Pair</h3> <p>To establish a secure connection with GitHub on the server, you need to generate an SSH key pair:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-C</span> <span class="s2">"&lt;github_account_email&gt;"</span> <span class="nt">-t</span> rsa
</code></pre></div></div> <ul> <li>Description: <ul> <li><code class="language-plaintext highlighter-rouge">-C "&lt;github_account_email&gt;"</code>: Add a comment to the key, usually the email address of the GitHub account.</li> <li><code class="language-plaintext highlighter-rouge">-t rsa</code>: Specifies the key type as RSA (a commonly used type supported by GitHub).</li> </ul> </li> </ul> <p>After running the command, press <code class="language-plaintext highlighter-rouge">Enter</code> three times (that is, keep the default file name <code class="language-plaintext highlighter-rouge">id_rsa</code> and the default no password setting). The key pair will be stored in the <code class="language-plaintext highlighter-rouge">~/.ssh</code> directory.</p> <h3 id="4-add-ssh-public-key-to-github">4. Add SSH Public Key to GitHub</h3> <ol> <li> <p>Use the following command to open the generated public key file and copy its contents:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> ~/.ssh/id_rsa.pub
</code></pre></div> </div> <p>This command will print the public key to the terminal. You can optionally open and copy it using a text editor (for example, using <code class="language-plaintext highlighter-rouge">vim ~/.ssh/id_rsa.pub</code>).</p> </li> <li> <p>Log in to the GitHub website and navigate to <code class="language-plaintext highlighter-rouge">Settings</code> → <code class="language-plaintext highlighter-rouge">SSH and GPG keys</code> → <code class="language-plaintext highlighter-rouge">New SSH key</code>.</p> </li> <li> <p>Paste the content from <code class="language-plaintext highlighter-rouge">id_rsa.pub</code> into the <code class="language-plaintext highlighter-rouge">New SSH key</code> page, and set a descriptive name for this key (such as <code class="language-plaintext highlighter-rouge">Ubuntu Server Key</code>), and then save it.</p> </li> </ol> <h3 id="5-test-ssh-connection-with-github">5. Test SSH Connection with GitHub</h3> <p>After the configuration is complete, test the connection with GitHub using the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-T</span> git@github.com
</code></pre></div></div> <p>When executing this command, GitHub will return a message confirming the connection is successful, for example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hi &lt;github_account_name&gt;! You've successfully authenticated, but GitHub does not provide shell access.
</code></pre></div></div> <p>This information indicates that the SSH connection has been successfully established, and you can perform code push and pull operations with GitHub on the server.</p> <h3 id="6-common-issues-and-solutions">6. Common Issues and Solutions</h3> <ol> <li> <p><strong>SSH Key Permission Issues</strong>: Ensure that the permissions of the SSH key pair files are correct to prevent connection problems. Check and set the permissions of the key:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod </span>600 ~/.ssh/id_rsa
<span class="nb">chmod </span>644 ~/.ssh/id_rsa.pub
</code></pre></div> </div> </li> <li> <p><strong>Add Key to SSH Agent</strong> (Recommended): If the key is not automatically loaded after the server starts, you can add it to the SSH Agent so that it is automatically loaded after each restart:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">eval</span> <span class="s2">"</span><span class="si">$(</span>ssh-agent <span class="nt">-s</span><span class="si">)</span><span class="s2">"</span>
ssh-add ~/.ssh/id_rsa
</code></pre></div> </div> </li> </ol> <hr/> <h2 id="python-environment-configuration-and-management">Python Environment Configuration and Management</h2> <hr/> <h3 id="miniforge">Miniforge</h3> <p>For managing Python Scientific environments on the server, I chose lightweight and efficient Miniforge as the package management tool, replacing Anaconda. Miniforge defaults to the conda-forge channel and integrates Mamba, providing a faster solution for package management. Below are the steps to install and configure Miniforge and create and delete environments.</p> <h4 id="1-install-miniforge">1. Install Miniforge</h4> <p>First, follow the installation instructions in the <code class="language-plaintext highlighter-rouge">Miniforge</code> <a href="https://github.com/conda-forge/miniforge">GitHub project page</a> to download and install. The following are the core installation commands:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="s2">"https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-</span><span class="si">$(</span><span class="nb">uname</span><span class="si">)</span><span class="s2">-</span><span class="si">$(</span><span class="nb">uname</span> <span class="nt">-m</span><span class="si">)</span><span class="s2">.sh"</span>
bash Miniforge3-<span class="si">$(</span><span class="nb">uname</span><span class="si">)</span>-<span class="si">$(</span><span class="nb">uname</span> <span class="nt">-m</span><span class="si">)</span>.sh
</code></pre></div></div> <ul> <li> <p>Configuration Suggestions:</p> <ul> <li>It is recommended to install Miniforge in <code class="language-plaintext highlighter-rouge">/usr/local/miniforge3</code>, so that multiple users can share the environment, but only the root user can modify it. During the installation process, you can choose the installation directory, and the system will automatically create the required folders.</li> <li> <p>If you are using ZSH, you should confirm that the Miniforge path is added to the <code class="language-plaintext highlighter-rouge">.zshrc</code> file.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$usr</span><span class="s2">/local/miniforge3/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
</code></pre></div> </div> </li> <li>Reload the <code class="language-plaintext highlighter-rouge">.zshrc</code> configuration: <code class="language-plaintext highlighter-rouge">source ~/.zshrc</code></li> </ul> </li> </ul> <h4 id="2-initialize-mamba-environment">2. Initialize Mamba Environment</h4> <p>After the installation is complete, initialize Mamba so that the command can be used in the terminal. Assuming Miniforge is installed in <code class="language-plaintext highlighter-rouge">/usr/local/miniforge3</code>, execute the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/local/miniforge3/bin/mamba init
</code></pre></div></div> <p>This command will initialize the environment variables, and you need to restart the terminal to apply the changes.</p> <p>If it does not work with ZSH, you can copy the <code class="language-plaintext highlighter-rouge">mamba</code> configuration from <code class="language-plaintext highlighter-rouge">.bashrc</code> to <code class="language-plaintext highlighter-rouge">.zshrc</code>, or configure it in other ways.</p> <h4 id="3-create-and-manage-environments">3. Create and Manage Environments</h4> <p>In a multi-user server environment, it is recommended to create and manage environments with root privileges (switched via <code class="language-plaintext highlighter-rouge">sudo su</code>). This approach avoids ordinary users from accidentally or uncontrollably changing the environment configuration.</p> <h5 id="create-a-new-environment">Create a New Environment</h5> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a new environment with the specified name</span>
mamba create <span class="nt">--name</span> &lt;new_env_name&gt; <span class="nv">python</span><span class="o">=</span>3.11 <span class="nt">--no-default-packages</span>
</code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">--name &lt;new_env_name&gt;</code>: Name the new environment.</li> <li><code class="language-plaintext highlighter-rouge">python=3.11</code>: Set the Python version to 3.11.</li> <li><code class="language-plaintext highlighter-rouge">--no-default-packages</code>: Only install Python, do not automatically install other packages.</li> <li>Ordinary users can create private environments in their home directories (for example, <code class="language-plaintext highlighter-rouge">/home/username/myenv</code>), execute the following command:</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mamba create <span class="nt">--prefix</span> /home/username/myenv <span class="nv">python</span><span class="o">=</span>3.11 <span class="nt">--no-default-packages</span>
</code></pre></div></div> <h5 id="delete-environment">Delete Environment</h5> <p>To delete an environment (including all associated packages), you can use the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Delete by environment name</span>
mamba remove <span class="nt">--name</span> &lt;env_name&gt; <span class="nt">--all</span>
<span class="c"># Delete by path</span>
mamba remove <span class="nt">--prefix</span> /path/to/directory <span class="nt">--all</span>
</code></pre></div></div> <h4 id="4-install-common-packages">4. Install Common Packages</h4> <p>It is usually recommended not to directly modify the <code class="language-plaintext highlighter-rouge">base</code> environment, but to create a dedicated environment according to actual needs. For example, you may need to install <code class="language-plaintext highlighter-rouge">JupyterHub</code>, which provides Jupyter notebook services for multiple users.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create Machine Learning environment</span>
mamba create <span class="nt">--name</span> ml_env <span class="nv">python</span><span class="o">=</span>3.12 jupyterhub jupyterlab notebook notebook scipy numpy numpy
<span class="c"># Activate environment</span>
mamba activate ml_env
<span class="c"># Download other packages</span>
mamba <span class="nb">install </span>jupyter-lsp-python jupyterlab-lsp jupyterlab-git jupyterlab_execute_time
</code></pre></div></div> <h4 id="5-prevent-unauthorized-updates">5. Prevent Unauthorized Updates</h4> <p>In a multi-user environment, restricting ordinary users from modifying system-level environments helps maintain the stability of the environment. If a user tries to update the environment, they will encounter an insufficient permissions error. An example is as follows:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mamba update <span class="nt">--all</span>
</code></pre></div></div> <p>Error message:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>EnvironmentNotWritableError: The current user does not have write permissions to the target environment.
  environment location: /usr/local/miniforge3
  uid: 1000
  gid: 1000
</code></pre></div></div> <p>This design ensures the security and consistency of the environment and avoids update failures due to permission issues.</p> <p>If you need to temporarily give permissions to update the <code class="language-plaintext highlighter-rouge">base</code> environment, you can use the <code class="language-plaintext highlighter-rouge">sudo</code> command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> /usr/local/miniforge3/bin/mamba update <span class="nt">--all</span>
</code></pre></div></div> <hr/> <h3 id="poetry">Poetry</h3> <p>Poetry is an efficient and convenient Python project dependency management tool, suitable for quickly creating and managing virtual environments, installing dependency libraries, and publishing Python packages.</p> <h4 id="1-install-poetry">1. Install Poetry</h4> <p>Before installing Poetry, you should ensure that Python 3.7 or above is installed.</p> <ol> <li> <p>Use the official installation script:</p> <p>The Poetry installation script can automatically install Poetry in the <code class="language-plaintext highlighter-rouge">$HOME/.local/bin</code> directory. Run the following command to download and execute the installation script:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-sSL</span> https://install.python-poetry.org | python3 -
</code></pre></div> </div> </li> <li> <p>Add Poetry to PATH:</p> <p>By default, after the installation is complete, you need to add Poetry to the environment variables. If a <code class="language-plaintext highlighter-rouge">command not found</code> error occurs, you can add it to the environment variables of the current session using the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.local/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
</code></pre></div> </div> </li> <li> <p>Verify the installation:</p> <p>After the installation is complete, you can check the installation version through the following command to confirm whether the installation is successful:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nt">--version</span>
</code></pre></div> </div> </li> </ol> <h4 id="2-create-a-new-project">2. Create a New Project</h4> <p>Poetry provides simplified commands to quickly generate the basic structure of a new project.</p> <ol> <li> <p>Create a new project:</p> <p>Use the following command to create a new project directory (for example, <code class="language-plaintext highlighter-rouge">my_project</code>) and generate the default <code class="language-plaintext highlighter-rouge">pyproject.toml</code> file.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry new my_project
</code></pre></div> </div> <p>This command will generate the following structure in the project directory:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>my_project/
├── my_project/
│   └── __init__.py
├── pyproject.toml
└── tests/
    └── __init__.py
</code></pre></div> </div> </li> <li> <p>Initialize an existing project (optional):</p> <p>If a project already exists and you want to use Poetry for management, you can initialize the project through <code class="language-plaintext highlighter-rouge">poetry init</code>. This command will guide the generation of the <code class="language-plaintext highlighter-rouge">pyproject.toml</code> file and configure initial dependencies:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>existing_project
poetry init
</code></pre></div> </div> </li> </ol> <h4 id="3-manage-project-dependencies">3. Manage Project Dependencies</h4> <p>Poetry provides a convenient dependency management method, distinguishing between production dependencies and development dependencies.</p> <ol> <li> <p><strong>Add production dependencies</strong>:</p> <p>Add dependencies to the production environment, such as the <code class="language-plaintext highlighter-rouge">requests</code> library:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry add requests
</code></pre></div> </div> </li> <li> <p><strong>Add development dependencies</strong>:</p> <p>If some libraries are only used for development and testing environments, you can use the <code class="language-plaintext highlighter-rouge">--dev</code> parameter. This parameter adds the dependency to the <code class="language-plaintext highlighter-rouge">[tool.poetry.dev-dependencies]</code> section. For example, add <code class="language-plaintext highlighter-rouge">pytest</code> as a development dependency:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry add pytest <span class="nt">--dev</span>
</code></pre></div> </div> </li> <li> <p><strong>Install all dependencies</strong>:</p> <p>After the project dependencies are written to the <code class="language-plaintext highlighter-rouge">pyproject.toml</code> file, you can use the following command to install all dependencies:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">install</span>
</code></pre></div> </div> <p><code class="language-plaintext highlighter-rouge">poetry install</code> will automatically create a virtual environment and install the required dependencies in the virtual environment. If the <code class="language-plaintext highlighter-rouge">poetry.lock</code> file already exists, it will ensure that the installed dependency version is consistent with the version in the lock file to ensure environment consistency.</p> </li> </ol> <hr/> <h4 id="4-manage-virtual-environments">4. Manage Virtual Environments</h4> <p>Poetry creates virtual environments outside the project directory and automatically activates and uses the virtual environment.</p> <ol> <li> <p><strong>Activate the virtual environment</strong>:</p> <p>You can activate the virtual environment created by Poetry through the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry shell
</code></pre></div> </div> </li> <li> <p><strong>Exit the virtual environment</strong>:</p> <p>After finishing work in the virtual environment, enter <code class="language-plaintext highlighter-rouge">exit</code> to exit.</p> </li> <li> <p><strong>View the virtual environment path</strong>:</p> <p>If you need to view the actual storage path of the virtual environment, you can use:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">env </span>info <span class="nt">--path</span>
</code></pre></div> </div> </li> <li> <p><strong>Delete the virtual environment</strong> (optional):</p> <p>If you need to recreate the virtual environment or clean up the environment, you can delete the virtual environment:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">env </span>remove python
</code></pre></div> </div> </li> </ol> <h4 id="5-manage-dependency-lock-files">5. Manage Dependency Lock Files</h4> <p>Poetry uses the <code class="language-plaintext highlighter-rouge">poetry.lock</code> file to lock the exact version of the dependency to ensure consistency across environments.</p> <ol> <li> <p><strong>Update dependency version</strong>:</p> <p>When you need to update the dependency version, you can use the following command to re-parse the dependencies and update the lock file:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry update
</code></pre></div> </div> </li> <li> <p><strong>Install the specified lock version</strong>:</p> <p>In collaborative projects, team members can install the exact dependency version of the project based on the <code class="language-plaintext highlighter-rouge">poetry.lock</code> file:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">install</span>
</code></pre></div> </div> </li> </ol> <h4 id="6-run-scripts-and-commands">6. Run Scripts and Commands</h4> <p>Poetry supports running scripts or commands directly in the virtual environment, simplifying command management.</p> <ol> <li> <p><strong>Run project script</strong>:</p> <p>Use <code class="language-plaintext highlighter-rouge">poetry run</code> to execute commands in the virtual environment. For example, execute a Python script:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python script.py
</code></pre></div> </div> </li> <li> <p><strong>Run unit tests directly</strong>:</p> <p>You can directly run test commands in the virtual environment, such as <code class="language-plaintext highlighter-rouge">pytest</code>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run pytest
</code></pre></div> </div> </li> </ol> <h4 id="7-publish-python-packages">7. Publish Python Packages</h4> <p>Poetry can publish projects to <a href="https://pypi.org/">PyPI</a> or other custom package repositories.</p> <ol> <li> <p><strong>Build the project</strong>:</p> <p>Poetry provides a one-click function to build the project, package the project into <code class="language-plaintext highlighter-rouge">.whl</code> and <code class="language-plaintext highlighter-rouge">.tar.gz</code> files, and prepare for publishing:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry build
</code></pre></div> </div> </li> <li> <p><strong>Publish to PyPI</strong>:</p> <p>To publish the package to PyPI, you need to configure PyPI credentials in the <code class="language-plaintext highlighter-rouge">~/.pypirc</code> file, or use Poetry’s <code class="language-plaintext highlighter-rouge">publish</code> command to enter interactively:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry publish <span class="nt">--build</span>
</code></pre></div> </div> <blockquote> <p><strong>Note</strong>: To verify the publishing process in the test environment, you can use the <code class="language-plaintext highlighter-rouge">--repository</code> parameter to publish to the PyPI test repository.</p> </blockquote> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry publish <span class="nt">--repository</span> testpypi
</code></pre></div> </div> </li> </ol> <hr/> <p>The following is a configuration guide for using the R environment in the field of econometrics, including the installation of R and RStudio, commonly used R package configurations, etc.</p> <hr/> <h2 id="configuring-r-environment-on-ubuntu-for-econometric-analysis">Configuring R Environment on Ubuntu for Econometric Analysis</h2> <p>In the field of econometrics, R is suitable for processing economic data, performing regression analysis, time series analysis, and other tasks.</p> <h3 id="1-install-r">1. Install R</h3> <p>Ubuntu’s default software repository contains R, but it may not be the latest version. To get the latest version of R, you can use the CRAN repository.</p> <ol> <li> <p><strong>Add CRAN repository</strong>:</p> <p>Update the package list and install the necessary dependencies:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common dirmngr <span class="nt">-y</span>
</code></pre></div> </div> </li> <li> <p><strong>Add GPG key for R project</strong>:</p> <p>Download and add CRAN’s GPG public key to ensure the integrity of the package:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">-qO-</span> https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | <span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc
</code></pre></div> </div> </li> <li> <p><strong>Verify GPG key</strong> (optional):</p> <p>Verify the fingerprint of the key (<code class="language-plaintext highlighter-rouge">E298A3A825C0D65DFD57CBB651716619E084DAB9</code>):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg <span class="nt">--show-keys</span> /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc
</code></pre></div> </div> </li> <li> <p><strong>Add CRAN repository to source list</strong>:</p> <p>Add the CRAN repository to the apt source list to ensure you get the latest version of R:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>add-apt-repository <span class="s2">"deb https://cloud.r-project.org/bin/linux/ubuntu </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2">-cran40/"</span>
</code></pre></div> </div> </li> <li> <p><strong>Install R and development packages</strong>:</p> <p>Install the latest version of R and development libraries:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>r-base r-base-dev <span class="nt">-y</span>
</code></pre></div> </div> </li> </ol> <h3 id="2-install-rstudio">2. Install RStudio</h3> <p>RStudio is a powerful IDE suitable for data analysis and visualization. The installation process of RStudio is simple. For specific installation steps, please refer to <a href="https://posit.co/download/rstudio-server/">RStudio official installation guide</a>.</p> <p><strong>Installation steps</strong>:</p> <ol> <li>Download the latest version of RStudio Server.</li> <li> <p>Use the <code class="language-plaintext highlighter-rouge">dpkg</code> command to install:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>dpkg <span class="nt">-i</span> rstudio-server-&lt;version&gt;.deb
</code></pre></div> </div> </li> <li> <p>Check the installation status:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status rstudio-server
</code></pre></div> </div> </li> </ol> <p>After RStudio Server is successfully installed, you can access it in your browser via <code class="language-plaintext highlighter-rouge">http://&lt;your-server-ip&gt;:8787</code>.</p> <h3 id="3-install-econometrics-related-r-packages">3. Install Econometrics-Related R Packages</h3> <p>Econometric analysis usually requires specialized data processing, regression analysis, and time series analysis packages.</p> <ol> <li> <p><strong>Install system dependencies</strong>:</p> <p>Install system-level development packages to ensure smooth installation of R packages (especially for some packages that need to be compiled, such as <code class="language-plaintext highlighter-rouge">tidyverse</code> and <code class="language-plaintext highlighter-rouge">data.table</code>):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential libssl-dev libcurl4-openssl-dev libxml2-dev
</code></pre></div> </div> </li> <li> <p><strong>Install econometrics and data processing packages</strong>:</p> <p>Start the R console and install commonly used econometrics packages:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>R
</code></pre></div> </div> <p>Execute the following commands in the R console:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">chooseCRANmirror</span><span class="p">(</span><span class="n">graphics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"tidyverse"</span><span class="p">,</span><span class="w"> </span><span class="s2">"data.table"</span><span class="p">,</span><span class="w"> </span><span class="s2">"broom"</span><span class="p">,</span><span class="w"> </span><span class="s2">"plm"</span><span class="p">,</span><span class="w"> </span><span class="s2">"forecast"</span><span class="p">,</span><span class="w"> </span><span class="s2">"lmtest"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sandwich"</span><span class="p">,</span><span class="w"> </span><span class="s2">"stargazer"</span><span class="p">))</span><span class="w">
</span></code></pre></div> </div> <ul> <li><code class="language-plaintext highlighter-rouge">tidyverse</code>: Includes data processing and visualization packages such as <code class="language-plaintext highlighter-rouge">dplyr</code>, <code class="language-plaintext highlighter-rouge">ggplot2</code>, and <code class="language-plaintext highlighter-rouge">tidyr</code>.</li> <li><code class="language-plaintext highlighter-rouge">data.table</code>: Used for fast data processing.</li> <li><code class="language-plaintext highlighter-rouge">broom</code>: Organize regression analysis results into easy-to-analyze tables.</li> <li><code class="language-plaintext highlighter-rouge">plm</code>: Used for panel data regression analysis.</li> <li><code class="language-plaintext highlighter-rouge">forecast</code>: Used for time series forecasting and analysis.</li> <li><code class="language-plaintext highlighter-rouge">lmtest</code> and <code class="language-plaintext highlighter-rouge">sandwich</code>: Provide econometric test tools and robust standard errors.</li> <li><code class="language-plaintext highlighter-rouge">stargazer</code>: Used to output regression results into easy-to-understand tables, suitable for papers or reports.</li> </ul> </li> <li> <p><strong>Install advanced econometrics tools</strong>:</p> <ul> <li><code class="language-plaintext highlighter-rouge">AER</code> (Applied Econometrics with R): Contains commonly used functions and data sets for economic research.</li> <li><code class="language-plaintext highlighter-rouge">urca</code>: Provides unit root and cointegration tests.</li> <li><code class="language-plaintext highlighter-rouge">vars</code>: Used for vector autoregressive (VAR) analysis.</li> </ul> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"AER"</span><span class="p">,</span><span class="w"> </span><span class="s2">"urca"</span><span class="p">,</span><span class="w"> </span><span class="s2">"vars"</span><span class="p">))</span><span class="w">
</span></code></pre></div> </div> </li> <li> <p><strong>Install financial time series analysis packages</strong> (optional):</p> <ul> <li><code class="language-plaintext highlighter-rouge">quantmod</code> and <code class="language-plaintext highlighter-rouge">TTR</code>: Used for financial market data analysis and technical indicator calculation.</li> <li><code class="language-plaintext highlighter-rouge">zoo</code> and <code class="language-plaintext highlighter-rouge">xts</code>: Process irregular time series data.</li> </ul> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"quantmod"</span><span class="p">,</span><span class="w"> </span><span class="s2">"TTR"</span><span class="p">,</span><span class="w"> </span><span class="s2">"zoo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"xts"</span><span class="p">))</span><span class="w">
</span></code></pre></div> </div> </li> </ol> <h3 id="4-install-private-packages-using-github-token">4. Install Private Packages Using GitHub Token</h3> <p>If you need to install some experimental or custom packages from GitHub, it is recommended to use a GitHub token to avoid API rate limits.</p> <p><strong>Generate GitHub token</strong>:</p> <ol> <li> <p>Generate a token in the R console:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">usethis</span><span class="o">::</span><span class="n">create_github_token</span><span class="p">()</span><span class="w">
</span></code></pre></div> </div> </li> <li> <p>Generate a new Personal Access Token on the GitHub website (path: <code class="language-plaintext highlighter-rouge">Settings</code> → <code class="language-plaintext highlighter-rouge">Developer settings</code> → <code class="language-plaintext highlighter-rouge">Personal access token</code> → <code class="language-plaintext highlighter-rouge">Tokens (classic)</code>).</p> </li> <li> <p><strong>Configure GitHub token</strong>:</p> <p>Add the generated token to the R environment:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gitcreds</span><span class="o">::</span><span class="n">gitcreds_set</span><span class="p">()</span><span class="w">
</span></code></pre></div> </div> </li> </ol> <p>Under this setting, you can safely install private packages from GitHub and avoid API restrictions.</p> <h3 id="5-example-install-and-use-the-plm-package-for-panel-data-regression">5. Example: Install and Use the <code class="language-plaintext highlighter-rouge">plm</code> Package for Panel Data Regression</h3> <p>Assuming you want to use panel data for regression analysis, here is an example of how to install <code class="language-plaintext highlighter-rouge">plm</code> and execute a fixed effects model:</p> <ol> <li> <p><strong>Install <code class="language-plaintext highlighter-rouge">plm</code></strong> (if not installed):</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"plm"</span><span class="p">)</span><span class="w">
</span></code></pre></div> </div> </li> <li> <p><strong>Load and use <code class="language-plaintext highlighter-rouge">plm</code></strong>:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">plm</span><span class="p">)</span><span class="w">

</span><span class="c1"># Create sample panel data set</span><span class="w">
</span><span class="n">data</span><span class="p">(</span><span class="s2">"Produc"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"plm"</span><span class="p">)</span><span class="w">
</span><span class="n">pdata</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pdata.frame</span><span class="p">(</span><span class="n">Produc</span><span class="p">,</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"state"</span><span class="p">,</span><span class="w"> </span><span class="s2">"year"</span><span class="p">))</span><span class="w">

</span><span class="c1"># Fixed effects model regression</span><span class="w">
</span><span class="n">fe_model</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plm</span><span class="p">(</span><span class="nf">log</span><span class="p">(</span><span class="n">gsp</span><span class="p">)</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">pcap</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">hwy</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">water</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">util</span><span class="p">),</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pdata</span><span class="p">,</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"within"</span><span class="p">)</span><span class="w">
</span><span class="n">summary</span><span class="p">(</span><span class="n">fe_model</span><span class="p">)</span><span class="w">
</span></code></pre></div> </div> <p>The following is a guide to organize and optimize to help synchronize data, install fonts, and deal with Nvidia drivers and library-related issues more effectively.</p> </li> </ol> <hr/> <h2 id="other-issues">Other issues</h2> <hr/> <h3 id="1-synchronize-data">1. Synchronize data</h3> <p>To synchronize local data to a remote server, it is recommended to use <code class="language-plaintext highlighter-rouge">rsync</code>, which is an efficient and reliable synchronization method. More details should be referred to <a href="https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories">this tutorial</a>.</p> <ul> <li> <p><strong>Synchronization command</strong>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rsync <span class="nt">-r</span> /path/to/sync/ &lt;username&gt;@&lt;remote_host&gt;:&lt;destination_directory&gt;
</code></pre></div> </div> <p>The above command will “push” all the contents of the local directory <code class="language-plaintext highlighter-rouge">/path/to/sync/</code> to the <code class="language-plaintext highlighter-rouge">&lt;destination_directory&gt;</code> of the remote server.</p> </li> <li> <p><strong>Monitor the transmission progress of large files</strong>:</p> <p>If you are synchronizing large files, you can use the <code class="language-plaintext highlighter-rouge">watch</code> command to monitor the synchronization progress:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>watch <span class="nt">-n</span> &lt;time_interval&gt; <span class="nb">du</span> <span class="nt">-sh</span> /path/to/large/file
</code></pre></div> </div> <p>This command will refresh the file size change every <code class="language-plaintext highlighter-rouge">&lt;time_interval&gt;</code> seconds.</p> </li> </ul> <hr/> <h3 id="2-install-common-fonts">2. Install common fonts</h3> <p>The Linux system does not come with some common fonts in Windows by default (such as <code class="language-plaintext highlighter-rouge">Arial</code> and <code class="language-plaintext highlighter-rouge">Times New Roman</code>). Installing these fonts can improve the display effect of documents and websites, especially those that rely on these fonts for graphic output. Install the Microsoft TrueType core font package and refresh the cache:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>msttcorefonts
<span class="nb">rm</span> <span class="nt">-rf</span> ~/.cache/matplotlib
</code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">msttcorefonts</code> includes a variety of Microsoft fonts, such as Arial and Times New Roman.</li> <li>The second command deletes the <code class="language-plaintext highlighter-rouge">matplotlib</code> cache directory to ensure that the updated fonts are loaded correctly.</li> </ul> <hr/> <h3 id="3-driverlibrary-version-mismatch">3. Driver/library version mismatch</h3> <p>When running <code class="language-plaintext highlighter-rouge">nvidia-smi</code>, if the following error occurs:</p> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Failed to initialize NVML: Driver/library version mismatch
</code></pre></div></div> <p>You can refer to <a href="https://stackoverflow.com/questions/43022843/nvidia-nvml-driver-library-version-mismatch/45319156#45319156">the solution on Stack Overflow</a>. The brief steps are as follows:</p> <ol> <li> <p><strong>Restart the server</strong>: In some cases, restarting the server can solve the problem:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>reboot
</code></pre></div> </div> </li> <li> <p><strong>Uninstall and reinstall Nvidia driver</strong>:</p> <p>If restarting is invalid, try the following command to clear the existing Nvidia driver and reinstall it:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt purge nvidia<span class="k">*</span> libnvidia<span class="k">*</span>
<span class="nb">sudo </span>ubuntu-drivers <span class="nb">install
sudo </span>reboot
</code></pre></div> </div> </li> </ol> <hr/> <h3 id="4-upgrade-nvidia-driver">4. Upgrade Nvidia driver</h3> <p>To upgrade the Nvidia driver, you can follow these steps:</p> <ol> <li> <p><strong>Uninstall the old driver</strong>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt purge <span class="k">*</span>nvidia<span class="k">*</span> <span class="nt">-y</span>
<span class="nb">sudo </span>apt remove <span class="k">*</span>nvidia<span class="k">*</span> <span class="nt">-y</span>
<span class="nb">sudo rm</span> /etc/apt/sources.list.d/cuda<span class="k">*</span>
<span class="nb">sudo </span>apt autoremove <span class="nt">-y</span> <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt autoclean <span class="nt">-y</span>
<span class="nb">sudo rm</span> <span class="nt">-rf</span> /usr/local/cuda<span class="k">*</span>
</code></pre></div> </div> </li> <li> <p><strong>Find and install the recommended driver</strong>:</p> <p>Run the following command to find the recommended Nvidia driver version:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ubuntu-drivers devices
</code></pre></div> </div> <p>Or install the specified version through the following command (for example, <code class="language-plaintext highlighter-rouge">550</code>, adjust the version number according to system requirements):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>libnvidia-common-550-server libnvidia-gl-550-server nvidia-driver-550-server <span class="nt">-y</span>
</code></pre></div> </div> </li> <li> <p><strong>Restart and check</strong>:</p> <p>Restart the server and use <code class="language-plaintext highlighter-rouge">nvidia-smi</code> to check whether the new driver is running normally:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>reboot now
</code></pre></div> </div> <p>If <code class="language-plaintext highlighter-rouge">nvidia-smi</code> returns the following error:</p> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver.
</code></pre></div> </div> <p>Try reinstalling the kernel header files and restarting.</p> </li> </ol> <hr/> <h3 id="5-kernel-header-file-installation-and-gcc-configuration">5. Kernel header file installation and GCC configuration</h3> <p>If you encounter kernel header file or GCC version problems, follow these steps:</p> <ol> <li> <p><strong>Reinstall the kernel header file</strong>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">--reinstall</span> linux-headers-<span class="si">$(</span><span class="nb">uname</span> <span class="nt">-r</span><span class="si">)</span>
<span class="nb">sudo </span>reboot
</code></pre></div> </div> </li> <li> <p><strong>Update GCC version</strong>:</p> <p>If you encounter a GCC error during the kernel header file installation process, you can upgrade to <code class="language-plaintext highlighter-rouge">gcc-12</code>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>gcc-12
<span class="nb">sudo </span>update-alternatives <span class="nt">--install</span> /usr/bin/gcc gcc /usr/bin/gcc-12 12
</code></pre></div> </div> <p>After reinstalling the kernel header file and restarting the server, <code class="language-plaintext highlighter-rouge">nvidia-smi</code> should be able to work normally.</p> </li> </ol> <footer lang="en" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> This page was automatically translated by generative AI and may contain inaccuracies or incomplete information. <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">Feedback is welcome</a> to help us improve. </p> </footer>]]></content><author><name></name></author><category term="Productivity"/><category term="Ubuntu"/><category term="Productivity"/><category term="Deployment"/><category term="Server"/><summary type="html"><![CDATA[How to deploy a Linux server]]></summary></entry><entry><title type="html">Efficient Path Management Paradigms in Python Projects</title><link href="https://waynexucn.github.io//blog/2024/Python%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E8%B7%AF%E5%BE%84%E7%9A%84%E8%8C%83%E5%BC%8F/" rel="alternate" type="text/html" title="Efficient Path Management Paradigms in Python Projects"/><published>2024-07-15T22:18:35+00:00</published><updated>2024-07-15T22:18:35+00:00</updated><id>https://waynexucn.github.io//blog/2024/Python%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E8%B7%AF%E5%BE%84%E7%9A%84%E8%8C%83%E5%BC%8F</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/Python%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E8%B7%AF%E5%BE%84%E7%9A%84%E8%8C%83%E5%BC%8F/"><![CDATA[<h1 id="efficient-path-management-paradigms-in-python-projects">Efficient Path Management Paradigms in Python Projects</h1> <p>In Python projects, code often needs to read data files, configuration files, or output log files. If you use hardcoded paths or frequently concatenate relative paths, the code becomes verbose and prone to errors that may cause the program to crash. To solve these issues, here is a set of standardized path management methods that can improve code readability, maintainability, and cross-platform compatibility.</p> <h2 id="four-methods-for-path-management">Four Methods for Path Management</h2> <h3 id="1-set-the-project-root-directory">1. Set the Project Root Directory</h3> <p>Use the project root directory as the base for path management, so all other paths are derived from this base instead of relying on each file’s relative path. You can dynamically determine the project root directory, for example:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Locate the project root (e.g., from paths.py) by stacking multiple parent directories
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">__file__</span><span class="p">).</span><span class="nf">resolve</span><span class="p">().</span><span class="n">parent</span><span class="p">.</span><span class="n">parent</span>
</code></pre></div></div> <h4 id="advantages">Advantages</h4> <ul> <li>Does not rely on environment variables, adapts to different development environments.</li> <li>Path management starts from a unified base, making the logic clear.</li> </ul> <hr/> <h3 id="2-configure-the-project-root-directory-using-environment-variables">2. Configure the Project Root Directory Using Environment Variables</h3> <p>Set the project root directory via environment variables (such as <code class="language-plaintext highlighter-rouge">PYTHONPATH</code>), and calculate all paths based on this variable.</p> <ol> <li> <p>Add the project root directory to your environment variables.</p> <ul> <li> <p><strong>Linux/MacOS</strong>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PYTHONPATH</span><span class="o">=</span>/path/to/your/project
</code></pre></div> </div> </li> <li> <p><strong>Windows</strong>:</p> <div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">set</span><span class="w"> </span><span class="nx">PYTHONPATH</span><span class="o">=</span><span class="n">C:\path\to\your\project</span><span class="w">
</span></code></pre></div> </div> </li> </ul> </li> <li> <p>Read the environment variable in your code:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="c1"># Get the project root from the environment variable
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="sh">"</span><span class="s">PYTHONPATH</span><span class="sh">"</span><span class="p">])</span>
</code></pre></div> </div> </li> </ol> <h4 id="advantages-1">Advantages</h4> <ul> <li>Decouples code from the file system structure, making path management more flexible.</li> <li>Especially suitable for deployment across different environments (development/production).</li> </ul> <hr/> <h3 id="3-centralized-path-management-recommended">3. Centralized Path Management (Recommended)</h3> <p>Create a dedicated path management module to define all important paths in the project. For example, define common paths in <code class="language-plaintext highlighter-rouge">config/paths.py</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Project root directory
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">__file__</span><span class="p">).</span><span class="nf">resolve</span><span class="p">().</span><span class="n">parent</span><span class="p">.</span><span class="n">parent</span>

<span class="c1"># Data folders
</span><span class="n">DATA_RAW</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">raw</span><span class="sh">"</span>
<span class="n">DATA_PROCESSED</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">processed</span><span class="sh">"</span>

<span class="c1"># Log folder
</span><span class="n">LOGS</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">logs</span><span class="sh">"</span>

<span class="c1"># Results folder
</span><span class="n">RESULTS</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">results</span><span class="sh">"</span>
</code></pre></div></div> <p>Use in other modules:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">config.paths</span> <span class="kn">import</span> <span class="n">DATA_RAW</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="n">DATA_RAW</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data.txt</span><span class="sh">"</span>
<span class="k">with</span> <span class="n">file_path</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div></div> <h4 id="advantages-2">Advantages</h4> <ul> <li>Centralized path definitions; when modifying the directory structure, you don’t need to adjust code everywhere.</li> <li>Improves code readability and modularity.</li> </ul> <hr/> <h3 id="4-use-dynamic-path-management-tools">4. Use Dynamic Path Management Tools</h3> <p>Leverage Python’s standard library or third-party tools (such as <code class="language-plaintext highlighter-rouge">importlib.resources</code>) to dynamically manage file paths within the project, especially for reading static resource files.</p> <ul> <li> <p><strong><code class="language-plaintext highlighter-rouge">importlib.resources</code></strong> (Python 3.9+):</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">importlib.resources</span> <span class="kn">import</span> <span class="n">files</span>

<span class="c1"># Get file path
</span><span class="n">file_path</span> <span class="o">=</span> <span class="nf">files</span><span class="p">(</span><span class="sh">"</span><span class="s">data.raw</span><span class="sh">"</span><span class="p">)</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data.txt</span><span class="sh">"</span>

<span class="c1"># Read file
</span><span class="k">with</span> <span class="n">file_path</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div> </div> </li> <li> <p><strong><code class="language-plaintext highlighter-rouge">pkg_resources</code></strong> (traditional method):</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">pkg_resources</span> <span class="kn">import</span> <span class="n">resource_filename</span>

<span class="c1"># Get file path
</span><span class="n">file_path</span> <span class="o">=</span> <span class="nf">resource_filename</span><span class="p">(</span><span class="sh">"</span><span class="s">data.raw</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">data.txt</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># Read file
</span><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div> </div> </li> </ul> <h4 id="advantages-3">Advantages</h4> <ul> <li>File paths are computed dynamically, supporting packaging and distribution.</li> <li>Avoids hardcoding paths, enhancing code portability.</li> </ul> <hr/> <h2 id="advanced-practice-managing-environment-variables-with-env-files">Advanced Practice: Managing Environment Variables with <code class="language-plaintext highlighter-rouge">.env</code> Files</h2> <p>Centralize path configuration in a <code class="language-plaintext highlighter-rouge">.env</code> file and use the <code class="language-plaintext highlighter-rouge">dotenv</code> library to load these settings in your code.</p> <h4 id="example">Example</h4> <ol> <li> <p><strong>Create a <code class="language-plaintext highlighter-rouge">.env</code> file</strong>:</p> <div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">PROJECT_ROOT</span><span class="p">=</span><span class="s">/path/to/your/project</span>
</code></pre></div> </div> </li> <li> <p><strong>Load the <code class="language-plaintext highlighter-rouge">.env</code> file in your code</strong>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span><span class="p">,</span> <span class="n">find_dotenv</span>
<span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="n">os</span>

<span class="c1"># Automatically find the .env file in the project root
# find_dotenv() searches upwards from the current working directory until it finds a .env file.
# Just make sure the .env file is in the project root, and the code will locate it automatically.
</span><span class="n">dotenv_path</span> <span class="o">=</span> <span class="nf">find_dotenv</span><span class="p">()</span>
<span class="nf">load_dotenv</span><span class="p">(</span><span class="n">dotenv_path</span><span class="p">)</span>

<span class="c1"># Get the project root from the environment variable
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">"</span><span class="s">PROJECT_ROOT</span><span class="sh">"</span><span class="p">))</span>

<span class="c1"># Join subdirectories
</span><span class="n">DATA_RAW</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">raw</span><span class="sh">"</span>
</code></pre></div> </div> </li> </ol> <h4 id="advantages-4">Advantages</h4> <ul> <li><code class="language-plaintext highlighter-rouge">.env</code> files are convenient for version control and cross-environment configuration.</li> <li>Avoids hardcoding paths in code.</li> </ul> <h2 id="other-tips">Other Tips</h2> <ol> <li> <p>To unify slashes in paths, use the <code class="language-plaintext highlighter-rouge">os.path.normpath</code> function to standardize the path separators according to the current operating system (backslash <code class="language-plaintext highlighter-rouge">\</code> on Windows, slash <code class="language-plaintext highlighter-rouge">/</code> on Linux/macOS).</p> </li> <li> <p>Use <code class="language-plaintext highlighter-rouge">os.path.relpath(file, root_path)</code> to extract the relative path of <code class="language-plaintext highlighter-rouge">file</code> with respect to the root directory <code class="language-plaintext highlighter-rouge">root_path</code>. <code class="language-plaintext highlighter-rouge">file</code> should be the full path containing <code class="language-plaintext highlighter-rouge">root_path</code>.</p> </li> <li> <p>Ensure the target directory exists with <code class="language-plaintext highlighter-rouge">os.makedirs(path, exist_ok=True)</code>; it will be created if it does not exist.</p> </li> </ol> <footer lang="en" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> This page was automatically translated by generative AI and may contain inaccuracies or incomplete information. <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">Feedback is welcome</a> to help us improve. </p> </footer>]]></content><author><name></name></author><category term="Code"/><category term="Python"/><category term="AdvancedTips"/><summary type="html"><![CDATA[Standardized methods for path management]]></summary></entry><entry><title type="html">Repost: Why Keep Blogging</title><link href="https://waynexucn.github.io//blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E5%9C%A8%E5%86%99%E5%8D%9A%E5%AE%A2/" rel="alternate" type="text/html" title="Repost: Why Keep Blogging"/><published>2024-07-14T12:44:14+00:00</published><updated>2024-07-14T12:44:14+00:00</updated><id>https://waynexucn.github.io//blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E5%9C%A8%E5%86%99%E5%8D%9A%E5%AE%A2</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E5%9C%A8%E5%86%99%E5%8D%9A%E5%AE%A2/"><![CDATA[<blockquote> <p>Adapted from <a href="http://nathanmarz.com/blog/you-should-blog-even-if-you-have-no-readers.html">You should blog even if you have no readers</a></p> </blockquote> <p>Spencer Fry wrote an excellent article on “Why Entrepreneurs Should Write.” I’d like to add that the benefits of writing go far beyond what you might expect—even if you have no readers (regardless of whether you’re an entrepreneur), it’s still worth having a blog.</p> <p>I currently have over 50 unfinished drafts. Some are just random ideas I jotted down, recording my process of self-debate. Most of these drafts may never be published, but each piece of writing has brought me unique value.</p> <h3 id="writing-makes-you-a-better-reader">Writing Makes You a Better Reader</h3> <p>Blogging has changed the way I read other people’s work.</p> <p>In the process of searching for suitable structures and ways to express myself, I’ve become more sensitive to what makes a good argument and what makes a weak one. I’ve also become better at spotting flaws in others’ reasoning.</p> <p>At the same time, when reading, I’m no longer easily misled by weak counterexamples that superficially refute an article. Almost every article has some counterexamples, often based on specific exceptions. Online commenters love to point these out. However, these exceptions often miss the main point of the article. By understanding the implicit context behind a piece, I get much more value from reading.</p> <p>I also pay more attention to the writing styles of great authors. I mentally note how good writers express their ideas. I’ve always enjoyed Paul Graham’s essays, but now I appreciate even more how he organizes his articles. He has a mesmerizing ability to draw readers into his world and get them to see things from his perspective. I’ve also learned a lot of good writing techniques from reading Bradford Cross’s blog; his articles are well-structured, and the short paragraphs make them very easy to read.</p> <h3 id="writing-makes-you-smarter">Writing Makes You Smarter</h3> <p>Writing exposes the gaps in your thinking. When you put your ideas down and look back at them, they’re far less convincing than they seemed in your head. Writing forces you to mature your arguments by thinking through possible objections.</p> <p>Writing helps you organize your thoughts more coherently. This makes you a better conversationalist on related topics. I can’t count how many times I’ve had deeper conversations with others simply because I’d already organized my thoughts through writing.</p> <h3 id="everything-else-is-just-a-bonus">Everything Else Is Just a Bonus</h3> <p>Other benefits of writing—personal branding, networking, more opportunities—are just bonuses. While these can be significant, they’re not the main reason you should write.</p> <p>You should write because writing makes you a better person.</p> <footer lang="en" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> This page was automatically translated by generative AI and may contain inaccuracies or incomplete information. <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">Feedback is welcome</a> to help us improve. </p> </footer>]]></content><author><name></name></author><category term="Collection"/><category term="Discussion"/><category term="Thoughts"/><category term="Blogging"/><summary type="html"><![CDATA[You should blog even if you have no readers]]></summary></entry></feed>