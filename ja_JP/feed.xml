<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en_US"><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://waynexucn.github.io//feed.xml" rel="self" type="application/atom+xml"/><link href="https://waynexucn.github.io//ja_JP/" rel="alternate" type="text/html" hreflang="en_US"/><updated>2025-11-22T13:22:32+00:00</updated><id>https://waynexucn.github.io//feed.xml</id><title type="html">Wenjie Xu</title><subtitle>Wenjie Xu&apos;s home page. feedId:120017115220794368+userId:72841831310508032 </subtitle><entry><title type="html">macOSシステム設定の記録</title><link href="https://waynexucn.github.io//ja_JP/blog/2025/Mac%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/" rel="alternate" type="text/html" title="macOSシステム設定の記録"/><published>2025-02-16T17:05:53+00:00</published><updated>2025-02-16T17:05:53+00:00</updated><id>https://waynexucn.github.io//blog/2025/Mac%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95</id><content type="html" xml:base="https://waynexucn.github.io//blog/2025/Mac%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/"><![CDATA[<blockquote> <p>Mac OSのほとんどの設定方法はLinuxと似ていますが、ここではMac特有の設定や問題、よく使うツールのみを記録します。</p> </blockquote> <h2 id="システム設定">システム設定</h2> <h3 id="1-初期設定">1. 初期設定</h3> <ul> <li>すべての出所からのアプリケーションインストールを許可：<code class="language-plaintext highlighter-rouge">sudo spctl --master-disable</code></li> <li> <p>アプリケーションを外付けハードディスクにインストール</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 外付けハードディスクにアプリケーションディレクトリを作成</span>
<span class="nb">mkdir</span> /Volumes/Work/Application
<span class="c"># 外付けディスクにライブラリディレクトリとApplication Supportディレクトリを作成</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /Volumes/Work/Library/Application<span class="se">\ </span>Support
<span class="c"># 「/Applications」ディレクトリ内のアプリを外付けディスクのアプリディレクトリに移動（手動またはコマンドで）</span>
<span class="nb">mv</span> /Applications/A.app /Volumes/Work/Application
<span class="c"># システム標準のアプリディレクトリに移動</span>
<span class="nb">cd</span> /Applications
<span class="c"># アプリのシンボリックリンクを内部ディスクに作成</span>
<span class="nb">ln</span> <span class="nt">-s</span> /Volumes/Work/Application/A.app ./A.app
<span class="c"># ~/Library/Application Supportに必要なファイルがある場合は外付けディスクに移動</span>
<span class="nb">mv</span> ~/Library/Application<span class="se">\ </span>Support/A /Volumes/Work/Library/Application<span class="se">\ </span>Support
<span class="c"># そしてシンボリックリンクを作成</span>
<span class="nb">ln</span> <span class="nt">-s</span> /Volumes/Work/Library/Application<span class="se">\ </span>Support/A ~/Library/Application<span class="se">\ </span>Support
</code></pre></div> </div> </li> <li> <p>よく使うツール</p> <table> <thead> <tr> <th>機能</th> <th>名称</th> <th>備考</th> <th>ダウンロードリンク</th> </tr> </thead> <tbody> <tr> <td>解凍</td> <td>Keka</td> <td>公式無料</td> <td><a href="https://www.keka.io/zh-cn/">公式サイト</a></td> </tr> <tr> <td>アンインストール</td> <td>AppCleaner</td> <td>無料</td> <td><a href="https://freemacsoft.net/appcleaner/">公式サイト</a></td> </tr> <tr> <td>ランチャー</td> <td>Raycast</td> <td>基本無料</td> <td><a href="https://www.raycast.com/">公式サイト</a></td> </tr> <tr> <td>PDFリーダー</td> <td>PDF Expert</td> <td>有料</td> <td><a href="https://pdfexpert.com/">公式サイト</a></td> </tr> <tr> <td>スクリーンショット</td> <td>PixPin</td> <td>基本無料</td> <td><a href="https://pixpin.cn/docs/official-log/1.9.11">公式サイト</a></td> </tr> <tr> <td>右クリック管理</td> <td>iRightMouse</td> <td>無料/有料版</td> <td>App Store</td> </tr> <tr> <td>パッケージ管理</td> <td>HomeBrew</td> <td>オープンソース</td> <td><a href="https://brew.sh/zh-cn/">公式サイト</a></td> </tr> <tr> <td>メニュー管理</td> <td>Ice</td> <td>オープンソース</td> <td><code class="language-plaintext highlighter-rouge">brew install jordanbaird-ice</code></td> </tr> <tr> <td>ターミナル</td> <td>iTerm2</td> <td>オープンソース</td> <td><a href="https://iterm2.com/index.html">公式サイト</a></td> </tr> <tr> <td>SSH</td> <td>Termius</td> <td>アプリ内課金</td> <td><a href="https://termius.com/">公式サイト</a></td> </tr> <tr> <td>クリップボード</td> <td>Raycast（一部機能）</td> <td>基本無料</td> <td><a href="https://www.raycast.com/">公式サイト</a></td> </tr> <tr> <td>ウィンドウ管理</td> <td>Loop</td> <td>オープンソース</td> <td><code class="language-plaintext highlighter-rouge">brew install --cask loop</code></td> </tr> <tr> <td>ネットワーク起動</td> <td>wakeonlan</td> <td>オープンソース</td> <td><code class="language-plaintext highlighter-rouge">brew install wakeonlan</code></td> </tr> <tr> <td>サウンド管理</td> <td>SoundSource</td> <td>有料</td> <td><a href="https://rogueamoeba.com/soundsource/">公式サイト</a></td> </tr> <tr> <td>サウンド管理</td> <td>LosslessSwitcher</td> <td>オープンソース</td> <td><a href="https://github.com/LosslessSwitcher">GitHub</a></td> </tr> <tr> <td>マウス・キーボード共有</td> <td>DeskFlow</td> <td>オープンソース</td> <td><a href="https://github.com/DeskFlow/DeskFlow">GitHub</a></td> </tr> <tr> <td>プレイヤー</td> <td>IINA</td> <td>オープンソース</td> <td><a href="https://iina.io/">公式サイト</a></td> </tr> <tr> <td>シェル補完</td> <td>Amazon Q</td> <td>オープンソース</td> <td><a href="https://github.com/withfig/autocomplete">GitHub</a></td> </tr> </tbody> </table> </li> <li> <p>ログイン項目や拡張機能の不要な項目を削除</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Finderで該当フォルダを開き、ログイン項目名に対応するファイルを削除</span>
~/Library/LaunchAgents
/Library/LaunchAgents
/Library/LaunchDaemons
</code></pre></div> </div> </li> </ul> <h3 id="2-欧路辞書の無制限試用">2. 欧路辞書の無制限試用</h3> <p>欧路辞書のMac版とWindows版は仕様が異なり、Mac版は未登録だと試用回数に制限がありますが、ローカルの設定ファイルを編集することで回数制限を回避できます。手順は以下の通りです：</p> <ul> <li>Finderを開く</li> <li>ショートカット <code class="language-plaintext highlighter-rouge">Cmd + Shift + G</code></li> <li>パスを入力：<code class="language-plaintext highlighter-rouge">~/Library/Preferences</code></li> <li>ファイルを探す：<code class="language-plaintext highlighter-rouge">com.eusoft.eudic.plist</code></li> <li>plistバイナリファイルをXML形式で開く（VSCodeのBinary Plistプラグインなどを利用）</li> <li>フィールド：<code class="language-plaintext highlighter-rouge">MAIN_TimesLeft</code> を探す</li> <li>値を大きく設定（例：99999）し、保存</li> </ul> <p>再度欧路辞書を開くと、プロ機能を無制限で利用でき、アップグレードしても有効です。</p> <h2 id="開発環境設定">開発環境設定</h2> <h3 id="1-python-conda-forge">1. Python (conda-forge)</h3> <h4 id="numpy">numpy</h4> <ul> <li> <p>NumPyはAppleのAccelerateフレームワーク（BLAS）で最適化されています。condaでインストールする場合は、<code class="language-plaintext highlighter-rouge">numpy</code>のBLAS依存を指定する必要があります。PyPIのWheel経由でインストールする場合、<code class="language-plaintext highlighter-rouge">numpy&gt;2.0</code>は自動的にAccelerateのBLASを利用します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda <span class="nb">install </span>numpy <span class="s2">"blas=*=*accelerate*"</span>
</code></pre></div> </div> </li> <li> <p>環境のBLAS実装を切り替えることも可能です。このコマンドはBLASライブラリ自体のみを対象とし、BLAS依存の他パッケージは自動でインストールされません。他のパッケージがBLASを必要とする場合は手動でインストールしてください。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda <span class="nb">install</span> <span class="s2">"libblas=*=*accelerate"</span> <span class="c"># 新しいコマンド</span>
conda <span class="nb">install</span> <span class="s2">"blas=*=accelerate"</span> <span class="c"># 古いコマンド</span>
</code></pre></div> </div> </li> <li> <p>特定のBLAS実装を固定したい場合は、環境内でBLAS実装をピン留めしてcondaによるロールバックを防げます。Accelerateを固定するには、conda-docsの説明通り、<code class="language-plaintext highlighter-rouge">libblas=*=*accelerate</code>を<code class="language-plaintext highlighter-rouge">&lt;conda-root&gt;/envs/&lt;env-name&gt;/conda-meta/pinned</code>に追加してください。</p> </li> </ul> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer>]]></content><author><name></name></author><category term="Tools"/><category term="macOS"/><category term="Configuration"/><summary type="html"><![CDATA[macOSのソフトウェア設定と一般的なエラー解決策の記録]]></summary></entry><entry><title type="html">低スペッククラウドサーバーの実用的な設定記録</title><link href="https://waynexucn.github.io//ja_JP/blog/2025/%E4%BD%8E%E9%85%8D%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/" rel="alternate" type="text/html" title="低スペッククラウドサーバーの実用的な設定記録"/><published>2025-02-12T17:05:53+00:00</published><updated>2025-02-12T17:05:53+00:00</updated><id>https://waynexucn.github.io//blog/2025/%E4%BD%8E%E9%85%8D%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE</id><content type="html" xml:base="https://waynexucn.github.io//blog/2025/%E4%BD%8E%E9%85%8D%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"><![CDATA[<h2 id="サーバー構成の概要">サーバー構成の概要</h2> <p>最近、Alibaba Cloud ECSクラウドサーバーを購入しました。非常に安価で、構成は以下の通りです：</p> <ul> <li><strong>CPU</strong>: 2コア（vCPU）</li> <li><strong>メモリ</strong>: 2 GiB</li> <li><strong>ストレージ</strong>: クラウドディスク 40 GiB（2120 IOPS）</li> <li><strong>ネットワーク</strong>: 固定帯域幅 3M</li> </ul> <p>スペックが非常に低いため、この記事では使用中に遭遇した様々な問題とその解決策を記録します。</p> <h2 id="設定の最適化">設定の最適化</h2> <h3 id="pnpmの設定最適化">pnpmの設定最適化</h3> <p>メモリとCPUの制限により、pnpmで依存関係をインストールする際にフリーズしやすいため、並列数やリトライ回数を制限する必要があります：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 並列数を制限し、メモリ不足を回避</span>
pnpm config <span class="nb">set </span>concurrency 2

<span class="c"># pnpmの自動ロックファイル更新を無効化し、インストール時のディスクIO負荷を軽減</span>
pnpm config <span class="nb">set </span>auto-install-peers<span class="o">=</span><span class="nb">false</span>

<span class="c"># リトライ回数を設定し、ネットワークが不安定な場合の成功率を向上</span>
pnpm config <span class="nb">set </span>fetch-retries 3

<span class="c"># リトライファクターを設定し、リトライ間隔を延長</span>
pnpm config <span class="nb">set </span>fetch-retry-factor 2

<span class="c"># ネットワークタイムアウトを設定</span>
pnpm config <span class="nb">set </span>network-timeout 60000
</code></pre></div></div> <h3 id="sshキー管理">SSHキー管理</h3> <p><code class="language-plaintext highlighter-rouge">keychain</code>ツールを使用してSSHおよびGPGキーのエージェントを一元管理し、一度のアンロックで複数セッション間で共有できます。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># keychainのインストール</span>
<span class="c"># Debian/Ubuntu</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>keychain
<span class="c"># CentOS/RHEL</span>
<span class="nb">sudo </span>dnf <span class="nb">install </span>keychain
</code></pre></div></div> <p>自動読み込みを有効にするには、シェルの初期化ファイル（例：<code class="language-plaintext highlighter-rouge">.bash_profile</code>や<code class="language-plaintext highlighter-rouge">.profile</code>）を編集し、以下を追加します（鍵のパスは適宜調整してください）：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># keychainでSSHとGPGキーを管理</span>
<span class="k">if </span><span class="nb">command</span> <span class="nt">-v</span> keychain <span class="o">&gt;</span> /dev/null<span class="p">;</span> <span class="k">then
    </span><span class="nb">eval</span> <span class="si">$(</span>keychain <span class="nt">--quiet</span> <span class="nt">--eval</span> ~/.ssh/id_rsa<span class="si">)</span>
<span class="k">fi</span>

<span class="c"># 署名や暗号化にGPGを使う場合も一括管理可能：</span>
<span class="nb">eval</span> <span class="si">$(</span>keychain <span class="nt">--quiet</span> <span class="nt">--eval</span> ~/.ssh/id_rsa GPG_KEY_EMAIL@DOMAIN.COM<span class="si">)</span>
</code></pre></div></div> <blockquote> <p><code class="language-plaintext highlighter-rouge">--quiet</code>オプションでログイン時のメッセージ（例：<code class="language-plaintext highlighter-rouge">* Found existing ssh-agent: 1996</code>）を抑制でき、運用環境での静かな動作に適しています。 <code class="language-plaintext highlighter-rouge">GPG_KEY_EMAIL@DOMAIN.COM</code>はご自身のGPG鍵に紐付いたメールアドレスに置き換えてください。</p> </blockquote> <p>初回ログイン時に秘密鍵のパスワード入力が求められますが、以降は新しいターミナルやSSHセッションでも既にアンロックされたエージェントが自動的に再利用されます。複数のシェル間で同じ鍵を共有でき、パスワードの再入力は不要です。</p> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer>]]></content><author><name></name></author><category term="Tools"/><category term="Server"/><category term="Configuration"/><summary type="html"><![CDATA[クラウドサーバー設定の実践的な記録]]></summary></entry><entry><title type="html">「随筆」旧居の記憶</title><link href="https://waynexucn.github.io//ja_JP/blog/2025/%E9%9A%8F%E7%AC%94%E5%B9%B4%E5%89%8D%E9%87%8D%E8%AE%BF%E6%97%A7%E5%B1%85/" rel="alternate" type="text/html" title="「随筆」旧居の記憶"/><published>2025-01-27T23:40:15+00:00</published><updated>2025-01-27T23:40:15+00:00</updated><id>https://waynexucn.github.io//blog/2025/%E9%9A%8F%E7%AC%94%E5%B9%B4%E5%89%8D%E9%87%8D%E8%AE%BF%E6%97%A7%E5%B1%85</id><content type="html" xml:base="https://waynexucn.github.io//blog/2025/%E9%9A%8F%E7%AC%94%E5%B9%B4%E5%89%8D%E9%87%8D%E8%AE%BF%E6%97%A7%E5%B1%85/"><![CDATA[<p>三、四年ぶりに旧居の角に立つと、古い家の防犯ドアには色あせた春聯がまだ掛かっていた。壁の塗装は剥がれ、空気にはカビの匂いが漂い、すべてが過去に戻ったかのように感じる。隣のおばあさんの犬ワンワンが吠え、料理の油煙が窓の隙間から流れ出し、周囲の光景はとても懐かしい。ただ、ここに立っている自分は、もはや未来が教科書のように明確だと信じていた十八歳の少年ではない。</p> <p>指先で剥がれた壁を触れると、三年前に新居へ引っ越した時、この思い出が詰まった部屋の写真を一枚も撮らなかったことをふと思い出した。当時は新しい生活に向かうことしか考えておらず、別れに儀式が必要だとは思わなかった。二十年の記憶を抱えた空間が、ある日、壁のカビ跡さえも懐かしくなるとは思いもしなかった。今になって、なぜ年配の人が昔話を繰り返すのかが分かる。十年の歳月が触れられる現実となった時、誰もが懐かしさを語る人になるのだ。</p> <p>私はスマートフォンを取り出し、錆びたドアに向けて構える。画面の中で、2025年の陽光と2003年の埃が交差する。金属の錠前についた傷が徐々に鮮明になり、指先でその溝をなぞると、これらの傷跡がどんな言葉よりも時の流れを忠実に記録していることに気づく。</p> <p>ファインダーがわずかに揺れ、自分の影が十年前に鍵を回していた少年の姿と重なる。隣のおばあさんの油鍋は今も音を立て、ワンワンの吠え声が廊下の静けさを破る。明暗が交錯する中、防犯ドアの逆さ福の字が徐々に剥がれ、破片が風に舞う。油煙の匂いが染みついたこれらの断片が、突然重く感じられる。</p> <p>本当に私たちが生きてきた証は、壮大な物語ではなく、ドアノブの艶や壁の隅に描かれた鉛筆の線、ドアの隙間に積もった埃や錆――こうした小さな断片が、記憶の中で静かに現れ、年月の輪郭を描き出すのだ。</p> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer>]]></content><author><name></name></author><category term="Life"/><category term="Thoughts"/><category term="Discussion"/><summary type="html"><![CDATA[気ままなひとこと]]></summary></entry><entry><title type="html">「随筆」2025年の最初の日に、少し語ってみる</title><link href="https://waynexucn.github.io//ja_JP/blog/2025/%E9%9A%8F%E7%AC%9425%E5%B2%81%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9/" rel="alternate" type="text/html" title="「随筆」2025年の最初の日に、少し語ってみる"/><published>2025-01-01T18:00:00+00:00</published><updated>2025-01-01T18:00:00+00:00</updated><id>https://waynexucn.github.io//blog/2025/%E9%9A%8F%E7%AC%9425%E5%B2%81%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9</id><content type="html" xml:base="https://waynexucn.github.io//blog/2025/%E9%9A%8F%E7%AC%9425%E5%B2%81%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9/"><![CDATA[<p>今日は2025年1月1日、新しい一年が始まり、また一つ歳を重ねた。特別な祝い事はなく、ただコーヒーを淹れて机に向かい、思いつくままに何かを書こうと思った。私はあまり儀式を重んじるタイプではなく、どんな祝日にも特別な感情はない。私にとって、すべての日は同じで、良くても悪くても同じ、すべての意味は人が与えるものだ。2025年も特に変わりはなく、これまでの年と同じように、学業のプレッシャーや探求の楽しさ、不安や静けさがある。こうして一年一年が過ぎていき、日々はゆっくりと流れる水のようで、ときどきさざ波が立つが、結局は穏やかに戻る。</p> <p>今年、私は25歳になる。25歳という数字は、私にとって少し微妙だ。15歳のとき、20歳は「大人」を意味し、成熟や自立、すべての問題の答えを持つ存在だと思っていた。20歳のとき、25歳は理想の自分――すでに進むべき道を見つけ、着実に歩んでいる人だと思っていた。時間の感覚は、25歳と15歳、20歳ではまったく違う。15歳の私は時間を意識せず、未来は遠く、日々は長いと感じ、時間の観点から物事を考えたことがなかった。20歳のときは、ぼんやりとした目標ができたが、まだ時間は無限にあると思い、好きなことを好きなようにしていた。</p> <p>そんなふうにぼんやりと歩んできて、気づけば25歳になった。今、かつて憧れていた年齢に立ってみると、多くのことが想像ほど単純ではないと気づく。むしろ20歳の頃とあまり変わらず、明確な答えはなく、むしろ迷いや不確実性が増えた気がする。時に不安を感じ、時に自由さも感じる。</p> <p>正直に言うと、私は「時間」という視点から自分の人生を考えることはほとんどなかった。ここ数年は、流れに身を任せてきた。毎日は授業、実験、執筆、娯楽に細かく分けられ、自分が誰で、どこへ向かいたいのかを考えることはほとんどなかった。だからこそ、時間というものが私の生活の中で曖昧になり、カウントダウンでも、追いかけるべき目標でもなく、空気のように自然に流れるものになった。感じることはできなくても、どこにでも存在している。</p> <p>新年の始まりに立ち、時間を別の角度から見てみようと思う。それは直線ではなく、ゆっくりと広がる円のようなものだ。時間が経つにつれて、私たちの経験や知識、視野はこの円の境界のように広がっていく。子どもの頃は世界がとても単純に思えたが、それは円がまだ小さく、境界が近かったからだ。今は、より多くの景色を見て、さまざまな人と出会い、世界の複雑さと広さを知った。人それぞれ境界が違い、円の形も独特であることが、多様性を理解し、受け入れる気持ちにつながっている。</p> <p>今年は大きな計画を立てたくない。これまでの経験から、計画は人生の偶然によって簡単に崩れることを知ったし、むしろ今この瞬間への集中を失わせることもある。だから、2025年は「見る」という意識を持ち続けたい。自分を見る、他人を見る、この世界のさまざまな可能性を見る。今年も迷うことがあるかもしれないが、この一年で新しい「見る」ができ、自分が誰で、何を望み、どこへ行きたいのかがより明確になれば、それで十分だ。</p> <p>だから新年には意味がある。私は時間を通して自分の成長を見て、世界の複雑さと多様性を見て、自分が誰で、何を望み、どこへ行きたいのかをますますはっきりと理解する。意味は私たちが与えるものであり、もともと存在するものではない。</p> <p>それで十分だと思う。</p> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer>]]></content><author><name></name></author><category term="Life"/><category term="Thoughts"/><category term="Discussion"/><summary type="html"><![CDATA[気ままなひとこと]]></summary></entry><entry><title type="html">2024年の研究活動総括</title><link href="https://waynexucn.github.io//ja_JP/blog/2024/2024%E5%B9%B4%E7%A7%91%E7%A0%94%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/" rel="alternate" type="text/html" title="2024年の研究活動総括"/><published>2024-12-15T22:30:35+00:00</published><updated>2024-12-15T22:30:35+00:00</updated><id>https://waynexucn.github.io//blog/2024/2024%E5%B9%B4%E7%A7%91%E7%A0%94%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/2024%E5%B9%B4%E7%A7%91%E7%A0%94%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93/"><![CDATA[<p>私は2020年から研究活動に携わり始め、その頃は「研究」というものにまだ不慣れでした。2023年には大学院に進学し、2024年末には修士から博士への進学を申請しました。この4年間、決して順風満帆ではありませんでしたが、耐えられないほどの困難にも直面しませんでした。2023年から2024年は、私にとって新たなスタート（大学院生活）であり、同時に矛盾に満ちた時期でもありました――最も努力した一年であり、最も怠惰だった一年でもあります。努力したと言えるのは、新しいスキルや手法、考え方の習得に多くの時間を費やしたからです。一方で、ほとんど運動をやめ、論文執筆にもあまり興味が持てず、時間の半分ほどはゲーム（铲铲铲）や様々なガジェットいじり（i love coding）に費やし、研究に集中できず多くの時間を浪費しました。それでも、今年は決して無駄ではなく、主な成果は以下の通りです：</p> <ul> <li>中国語論文を4本発表（うち3本はプロジェクト依頼による数千字のレポート、もう1本は以前の研究をCSSCI誌に掲載）、英語論文を1本発表（EI収録、国際会議投稿）；</li> <li>ソフトウェア著作権を2件申請（主に指導教員の国家自然科学基金プロジェクトの終了要件に合わせて、短期間で2件完成）；</li> <li>学術賞を2件受賞（2つの会議で「最優秀論文賞」、うち1つは戦略研究院認定の重要会議ですが、全体のレベルは低い）；</li> <li>研究メンバーとして6～7件のプロジェクトに参加（技術的難易度は高くないものの、様々なタイプの執筆力が鍛えられました。ただし、毎回タスクを終えると「論文疲れ」に陥ります）；</li> <li>指導教員の依頼で同僚の中国語C誌論文を修正（他人の論文を直すのは自分で書くより大変でしたが、そのおかげで第二著者になりました）；</li> <li>長らく先延ばしにしていた英語論文を投稿（2つの研究を統合したもので、うち1つは同僚の研究で詳細を把握しておらず、執筆のモチベーションが上がらず、何度もリジェクトされた後、年末に再整理して再投稿）；</li> <li>進行中の研究が1件（目標が大きすぎて進捗が遅く、主な原因は怠惰です）。</li> </ul> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer>]]></content><author><name></name></author><category term="Life"/><category term="Blogging"/><summary type="html"><![CDATA[2024年の振り返り]]></summary></entry><entry><title type="html">「転載」中国語の常態と異常態</title><link href="https://waynexucn.github.io//ja_JP/blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%AD%E6%96%87%E7%9A%84%E5%B8%B8%E6%80%81%E4%B8%8E%E5%8F%98%E6%80%81/" rel="alternate" type="text/html" title="「転載」中国語の常態と異常態"/><published>2024-12-02T15:13:29+00:00</published><updated>2024-12-02T15:13:29+00:00</updated><id>https://waynexucn.github.io//blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%AD%E6%96%87%E7%9A%84%E5%B8%B8%E6%80%81%E4%B8%8E%E5%8F%98%E6%80%81</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%AD%E6%96%87%E7%9A%84%E5%B8%B8%E6%80%81%E4%B8%8E%E5%8F%98%E6%80%81/"><![CDATA[<blockquote> <p>余光中氏の1987年の文章「中国語の常態と異常態」(<a href="https://mp.weixin.qq.com/s/8gvq--Hsb4dpIAHCleH-oQ">https://mp.weixin.qq.com/s/8gvq--Hsb4dpIAHCleH-oQ</a>)より抜粋・転載したものです。一部の見解には異論があり、私はすべてに賛同しているわけではありません。</p> </blockquote> <h2 id="一">一</h2> <p>五四新文化運動以来、70年間で中国語は大きく変化しました。一方で、優れた作家や学者の筆による白話文はますます成熟し、表現や論理の分析においても自在に使いこなせるようになりました。他方、純粋な中国語（文語や民間文学の白話文）は私たちと疎遠になり、英語の影響が直接的な学習や間接的な浸透によってますます顕著になっています。そのため、一般の人々の白話文は西洋化の病理が深刻化しています。大衆メディアから学ぶのは流行の観念だけでなく、それを包むさまざまな言い回しも含まれます。時には、その言い回しに優れた人も抗えません。今日の中国語は地域によって違いがあるものの、共通の傾向は冗長でぎこちないことです。例えば、もともと「因此（したがって）」と言うべきところを「基于这个原因（この理由に基づいて）」と言ったり、「问题很多（問題が多い）」を「有很多问题存在（多くの問題が存在する）」と言ったりします。このような簡単なものを複雑にし、巧みさを拙さに変える傾向に対し、意識的な人が警告を発しなければ、中国語はますます悪化し、本来の簡潔で柔軟な美徳も失われてしまうでしょう。</p> <p>中国語にもエコロジー（生態）があるのでしょうか？もちろんあります。簡潔な語彙、柔軟な文型、響きの良い声調、これらが中国語の生命の常態です。このエコロジーに従えば、中国語の健康を保つことができます。逆らえば、やがて中国語は汚染され、危機が迫ります。</p> <p>現在の中国語の大きな危機は西洋化です。私は外国語学科出身で、30代で中国語の革新に取り組み、決して保守派ではありません。中国語創作に志す者は、四字熟語を使いこなすことが創作の全てだとは思いません。逆に、熟語ばかりに頼るのは古人の頭で考え、古人の口で話すようなもので、決して立派なことではありません。しかし、熟語を使えないのはもっと問題です。全く熟語を使わない文章を書くのは不可能ではありませんが、非常に難しく、うまく書くのはさらに難しい。現在、多くの人が中国語を書けず、使える熟語も限られていて、窮屈に感じます。香港の学生は「总的来说（総じて言えば）」しか言わず、「总而言之（要するに）」を忘れています。同様に、「一言难尽（一言では言い尽くせない）」も言わず、「不是一句话就能够说得清楚的（一言では説明できない）」しか言いません。</p> <p>熟語は何百年も残り、文化の一部となっています。例えば「千锤百炼（千回も鍛える）」は意味も音も美しく、「千炼百锤」と言い換えても不自然です。「朝秦暮楚」「齐大非偶」「乐不思蜀」なども中国の歴史を含んでいます。熟語の衰退は文語の忘却、文化意識の萎縮を示しています。</p> <p>英語がうまく学べていないのに、中国語まで悪くなってしまった、あるいは悪影響を受けたとも言えます。中国語の西洋化は必ずしも悪いことではありません。緩やかで適度な西洋化は避けられない傾向であり、巧みな西洋化は長所を取り入れることもできます。しかし、急激で過度な西洋化は中国語の自然な生態を壊し、悪性の西洋化となります。この危機には意識的な人が警戒し、努力して抵抗すべきです。ヨーロッパの言語の中で、文法が単純な英語は中国語に最も近いかもしれません。それでも、英語と中国語には多くの基本的な違いがあり、完全に調和することはできません。中英翻訳の経験がある人なら誰でも同意できるでしょう。実際、翻訳研究は比較言語学の研究でもあります。以下、中英の違いから中国語の西洋化の問題を簡単に分析します。</p> <h2 id="二">二</h2> <p>中国語に比べて、英語は抽象名詞を多く使い、好んで抽象名詞を用います。英語では「His decrease in income changed his lifestyle.（彼の収入の減少が彼のライフスタイルを変えた）」と言えますが、中国語では「彼因为收入减少而改变生活方式（彼は収入が減ったためにライフスタイルを変えた）」または「彼収入减少，乃改变生活方式（彼の収入が減少し、ライフスタイルを変えた）」のように言います。</p> <p>中国語は一つの事柄（短い文）を主語にすることが多いのに対し、英語は名詞（または名詞句）を主語にすることが多いです。「横贯公路再度坍方，是今日的头条新闻（横断道路が再び崩落したのが今日のトップニュースです）」は中国語の言い方です。「横贯公路的再度坍方，是今日的头条新闻（横断道路の再度の崩落が今日のトップニュースです）」は英語の文法の表れです。同様に、「选购书籍，只好委托你了（書籍の選択はあなたに委ねるしかない）」は中国語の文法です。「书籍的选购，只好委托你了（書籍の選択はあなたに委ねるしかない）」はやや西洋化されています。「推行国语，要靠大家努力（国語の推進は皆の努力にかかっている）」は自然な言い方です。「推行的国语，要靠大家的努力（推進される国語は皆の努力にかかっている）」は冗長に感じられます。このような状況は目的語にも見られます。「他们杯葛这种风俗的继续（彼らはこの風習の継続をボイコットしている）」は不自然な表現です。「杯葛继续」はどうしても不自然に感じられます。「他们反对保存这种风俗（彼らはこの風習の保存に反対している）」に変えると自然になります。</p> <p>英語は抽象名詞を好んで使うため、動詞が弱められ、あるいは動詞が空虚にされる結果となります。科学、社会科学、公文書の用語が日常生活に侵入し、多くの明確で力強い動詞が次第に変質し、無表情な語句に変わってしまいました。以下はよく見られる例です。</p> <blockquote> <p>apply pressure: press</p> <p>give authorization: permit</p> <p>send a communication: write</p> <p>take appropriate action: act</p> </blockquote> <p>これらの例では、簡潔な単音節動詞が抽象名詞を含む句に変わっています。一見すると、より格式ばった、高度な表現に見えます。例えば、pressがapply pressureに変わると、動作は二つに分かれ、一方は静止した抽象名詞pressureに、もう一方は広範で漠然とした動詞applyに変わります。バズン（Jacques Barzun）やトリリング（Lionel Trilling）などの学者は、このような広範な動詞を「弱動詞（weak verb）」と呼びました。彼らは「科学報告は単調で冷淡になりがちであり、その影響で現代の文体は思考の流れを一連の静止した概念に分解し、前置詞と通常は受動態の弱動詞でつなげることを好む」と述べています。</p> <p>バズンの言う弱動詞は、イギリスの小説家オーウェルが言う「言葉の義肢（verbal false limb）」に相当します。現代の中国語にもこのような病態が現れ、単純明瞭な動詞を「万能動詞+抽象名詞」の句に分解することを好みます。現在最も流行している万能動詞は「作出」と「进行」であり、その勢力は非常に大きく、ほぼ半分の正規動詞を飲み込もうとしています。以下の例を見てください。</p> <blockquote> <p>(一) 本校的校友对社会作出了重大的贡献。</p> <p>(二) 昨晚的听众对访问教授作出了十分热烈的反应。</p> <p>(三) 我们对国际贸易的问题已经进行了详细的研究。</p> <p>(四) 心理学家在老鼠的身上进行试验。</p> </blockquote> <p>これらは直接的または間接的な影響を受けた文法であり、中国語本来の動詞が上述のような煩雑な語句に分解されてしまった現象です。前の四つの文はそれぞれ次のように言い換えられます。</p> <blockquote> <p>(一) 本校的校友对社会贡献很大。</p> <p>(二) 昨晚的听众对访问教授反应十分热烈。</p> <p>(三) 我们对国际贸易的问题已经详加研究。</p> <p>(四) 心理学家用老鼠来做试验。(または：心理学家用老鼠试验。)</p> </blockquote> <p>バズンらの学者は、現代英語が単純を好み、動作を静止させ、具体を抽象に変え、直接を遠回りにする傾向が「名詞成灾（noun-plague）」の域に達していると嘆いています。学問の分業が進み、さまざまな学科の専門用語、特に科学や社会科学の「夹杠」が、本業で使用され、素人が借用し、「ニュース体（journalese）」の普及も相まって、現代英語は一方では多彩多姿に見えますが、他方では混乱を招き、日常用語が斑駁不均となっています。イギリスの詩人グレイヴス（Robert Graves, 1895-1986）は短詩「耕田（Tilth）」の中でこの現象を批判しています。</p> <blockquote> <p>Gone are the sad monosyllabic days</p> <p>When “agricultural labour”still was tilth.</p> <p>And “00% approbation”, praise;</p> <p>And “pornographic modernism”, filth-</p> <p>And still I stand by tilth and filth and praise.</p> </blockquote> <p>「名詞成灾」の流行の中で、最も深刻な被害を受けているのは、いわゆる「科学至上（scientism）」です。現代の工業社会において、科学はすでに重要な地位を占め、技術はさらにその傑作とされています。そのため、知識人の口頭や筆記には、意識的または無意識的に、いくつかの「学術的」抽象名詞が好まれ、客観的で正確に見せかけることが好まれます。これを「伪术语（pseudo-jargon）」と呼ぶ人もいます。例えば、明らかにfirst stepなのにinitial phaseと言ったり、明らかにletterなのにcommunicationと言ったりするのがこれに当たります。</p> <p>中国語も同様です。本来「名气（名声）」と言えるのに、「知名度（知名度）」なる言葉を作り出し、「很有名（とても有名）」と言わずに、「具有很高的知名度（非常に高い知名度を持つ）」と言わなければならないのは、実に滑稽です。もう一つの伪术语は「可读性（可読性）」であり、書評や出版広告でよく見られます。「この伝記はとても感動的だ」「この伝記は引き込まれるように面白い」「この伝記はとても良い」と言えるのに、「この伝記の可読性は高い」と言わなければならないのは理解できません。この言葉はどこから来たのか分かりませんが、この概念は英語では形容詞readableを使い、抽象名詞readabilityは使いません。英語では「The biography is highly readable」と言いますが、「The biography has high readability」とは言いません。この風潮は台湾でますます強まっています。テレビでは「昨晩の演奏は聴くに値する」と言われ、書評でも「伝統的な写実作品はうまく書かれれば、いらいらするような実験小説よりも見るに値する」といった文を見かけます。</p> <p>私はその書評家が「岂不比一篇……更耐看（……よりも見るに耐える）」と言えない理由が分かりません。同様に、「更具前瞻性（より先見の明がある）」は「更有远见（より遠くを見る）」よりも高雅なのでしょうか？このままでは「彼が話したこの面白い話は可笑しさが非常に高い」といった奇妙な文が現れるのではないでしょうか？また、「某某主义（～主義）」といった抽象名詞も過度に使用されており、英米の有識者は少なくすることを勧めています。中国本土の記事では「愛国主義の精神に富む」とよく言われますが、実は語病を含んでいます。愛国は単なる感情であり、なぜ学術的に「主義」とする必要があるのでしょうか？愛国も主義となれば、「親日主義」「反米主義」「郷愁主義」と言った表現も可能になるのでしょうか？次に、主義はすでに一つの精神を表しているので、繰り返す必要はなく、「愛国精神に富む」と言えば十分です。</p> <p>名詞には単数と複数の区別があり、これは欧州の言語の習慣です。英語の文法の複数形の変化は、他の欧州の言語に比べて単純です。「玫瑰都很娇小（バラは皆小さい）」という文を英語、フランス語、ドイツ語、スペイン語、イタリア語で言うと、次のようになります。</p> <blockquote> <p>The roses are small.</p> <p>Les roses sont petites.</p> <p>Die Rosen sind klein.</p> <p>Las rosas son chiquitas.</p> <p>Le rose sono piccole.</p> </blockquote> <p>どの文も4つの単語で、語順も完全に同じで、冠詞、名詞、動詞、形容詞の順になっています。英語の文では、動詞だけが名詞に続いて変化し、他の二つの単語は単数・複数を区別しません。ドイツ語の文では、形容詞だけが変化しません。フランス語、スペイン語、イタリア語の三つの文では、主語となる名詞が複数形であるため、他の単語もすべて変化します。</p> <p>幸いにも、中国語の名詞には複数形の変化や性別の区別がなく、そうでなければ非常に煩雑になるでしょう。古い小説の対話には「爷们」「娘们」「ㄚ头们」といった複数形の言葉がありますが、叙述部分では「诸姐妹」「众ㄚ鬟」といった表現が使われています。中国語で多数を表現する場合、「民众」「徒众」「观众」「听众」と言った言葉が使われることがありますが、「众」には「们」と同様の役割があります。しかし、「众」や「们」は中国語では必ずしも複数形の語尾が必要なわけではありません。「文武百官」と言うときに「官们」とは言わず、「文官们」「武官们」とも言いません。同様に「全国的同胞」「全校的师生」「所有的顾客」「一切乘客」はもちろん複数形ですが、わざわざそれを明示する必要はありません。「人们」が「人人」「大家」「大众」「众人」「世人」に取って代わるのは、あまりにも不格好な西洋化の言葉です。林語堂は絶対に使わなかった言葉であり、皆さんも使わないことを願っています。テレビでも「民众们」「听众们」「球员们」と言った表現があり、実に冗長です。特に「众」と「们」を一緒に使うのは、すでに通じません。</p> <p>中国語の単語は数による区別がありませんが、時には困難に直面することもあります。「一位观众（観客の一人）」は明らかに不自然ですが、「观众之一（観客の一人）」は冗長で自然さに欠けます。「一位观者（観察者の一人）」は「一位读者（読者の一人）」ほど一般的ではありません。そのため、「一位观众来信说……」といった文は、もうどうしようもありません。</p> <p>しかし、「……之一」の氾濫は無視できません。「……之一」は単数形ですが、背景には複数の意識があります。他の欧州の言語と同様に、英語でも「one of my favorite actresses」「one of those who believe……」「one of the most active promoters」といった表現が好まれます。中国語には元々「……之一」という文法はありませんでしたが、今では「观众之一」と言わざるを得ません。次のような文はどうでしょうか。</p> <blockquote> <p>刘伶是竹林七贤之一。</p> <p>作为竹林七贤之一的刘伶……</p> </blockquote> <p>現在では非常に流行しています。前の文は西洋化していますが、冗長ではありません。しかし、後の文は悪性西洋化の畸形であり、「作为」という二字は完全に余分で、「之一的」も文語と口語が混ざり合い、読みにくく、主語の「刘伶」を押しつぶしてしまい、非常に不自然です。実際、後の文の意味は前の文と全く同じですが、英語の文法「as one of the Seven Worthies of Bamboo Grove, Liu Ling……」を生き写しにしたものです。したがって、「作为竹林七贤之一的刘伶以嗜酒闻名」と言うよりも、「刘伶是竹林七贤之一，以嗜酒闻名」とシンプルに言った方が良いでしょう。実際、前の文も「之一」と言わずに済む方法はいくらでもあります。中国語では「刘伶乃竹林七贤之同侪」「刘伶列于竹林七贤」「刘伶跻身竹林七贤」「刘伶是竹林七贤的同人」と言えます。</p> <p>「竹林七贤之一」や「文房四宝之一」などはそれほど深刻ではありません。なぜなら、七や四は範囲が明確であり、論理的にも「刘伶是竹林七贤（劉伶は竹林の七賢の一人である）」や「砚乃文房四宝（硯は文房四宝の一つである）」とは言えないからです。しかし、次のような文はどうでしょうか。</p> <blockquote> <p>红楼梦是中国文学的名著之一。</p> <p>李广乃汉朝名将之一。</p> </blockquote> <p>この二つの文において、「之一」はどちらも余分です。世の中のすべての事物には同類があり、一度その一つを挙げると、他を気にかけなければならず、あまりにも行き届きすぎています。中国文学の名著はもちろん一つではなく、漢朝の名将も一人ではありません。この「之一」を付け加えなくても、あなたが無知であるとか、重要なものを見落としているとは誰も思わないでしょう。このような悪習が身についてしまうと、文が「小张是我的好朋太之一（小張は私の親友の一人です）」「我不过是您的平庸的学生之一（私はあなたの平凡な学生の一人に過ぎません）」「他的嗜好之一是收集茶壸（彼の趣味の一つは茶壺の収集です）」といった具合に書かれるようになるのではないでしょうか。</p> <p>「之一」の病は香港でさらにひどくなり、「其中之一」となっています。香港の新聞や雑誌では、「我是听王家的兄弟其中之一说的（私は王家の兄弟の一人から聞いた）」や「戴维连一直以来都是我最喜欢的导演其中之一（デイヴィッド・リーンはずっと私のお気に入りの監督の一人です）」といった奇妙な文が流行しています。英語の複数の概念が中国語に与えた影響は深刻で、ここからも明らかです。</p> <p>ここで「最……之一」という文法について触れざるを得ません。英語では「彼は現代の最も偉大な思想家の一人です」とよく言われますが、これは本当に正確なのでしょうか？「最も偉大な」は最高の地位を示し、「一人」は少し抑えられた表現で、結果的には単に地位を高めるだけで、実際には最高の地位には達していません。「最も偉大な思想家」が何人いるのか、四人なのか、七人なのか、弾力性があります。大きな回り道をした結果、あまり変わりません。したがって、「彼は大名人の一人です」や「彼は著名な人物です」と言えば十分であり、「彼は最も有名な人物の一人です」とわざわざ言う必要はありません。</p> <h2 id="三">三</h2> <p>英語では、同じ詞性の言葉はandでつなぐことがよくあります。例えば、man and wife（夫婦）、you and I（あなたと私）、back and forth（前後に）などです。しかし、中国語では似たような場合、接続詞を使わずに「夫妻」「你我」「前后」と言えば足ります。同様に、中国語では一連の同類の言葉を並列させ、接続詞を必要としません。例えば「东南西北（東南西北）」「金木水火土（五行）」「礼乐射御书数（礼楽射御書数）」「柴米油盐酱醋茶（生活必需品）」などです。中国人は決して「開門七件事、柴、米、油、盐、酱、醋以及茶（開けて七つの事、柴、米、油、塩、醤、酢、そして茶）」とは言いません。このように言う人がいれば、必ず笑われます。同様に、中国語では「思前想后（前を思い、後を考える）」「说古道今（古を語り、今を説く）」と言います。しかし、最近ではandの意識が中国語に浸透し、あちこちで悪さをしています。香港の新聞には次のような文がありました。</p> <p>「在政治民主化与经济自由化的发展道路，台北显然比北京起步更早及迈步更快，致在政经体制改革的观念、行动、范围及对象，更为深广更具实质……」</p> <p>このような文体はあまりスムーズではありません。例えば、前半の「与」「及」は接続詞として不要です。「与」はまだしも、「及」はまったく必要ありません。後半の「更为深广更具实质」は中国語らしいですが、「起步更早及迈步更快」は明らかに英語です。「及」という字は中国語のエコロジーを壊しています。中国語ではこのような使い方はしません。ここで接続詞を使う必要があるとすれば、「而」を使うべきで、「及」を使ってはいけません。例えば、英語の「slow but sure」は中国語では「慢而可靠」または「缓慢而有把握」と言うべきで、「慢及可靠」や「缓慢与有把握」とは言えません。「而」という接続詞は、さらに進める意味を表すだけでなく、後退や修正を表すこともできます。例えば「国风好色而不淫，小雅怨诽而不乱」などです。「国風は色を好み淫らではなく、小雅は怨みを言わず乱れない」といった意味です。</p> <p>現在の悪い傾向は、元々接続詞を必要としないところに、andの意識の教唆によって接続詞が付け加えられ、「和」「与」「及」「以及」といった接続詞が使われるようになったことです。しかし、柔軟で円滑な「而」「并」「而且」といった言葉はほとんど使われなくなっています。（※英語では「但也不要不当而而而！」）</p> <h2 id="四">四</h2> <p>前置詞は英語では非常に重要な役割を果たし、英語の潤滑油のような存在です。英語の不及物動詞に前置詞を加えると、しばしば他動詞に変わります。例えば、look afterやtake inなどです。前置詞句（prepositional phrase）は形容詞や助詞のように使われることもあります。例えば、a friend in need（困ったときの友人）、said it in earnest（真剣に言った）などです。このように、英語は前置詞なしでは成り立ちません。しかし、中国語は必ずしもそうではありません。「扬州十日、嘉定三屠」という二つの語句には前置詞が一つも使われていませんが、英語では必ず必要です。</p> <p>「欢迎王教授今天来到我们的中间，在有关环境污染的各种问题上，为我们作一次学术性的演讲。」このような中途半端な表現はどこでも聞かれます。「中间」「有关」といった前置詞は蛇足です。一部の聖書の翻訳や牧師の説教では、「神在你的里面（神はあなたの内にいます）」と言ったりします。意味は分かりますが、中国語らしくありません。</p> <p>「有关」「关于」といった前置詞は、おそらく最も乱用されている前置詞でしょう。「有关文革的种种，令人不能置信（文革に関するさまざまなことは信じがたい）」；「今天我们讨论有关台湾交通的问题（今日は台湾の交通問題について議論します）」；「关于他的申请，你看过了没有（彼の申請についてはもう見ましたか）」といった具合です。この文の中では、「有关」「关于」は完全に余分です。最近、私は「全国学生文学奖」の審査を担当しましたが、ある投稿のタイトルが非常に長く、「关于一个河堤孩子的成长故事（堤防の子供の成長物語について）」というものでした。13文字の中に「关于」は無意味で、「一个」と「故事」もあってもなくてもよいものです。「关于」にはいくつかの表兄弟があり、最も目立つのは「由于」です。この言葉は現代中国語ではしばしば不適切に使われます。</p> <blockquote> <p>由于秦末天下大乱，(所以) 群雄四起。</p> <p>由于好奇心的驱使，我向窗内看了一眼。</p> <p>由于他的家境贫穷，使得他只好休学。</p> </blockquote> <p>英語は形式的に論理を重視し、事物の因果関係を説明するのが好きです。しかし、中国語は必ずしもそうではありません。「清风徐来，水波不兴（清風が吹いても水波は立たない）」にはもちろん因果関係がありますが、中国語では文脈によって暗黙のうちに理解されます。英語では「Because the breeze comes, the water waves do not rise」や「清風徐来，而不興起水波」と言うかもしれません。上記の最初の文は、実際には「由于」と「所以」を削除しても文意に損なうことはなく、むしろ文章をすっきりさせることができます。第二の文の「由于好奇心的驱使」には大きな問題はありませんが、少し冗長であり、「驱使」といった堅苦しい言葉を使う必要はありません。「出于好奇，我向窗内看了一眼（好奇心から私は窓の内を覗いた）」や「为了好奇，我向窗内看了一眼（好奇のために私は窓の内を覗いた）」と言えば、ずっと良くなります。第三の文の不通は、犯した者が最も多いでしょう。「由于他的家境贫穷」という片語は動詞を修飾するためにのみ使われ、主語にはなりません。この文は「由于」を削除し、「使得」といった因果関係を説明する冗長な言葉を省いて「他家境贫穷，只好休学（彼の家境は貧しいので、休学せざるを得なかった）」と書くと、より自然になります。</p> <h2 id="五">五</h2> <p>英語の副詞の形は中国語に対してそれほど害を及ぼしていませんが、すでに始まっています。例えば、次のような文です。</p> <blockquote> <p>他苦心孤诣地想出一套好办法来。</p> <p>老师苦口婆心地劝了他半天。</p> <p>大家苦中作乐地竟然大唱其民谣。</p> </blockquote> <p>「苦」字で始まるこれらの成語はもともとは動詞ですが、副詞的な「地」を付けることで副詞に変わっています。こうなると、文章は明確ですが、文法的には主客が分かれてしまい、従属関係を強調しすぎて、少し堅苦しくなります。「地」を一律に削除し、句読点に置き換えることで、主客の関係から解放され、語気も柔軟になります。</p> <p>時には、このような西洋化された副詞句が非常に長くなります。例えば「他知其不可为而为之地还是去赴了约（彼はそれが不可能であると知りながら約束を果たしに行った）」のようにです。このような文は「地」を削除し、句読点に置き換えるべきです。現在最も流行している副詞は「成功地」です。あるとき、私は入学試験のために「国父誕辰の感想」という作文の題を出しましたが、10人の受験生のうち少なくとも6人が「国父孙中山先生成功地推翻了满清（国父孫中山先生は成功裏に満清を覆しました）」と言いました。この副詞「成功地」はここでは全く意味がありません。なぜなら、覆すことができれば成功したということであり、繰り返す必要はありません。同様に、「成功地发明了相对论（相対性理論を成功裏に発明した）」「成功地泳渡了直布罗陀海峡（ジブラルタル海峡を成功裏に泳ぎ渡った）」も冗長な表現です。世の中の万事において、達成されたことには必ず「成功地」を付けなければならないのでしょうか？実に煩わしいことです。</p> <h2 id="六">六</h2> <p>白話文では形容詞を使うと必ず「的」を付けなければならないようです。「的」がなければ文が成り立たないかのようです。白話文ではこの「的」という字が形容詞の取り除けない尻尾のようになっています。少しでも「的」を使わずに済む方法を学ぶことが、白話文作家の第一の課題かもしれません。実際、多くの名作家はこの点において非常に自由であり、いくつかの例を挙げてみましょう。</p> <blockquote> <p>(一) 月光是隔了树照过来的，高处丛生的灌木，落下参差的斑驳的黑影，峭楞楞如鬼一般；弯弯的杨柳的稀疏的倩影，却又像是画在荷叶上。</p> <p>(二) 最后的鸽群……也许是误认这灰暗的凄冷的天空为夜色的来袭，或是也预感到风雨的将至，遂过早地飞回它们温暖的木舍。</p> <p>(三) 白色的鸭也似有一点烦躁了，有不洁的颜色的都市的河沟里传出它们焦急的叫声。</p> </blockquote> <p>最初の文の「参差的斑驳的黑影」と「弯弯的杨柳的稀疏的倩影」は、単調で硬直した重複表現です。こんなに多くの「的」を使う必要がありますか？「参差而斑驳」と言えない理由は何でしょうか？後半の「弯弯的杨柳投下稀疏的倩影」という原意は、「弯弯的、杨柳的、稀疏的、倩影」と自然に分けられてしまいます。第二の文でも少なくとも三つの「的」を省略できます。「灰暗的凄冷的天空」を「灰暗而凄冷的天空」、「夜色的来袭」と「风雨的将至」を「夜色来袭」と「风雨将至」に変えるだけで、ずっと良くなります。前述のように、中国語は短い文を好み、英語は名詞、特に抽象名詞を好みます。「夜色来袭」は何と力強い表現でしょう。「夜色的来袭」では柔らかくなりすぎます。最も悪いのは第三の文です。「白色的鸭」と「白鸭」に何の違いがあるのでしょうか？「有不洁的颜色的都市的河沟」は「的」を乱用しており、最も惑わしい表現です。この文の原意は「颜色不洁的都市河沟」（本来は「都市的脏河沟」と簡略化可能）ですが、読者は「有不洁的、颜色的、都市的、河沟」と読むことになります。</p> <p>現在、形容詞には新たな流行があります。それは、学術的な面貌を持つ抽象名詞を使って飾ることです。さらにいくつかの例を挙げてみましょう。</p> <blockquote> <p>这是难度很高的技巧。</p> <p>他不愧为热情型的人。</p> <p>太专业性的字眼恐怕查不到吧。</p> </blockquote> <p>「难度很高的（難易度が非常に高い）」とは何でしょうか？原意は「とても難しい」ということではないでしょうか？同様に、「热情型的人（熱情的な人）」は「熱情な人」、「太专业性的字眼（非常に専門的な言葉）」は「非常に専門的な言葉」ということです。抽象名詞に戻ってきたようなものです。表現が堂々としているように見えますが、内容は空虚なままです。</p> <p>形容詞や修飾語（modifier）は名詞の前に置くことも、名詞の後に置くこともできます。前者を前飾り、後者を後飾りと呼びます。フランス語では後飾りが多く、ジッドの作品「田園交響曲（La Symphonie pastorale）」や「地上の糧（Les Nourritures terrestres）」では、形容詞が名詞の後に置かれています。これを英語に訳すと「The Pastoral Symphony」となり、前飾りになります。中国語では「田园交响乐」と訳されますが、これも前飾りです。</p> <p>英語の形容詞は通常前飾りですが、時には後飾りにすることもできます。例えば、雪莱の詩の中に「One too like thee–tameless, and swift, and proud」という表現があります。形容詞句や節はしばしば後飾りにされます。例えば、「man of action（行動する人）」「I saw a man who looked like your brother（私はあなたの兄弟に似た男を見た）」のようにです。（※英語：この例は非常に良いので、注意してください！）</p> <p>現在の白話文では、なぜかほとんどが前飾りになっており、後飾りの技術を知らないようです。例えば、前述の英語の文を中国語で言うと、「我见到一个长得像你兄弟的男人（私はあなたの兄弟に似た男を見た）」と言う人がほとんどですが、「我见到一个男人，长得像你兄弟（私はある男を見た。彼はあなたの兄弟に似ている）」と言う人は非常に少ないです。文が短ければ前飾りでも構いませんが、文が長くなると前飾りはあまりにも硬くなります。例えば、「我见到一个长得像你兄弟说话也有点像他的陌生男人（私はあなたの兄弟に似ていて、話し方も少し似ている見知らぬ男を見ました）」という文は、前飾りだと冗長になりすぎます。後飾りにすれば、自然で柔軟な文になります。「我见到一个陌生男人，长得像你兄弟，说话也有点像他（私は見知らぬ男を見ました。彼はあなたの兄弟に似ていて、話し方も少し似ています）」のようにです。実際、文言文の文はしばしば後飾りです。例えば、司馬遷が項羽と李広について書いた次の二つの文です。</p> <blockquote> <p>籍长八尺余，力能扛鼎，才气过人。</p> <p>广为人长，猿臂，其善射亦天性也。</p> </blockquote> <p>これらの文は現代の白話文では「項籍は身長八尺で、力は鼎を担ぐことができ、才気は人に勝る」「李広は背が高く、手は猿のように長く、射撃の才能は天性である」といった具合に、前飾りにされることが多いです。</p> <p>後飾りの文はそのまま続けることができ、長くなっても自然であり、弾力性があります。しかし、前飾りの文は名詞が下に押しつぶされるようになり、長くなると冗長で緊張感があり、負担に耐えられなくなります。したがって、前飾りの文は閉じた文であり、後飾りの文は開かれた文です。</p> <h2 id="七">七</h2> <p>動詞は英語の文法において重要な役割を果たしており、動詞に関する論争が多くあります。英語の時制の変化は、他の欧州の言語に比べて単純です。スペイン語では一つの動詞が78種類の時制に変化します。中国語の名詞は単数・複数や陰陽を区別せず、動詞も時制を変えないため、多くの手間を省いています。「秦人不暇自哀，而后人哀之。后人哀之而不鉴之，亦使后人而复哀后人也。」という文は、もし西洋語で表現すれば、どれほど多くの変化をしなければならないか分かりません。</p> <p>中国語には元々時制の変化がないため、この点では西洋化を免れています。中国文化は非常に精妙であり、中国語も時間の前後を区別するのに拙くはありません。散文では「人之将死，其言也善」「議論未定，而兵已渡河」といった表現があります。詩では「已凉天气未寒时」といった表現があります。これらの中の時制は十分に明確です。蘇軾の七絶「荷尽已无擎雨盖，菊残犹有傲霜枝。一年好景君须记，最是橙黄橘绿时。」の中の時系列には、すでに過ぎ去ったこと、まさに過ぎようとしていること、そして現在進行中のことが含まれており、正確かつ精緻に区別されています。</p> <p>中国語の動詞は西洋化に適さないため、一般の人はせいぜい「我们将要开始比赛了（私たちは試合を始めるつもりです）」のような文を書くことができますが、深刻な問題ではありません。動詞の西洋化の危機は主に二つの端にあります。一つは、単純な動詞が「弱動詞+抽象名詞」という複合動詞に分解されることです。前述のように、「一架客机失事，死了九十八人（ある旅客機が事故を起こし、98人が死亡した）」と言わずに、「一架客机失事，造成九十八人死亡（ある旅客機が事故を起こし、98人の死亡をもたらした）」と言うのは、遠回しで不自然です。もう一つは、受動態の表現を採用することです。すべての他動詞は、行為者から受け手に及ぶものです。したがって、他動詞を使って一つの事柄を述べる場合、次の三つの方法のいずれかになります。</p> <blockquote> <p>(一) 哥伦布发现了新大陆。</p> <p>(二) 新大陆被哥伦布发现了。</p> <p>(三) 新大陆被发现了。</p> </blockquote> <p>一つ目の文は行為者が主語となり、能動態を表します。二つ目の文は受け手が主語となり、受動態を表します。三つ目の文も受け手が主語ですが、行為者が示されていません。これらの三つの文は英語では一般的ですが、中国語では一つ目の文が最も一般的で、二つ目と三つ目はそれほど多くありません。三つ目の文は一般的に能動態に変わります。例えば、「糖都吃光了（砂糖はすでに食べ尽くされた）」「戏看完了（芝居は見終わった）」「稿写了一半（原稿は半分書かれた）」「钱已经用了（お金はすでに使われた）」のようにです。</p> <p>現在の西洋化の傾向は、元々能動態で表現できる場面を受動態に置き換えることです。次の例文を見てください。</p> <blockquote> <p>(一) 我不会被你这句话吓倒。</p> <p>(二) 他被怀疑偷东西。</p> <p>(三) 他这意见不被人们接受。</p> <p>(四) 他被升为营长。</p> <p>(五) 他不被准许入学。</p> </blockquote> <p>これらの文はすべて不自然で、中国語のエコロジーに反しています。実際、これらはすべて能動態に戻すことができます。</p> <blockquote> <p>(一) 你这句话吓不倒我。</p> <p>(二) 他有偷东西的嫌疑。</p> <p>(三) 他这意见大家都不接受。</p> <p>(四) 他升为营长。</p> <p>(五) 他未获准入学。</p> </blockquote> <p>同様に、「他被选为议长（彼は議長に選ばれた）」は「他当选为议长（彼は議長に当選した）」の方が自然です。「他被指出许多错误（彼は多くの誤りを指摘された）」は「有人指出他许多错误（多くの人が彼の多くの誤りを指摘した）」の方が自然です。「他常被询及该案的真相（彼はこの事件の真相についてよく尋ねられる）」は「常有人问起他该案的真相（この事件の真相について彼によく質問する人がいる）」の方が自然です。</p> <p>現在の中国語の受動態には二つの問題があります。一つは、不自然な受動態を使って自然な能動態を置き換えることです。もう一つは、千篇一律に「被」という字だけを使うことです。「受難」から「遇害」、また「挨打」から「遭殃」、さらには「轻人指点」から「为世所重」まで、使える言葉はたくさんあり、必ずしも一つの公式に従う必要はありません。</p> <h2 id="八">八</h2> <p>中国語の西洋化には重いものと軽いもの、暗いものと明るいものがありますが、その範囲はますます広がり、現象はますます顕著になり、加速しています。以上、名詞、接続詞、前置詞、副詞、形容詞、動詞などの西洋化の病について少し分析してみました。読者の皆さんもこれを参考にし、警戒すべきことを知っていただければと思います。</p> <p>楽観的な人々はよく言います。「言語は生きている、川のように前進を止めることはできない。西洋化は必然的な傾向である」と。言語は確かに生きていますが、健康に生きるべきであり、病を抱えて長生きするべきではありません。川の比喩も忘れてはいけません。さもなければ、氾濫が起こることもあります。西洋化の傾向は確かに避けられませんが、あまりにも速すぎたり、過度であったりするべきではなく、長所を取り入れるべきであり、短所を害するべきではありません。</p> <p>前衛的な作家の中には、「語法は我々のためにあるのではない」と考える人もいます。詩人には越境する自由があります。私がこの記事で中国語のエコロジーを強調するのは、一般的な作文に関するものであり、文学的な創作を規範する意図はありません。前衛的な作家は安心して缪思を追い求め、語法の奴隷になることなく創作に励むことができます。</p> <p>しかし、一つだけ知っておくべきことがあります。中国語は何千年もの間発展してきました。清の通りから高妙なものまで、千錘百練の常態があります。常態を知らずに無謀に変化を求めると、献拙に終わることがあります。変化の妙は常態があってこそ際立ちます。常態が失われると、残るのは混乱であり、変化ではありません。</p> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer>]]></content><author><name></name></author><category term="Writing"/><category term="Chinese"/><category term="Expression"/><category term="Article"/><summary type="html"><![CDATA[余光中氏の「中国語の常態と異常態」からの転載であり、すべての意見に完全に同意するものではありません]]></summary></entry><entry><title type="html">学術研究向けLinuxサーバーの構築手順</title><link href="https://waynexucn.github.io//ja_JP/blog/2024/%E9%83%A8%E7%BD%B2%E7%94%A8%E4%BA%8E%E5%AD%A6%E6%9C%AF%E7%A0%94%E7%A9%B6%E7%9A%84Linux%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="alternate" type="text/html" title="学術研究向けLinuxサーバーの構築手順"/><published>2024-08-24T14:34:28+00:00</published><updated>2024-08-24T14:34:28+00:00</updated><id>https://waynexucn.github.io//blog/2024/%E9%83%A8%E7%BD%B2%E7%94%A8%E4%BA%8E%E5%AD%A6%E6%9C%AF%E7%A0%94%E7%A9%B6%E7%9A%84Linux%E6%9C%8D%E5%8A%A1%E5%99%A8</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/%E9%83%A8%E7%BD%B2%E7%94%A8%E4%BA%8E%E5%AD%A6%E6%9C%AF%E7%A0%94%E7%A9%B6%E7%9A%84Linux%E6%9C%8D%E5%8A%A1%E5%99%A8/"><![CDATA[<p>最近、私はMiniPCをUbuntuベースのサーバーに改造し、将来の研究ニーズに対応できるように設定しました。</p> <p>Linuxの知識があまりなかったため、構築にあたり学習と試行錯誤を重ね、その手順や発生しうる問題、解決策を記録しました。</p> <hr/> <h2 id="ubuntuで管理者権限を持つ新規ユーザーの作成">Ubuntuで管理者権限を持つ新規ユーザーの作成</h2> <p>クラウドサービスやベンダー提供、または自分でセットアップしたUbuntuサーバーでは、デフォルトユーザー（default User）が作成されます。通常、このユーザーは<code class="language-plaintext highlighter-rouge">sudo</code>コマンドで一時的に権限を昇格できますが、本質的には一般ユーザーです（管理者アカウントではありません）。同じ管理者権限を持つカスタムユーザーを作成したい場合は、以下の手順で行います。</p> <h3 id="1-新規ユーザーの作成ホームディレクトリとログインシェル指定">1. 新規ユーザーの作成（ホームディレクトリとログインシェル指定）</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>useradd <span class="nt">-d</span> <span class="s2">"/home/&lt;user_name&gt;"</span> <span class="nt">-m</span> <span class="nt">-s</span> <span class="s2">"/bin/bash"</span> &lt;user_name&gt;
</code></pre></div></div> <p>パラメータの説明：</p> <ul> <li><code class="language-plaintext highlighter-rouge">-d "/home/&lt;user_name&gt;"</code>：ユーザーのホームディレクトリを <code class="language-plaintext highlighter-rouge">/home/&lt;user_name&gt;</code> に設定</li> <li><code class="language-plaintext highlighter-rouge">-m</code>：ホームディレクトリを自動作成</li> <li><code class="language-plaintext highlighter-rouge">-s "/bin/bash"</code>：デフォルトのログインシェルを <code class="language-plaintext highlighter-rouge">/bin/bash</code> に指定</li> </ul> <h3 id="2-新規ユーザーに管理者権限を付与">2. 新規ユーザーに管理者権限を付与</h3> <p>sudo（管理者）権限を持つユーザーを作成するには、以下のコマンドを実行します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>useradd <span class="nt">-d</span> <span class="s2">"/home/&lt;user_name&gt;"</span> <span class="nt">-m</span> <span class="nt">-s</span> <span class="s2">"/bin/bash"</span> <span class="nt">-G</span> <span class="nb">sudo</span> &lt;user_name&gt;
</code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">-G sudo</code>：<code class="language-plaintext highlighter-rouge">&lt;user_name&gt;</code> を <code class="language-plaintext highlighter-rouge">sudo</code> グループに追加し、管理者権限を付与</li> </ul> <h3 id="3-新規ユーザーのパスワード設定">3. 新規ユーザーのパスワード設定</h3> <p>新規ユーザーはデフォルトでパスワードがありません。以下のコマンドで <code class="language-plaintext highlighter-rouge">&lt;user_name&gt;</code> のパスワードを設定します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>passwd &lt;user_name&gt;
</code></pre></div></div> <p>コマンド実行後、2回パスワード入力を求められます。セキュリティ上、入力時に文字や記号は表示されません。パスワードを入力し、<code class="language-plaintext highlighter-rouge">Enter</code> で確定してください。</p> <p>以上で、管理者権限を持つ新規ユーザー <code class="language-plaintext highlighter-rouge">&lt;user_name&gt;</code> を作成できます。<code class="language-plaintext highlighter-rouge">sudo</code> コマンドで管理者作業が可能です。</p> <hr/> <h2 id="ターミナルのプロンプト美化">ターミナルのプロンプト美化</h2> <p>見た目が良く使いやすいプロンプトは作業効率を高めます。ここでは<code class="language-plaintext highlighter-rouge">zsh</code>を使った美化方法を紹介します。詳細は<a href="/ja_JP/blog/2022/Linux实用配置记录/">以前の記録</a>を参照してください。</p> <hr/> <h2 id="サーバーのリモートアクセス有効化">サーバーのリモートアクセス有効化</h2> <p>サーバーを物理的に離れた場所から操作するには、SSHサービスのインストールと設定、防火壁の調整が必要です。</p> <h3 id="1-sshサービスのインストールと設定">1. SSHサービスのインストールと設定</h3> <p>基本的なSSHアクセスのみ必要な場合は、<code class="language-plaintext highlighter-rouge">openssh-server</code>のインストールとサービス起動で十分です。セキュリティを高めるには、<code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code>の設定を最適化します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>openssh-server
</code></pre></div></div> <p>インストール後、SSHサービスの状態を確認します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status ssh
</code></pre></div></div> <ul> <li> <p><strong>設定の推奨事項</strong>：</p> <ul> <li> <p><strong>rootユーザーの直接ログイン禁止（推奨）</strong>：rootでの直接ログインを避け、セキュリティを向上させます。<code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code>で<code class="language-plaintext highlighter-rouge">PermitRootLogin</code>を<code class="language-plaintext highlighter-rouge">no</code>に設定。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/ssh/sshd_config
</code></pre></div> </div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PermitRootLogin no
</code></pre></div> </div> </li> <li> <p><strong>許可ユーザーの制限</strong>：<code class="language-plaintext highlighter-rouge">AllowUsers</code>でSSHログインを許可するユーザーを指定し、セキュリティを強化。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AllowUsers &lt;user_name&gt;
</code></pre></div> </div> </li> <li> <p><strong>デフォルト以外のポート使用（任意）</strong>：SSHポートを22以外（例：2200）に変更し、スキャン攻撃を減らします。防火壁設定も合わせて変更してください。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Port 2200
</code></pre></div> </div> </li> <li> <p><strong>アイドル接続の自動切断</strong>：未使用のSSHセッションを自動切断するには、以下を追加。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ClientAliveInterval 300
ClientAliveCountMax 2
</code></pre></div> </div> </li> </ul> </li> </ul> <p>設定後、SSHサービスを再起動して反映します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ssh
</code></pre></div></div> <h3 id="2-ufwファイアウォールの設定">2. UFWファイアウォールの設定</h3> <p>UFWファイアウォールを有効にしている場合は、SSHポートを開放します。デフォルト（22番）の場合：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw allow ssh
</code></pre></div></div> <p>ポートを変更した場合（例：2200）：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw allow 2200/tcp
</code></pre></div></div> <ul> <li> <p><strong>設定の確認</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw <span class="nb">enable
sudo </span>ufw status
</code></pre></div> </div> </li> </ul> <h3 id="3-ssh接続の確認">3. SSH接続の確認</h3> <p>クライアント（例：Windows）からサーバーへの接続をテストします。Windowsでは <a href="https://www.putty.org/">PuTTY</a> や <a href="https://aka.ms/terminal">Windows Terminal</a> などのSSH対応ターミナルを推奨します。</p> <p>telnetコマンドで接続テストも可能ですが、本番環境ではSSHクライアントを使用してください。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>telnet &lt;remote_ip&gt; &lt;remote_port&gt;
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">&lt;remote_ip&gt;</code>はサーバーのIPアドレス、<code class="language-plaintext highlighter-rouge">&lt;remote_port&gt;</code>はSSHポート（デフォルト22）に置き換えてください。</p> <h3 id="4-xauthorityファイルの権限問題修正">4. .Xauthorityファイルの権限問題修正</h3> <p><code class="language-plaintext highlighter-rouge">/home/&lt;user_name&gt;/.Xauthority</code>の権限エラーは、root以外で作成された場合に発生します。ユーザーディレクトリの所有権を修正し、必要に応じて<code class="language-plaintext highlighter-rouge">.Xauthority</code>を新規作成します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chown</span> &lt;user_name&gt;:&lt;user_name&gt; <span class="nt">-R</span> /home/&lt;user_name&gt;
</code></pre></div></div> <p>問題が解決しない場合は、以下で新規作成：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-u</span> &lt;user_name&gt; <span class="nb">touch</span> /home/&lt;user_name&gt;/.Xauthority
<span class="nb">sudo chown</span> &lt;user_name&gt;:&lt;user_name&gt; /home/&lt;user_name&gt;/.Xauthority
</code></pre></div></div> <h3 id="5-fail2banの導入推奨">5. Fail2Banの導入（推奨）</h3> <p>SSHへのブルートフォース攻撃対策として<code class="language-plaintext highlighter-rouge">fail2ban</code>を導入します。失敗したログイン試行を検知し、該当IPを一時的に遮断します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>fail2ban
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">fail2ban</code>はSSH保護を自動で有効化します。<code class="language-plaintext highlighter-rouge">/etc/fail2ban/jail.local</code>で詳細設定可能です。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[sshd]
enabled = true
port = 22
maxretry = 5
bantime = 600
</code></pre></div></div> <hr/> <h2 id="サーバーとgithubのssh接続設定">サーバーとGitHubのSSH接続設定</h2> <p>UbuntuサーバーからGitHubへ安全にクローン・プッシュ・プルするためのSSH接続手順です。</p> <h3 id="1-gitのインストールと確認">1. Gitのインストールと確認</h3> <p>まずGitをインストールし、バージョンを確認します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>git
git <span class="nt">--version</span>
</code></pre></div></div> <h3 id="2-gitユーザー情報の設定">2. Gitユーザー情報の設定</h3> <p>GitHubのユーザー名とメールアドレスを設定します（GitHubアカウントと一致させてください）。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git config <span class="nt">--global</span> user.name <span class="s2">"&lt;github_account_name&gt;"</span>
git config <span class="nt">--global</span> user.email <span class="s2">"&lt;github_account_email&gt;"</span>
</code></pre></div></div> <p>この設定は<code class="language-plaintext highlighter-rouge">~/.gitconfig</code>に保存され、全リポジトリで有効です。</p> <h3 id="3-ssh鍵ペアの生成">3. SSH鍵ペアの生成</h3> <p>GitHubと安全に通信するため、SSH鍵ペアを生成します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-C</span> <span class="s2">"&lt;github_account_email&gt;"</span> <span class="nt">-t</span> rsa
</code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">-C "&lt;github_account_email&gt;"</code>：鍵にコメント（通常はメールアドレス）を付与</li> <li><code class="language-plaintext highlighter-rouge">-t rsa</code>：RSAタイプの鍵を生成</li> </ul> <p>コマンド実行後、3回<code class="language-plaintext highlighter-rouge">Enter</code>を押して（デフォルト名・パスフレーズなし）、<code class="language-plaintext highlighter-rouge">~/.ssh</code>に鍵が保存されます。</p> <h3 id="4-ssh公開鍵をgithubに登録">4. SSH公開鍵をGitHubに登録</h3> <ol> <li> <p>公開鍵を表示し、内容をコピーします。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> ~/.ssh/id_rsa.pub
</code></pre></div> </div> </li> <li> <p>GitHubの「Settings」→「SSH and GPG keys」→「New SSH key」で貼り付け、説明を入力して保存します。</p> </li> </ol> <h3 id="5-githubとのssh接続テスト">5. GitHubとのSSH接続テスト</h3> <p>設定後、以下で接続をテストします。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-T</span> git@github.com
</code></pre></div></div> <p>成功すると、以下のようなメッセージが表示されます。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hi &lt;github_account_name&gt;! You've successfully authenticated, but GitHub does not provide shell access.
</code></pre></div></div> <h3 id="6-よくある問題と対処法">6. よくある問題と対処法</h3> <ol> <li> <p><strong>SSH鍵の権限エラー</strong>：権限を正しく設定してください。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod </span>600 ~/.ssh/id_rsa
<span class="nb">chmod </span>644 ~/.ssh/id_rsa.pub
</code></pre></div> </div> </li> <li> <p><strong>SSH Agentへの鍵追加（推奨）</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">eval</span> <span class="s2">"</span><span class="si">$(</span>ssh-agent <span class="nt">-s</span><span class="si">)</span><span class="s2">"</span>
ssh-add ~/.ssh/id_rsa
</code></pre></div> </div> </li> </ol> <hr/> <h2 id="python環境の構築と管理">Python環境の構築と管理</h2> <hr/> <h3 id="miniforge">Miniforge</h3> <p>サーバーでPythonの科学計算環境を管理するため、軽量かつ高速なMiniforgeを採用しました。Miniforgeはconda-forgeチャンネルをデフォルトで利用し、Mambaも統合されています。</p> <h4 id="1-miniforgeのインストール">1. Miniforgeのインストール</h4> <p><a href="https://github.com/conda-forge/miniforge">Miniforge公式GitHub</a>の手順に従い、以下でインストールします。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="s2">"https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-</span><span class="si">$(</span><span class="nb">uname</span><span class="si">)</span><span class="s2">-</span><span class="si">$(</span><span class="nb">uname</span> <span class="nt">-m</span><span class="si">)</span><span class="s2">.sh"</span>
bash Miniforge3-<span class="si">$(</span><span class="nb">uname</span><span class="si">)</span>-<span class="si">$(</span><span class="nb">uname</span> <span class="nt">-m</span><span class="si">)</span>.sh
</code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">/usr/local/miniforge3</code>へのインストールを推奨（複数ユーザーで共有可能、変更はrootのみ）</li> <li> <p>ZSH利用時は<code class="language-plaintext highlighter-rouge">.zshrc</code>にパスを追加</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$usr</span><span class="s2">/local/miniforge3/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
</code></pre></div> </div> </li> <li><code class="language-plaintext highlighter-rouge">.zshrc</code>を再読み込み：<code class="language-plaintext highlighter-rouge">source ~/.zshrc</code></li> </ul> <h4 id="2-mamba環境の初期化">2. Mamba環境の初期化</h4> <p>インストール後、Mambaを初期化します（例：<code class="language-plaintext highlighter-rouge">/usr/local/miniforge3</code>にインストールした場合）。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/local/miniforge3/bin/mamba init
</code></pre></div></div> <p>ZSHでうまくいかない場合は、<code class="language-plaintext highlighter-rouge">.bashrc</code>の設定を<code class="language-plaintext highlighter-rouge">.zshrc</code>にコピーしてください。</p> <h4 id="3-環境の作成と管理">3. 環境の作成と管理</h4> <p>複数ユーザー環境では、root権限（<code class="language-plaintext highlighter-rouge">sudo su</code>）で環境を作成・管理することを推奨します。</p> <h5 id="新規環境の作成">新規環境の作成</h5> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mamba create <span class="nt">--name</span> &lt;new_env_name&gt; <span class="nv">python</span><span class="o">=</span>3.11 <span class="nt">--no-default-packages</span>
</code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">--name &lt;new_env_name&gt;</code>：環境名</li> <li><code class="language-plaintext highlighter-rouge">python=3.11</code>：Pythonバージョン指定</li> <li><code class="language-plaintext highlighter-rouge">--no-default-packages</code>：Pythonのみインストール</li> </ul> <p>一般ユーザーはホームディレクトリ配下にプライベート環境を作成可能：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mamba create <span class="nt">--prefix</span> /home/username/myenv <span class="nv">python</span><span class="o">=</span>3.11 <span class="nt">--no-default-packages</span>
</code></pre></div></div> <h5 id="環境の削除">環境の削除</h5> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mamba remove <span class="nt">--name</span> &lt;env_name&gt; <span class="nt">--all</span>
mamba remove <span class="nt">--prefix</span> /path/to/directory <span class="nt">--all</span>
</code></pre></div></div> <h4 id="4-よく使うパッケージのインストール">4. よく使うパッケージのインストール</h4> <p><code class="language-plaintext highlighter-rouge">base</code>環境は直接変更せず、用途ごとに専用環境を作成してください。例：<code class="language-plaintext highlighter-rouge">JupyterHub</code>のインストール</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mamba create <span class="nt">--name</span> ml_env <span class="nv">python</span><span class="o">=</span>3.12 jupyterhub jupyterlab notebook notebook scipy numpy numpy
mamba activate ml_env
mamba <span class="nb">install </span>jupyter-lsp-python jupyterlab-lsp jupyterlab-git jupyterlab_execute_time
</code></pre></div></div> <h4 id="5-権限による更新制限">5. 権限による更新制限</h4> <p>一般ユーザーがシステム環境を更新しようとすると、権限エラーが発生します。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mamba update <span class="nt">--all</span>
</code></pre></div></div> <p>エラー例：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>EnvironmentNotWritableError: The current user does not have write permissions to the target environment.
  environment location: /usr/local/miniforge3
  uid: 1000
  gid: 1000
</code></pre></div></div> <p>一時的に<code class="language-plaintext highlighter-rouge">base</code>環境を更新する場合は<code class="language-plaintext highlighter-rouge">sudo</code>を利用：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> /usr/local/miniforge3/bin/mamba update <span class="nt">--all</span>
</code></pre></div></div> <hr/> <h3 id="poetry">Poetry</h3> <p>PoetryはPythonプロジェクトの依存管理・仮想環境管理・パッケージ公開を効率化するツールです。</p> <h4 id="1-poetryのインストール">1. Poetryのインストール</h4> <p>Python 3.7以上が必要です。</p> <ol> <li> <p>公式インストールスクリプトを利用：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-sSL</span> https://install.python-poetry.org | python3 -
</code></pre></div> </div> </li> <li> <p>PATHに追加：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.local/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
</code></pre></div> </div> </li> <li> <p>インストール確認：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nt">--version</span>
</code></pre></div> </div> </li> </ol> <h4 id="2-新規プロジェクトの作成">2. 新規プロジェクトの作成</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry new my_project
</code></pre></div></div> <p>生成されるディレクトリ構成：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>my_project/
├── my_project/
│   └── __init__.py
├── pyproject.toml
└── tests/
    └── __init__.py
</code></pre></div></div> <p>既存プロジェクトの場合：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>existing_project
poetry init
</code></pre></div></div> <h4 id="3-依存関係の管理">3. 依存関係の管理</h4> <ul> <li> <p>本番依存の追加：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry add requests
</code></pre></div> </div> </li> <li> <p>開発依存の追加：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry add pytest <span class="nt">--dev</span>
</code></pre></div> </div> </li> <li> <p>依存のインストール：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">install</span>
</code></pre></div> </div> </li> </ul> <hr/> <h4 id="4-仮想環境の管理">4. 仮想環境の管理</h4> <ul> <li> <p>仮想環境の有効化：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry shell
</code></pre></div> </div> </li> <li> <p>仮想環境の終了：</p> <p><code class="language-plaintext highlighter-rouge">exit</code></p> </li> <li> <p>仮想環境のパス確認：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">env </span>info <span class="nt">--path</span>
</code></pre></div> </div> </li> <li> <p>仮想環境の削除：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">env </span>remove python
</code></pre></div> </div> </li> </ul> <h4 id="5-依存ロックファイルの管理">5. 依存ロックファイルの管理</h4> <ul> <li> <p>依存バージョンの更新：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry update
</code></pre></div> </div> </li> <li> <p>ロックファイルに基づくインストール：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">install</span>
</code></pre></div> </div> </li> </ul> <h4 id="6-スクリプトコマンドの実行">6. スクリプト・コマンドの実行</h4> <ul> <li> <p>スクリプトの実行：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python script.py
</code></pre></div> </div> </li> <li> <p>テストの実行：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run pytest
</code></pre></div> </div> </li> </ul> <h4 id="7-pythonパッケージの公開">7. Pythonパッケージの公開</h4> <ul> <li> <p>パッケージのビルド：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry build
</code></pre></div> </div> </li> <li> <p>PyPIへの公開：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry publish <span class="nt">--build</span>
</code></pre></div> </div> <p>テスト用PyPIの場合：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry publish <span class="nt">--repository</span> testpypi
</code></pre></div> </div> </li> </ul> <hr/> <p>以下は計量経済学分野でR環境を構築する手順です。RおよびRStudioのインストール、主要パッケージの導入方法をまとめます。</p> <hr/> <h2 id="ubuntuで計量経済学向けr環境を構築する">Ubuntuで計量経済学向けR環境を構築する</h2> <p>計量経済学では、Rは経済データの処理や回帰分析、時系列分析などに適しています。</p> <h3 id="1-rのインストール">1. Rのインストール</h3> <p>Ubuntu標準リポジトリのRは最新版でない場合があります。最新バージョンを入手するにはCRANリポジトリを利用します。</p> <ol> <li> <p><strong>CRANリポジトリの追加</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common dirmngr <span class="nt">-y</span>
</code></pre></div> </div> </li> <li> <p><strong>CRANのGPGキー追加</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">-qO-</span> https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | <span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc
</code></pre></div> </div> </li> <li> <p><strong>GPGキーの確認（任意）</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg <span class="nt">--show-keys</span> /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc
</code></pre></div> </div> </li> <li> <p><strong>CRANリポジトリをaptソースに追加</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>add-apt-repository <span class="s2">"deb https://cloud.r-project.org/bin/linux/ubuntu </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2">-cran40/"</span>
</code></pre></div> </div> </li> <li> <p><strong>Rと開発パッケージのインストール</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>r-base r-base-dev <span class="nt">-y</span>
</code></pre></div> </div> </li> </ol> <h3 id="2-rstudioのインストール">2. RStudioのインストール</h3> <p>RStudioはデータ分析や可視化に便利なIDEです。<a href="https://posit.co/download/rstudio-server/">公式ガイド</a>を参照してください。</p> <ol> <li>RStudio Server最新版をダウンロード</li> <li> <p><code class="language-plaintext highlighter-rouge">dpkg</code>でインストール</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>dpkg <span class="nt">-i</span> rstudio-server-&lt;version&gt;.deb
</code></pre></div> </div> </li> <li> <p>インストール確認</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status rstudio-server
</code></pre></div> </div> </li> </ol> <p>RStudio Serverは<code class="language-plaintext highlighter-rouge">http://&lt;your-server-ip&gt;:8787</code>でアクセスできます。</p> <h3 id="3-計量経済学関連rパッケージのインストール">3. 計量経済学関連Rパッケージのインストール</h3> <ol> <li> <p><strong>システム依存パッケージのインストール</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential libssl-dev libcurl4-openssl-dev libxml2-dev
</code></pre></div> </div> </li> <li> <p><strong>主要パッケージのインストール</strong>：</p> <p>Rコンソールで以下を実行：</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">chooseCRANmirror</span><span class="p">(</span><span class="n">graphics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"tidyverse"</span><span class="p">,</span><span class="w"> </span><span class="s2">"data.table"</span><span class="p">,</span><span class="w"> </span><span class="s2">"broom"</span><span class="p">,</span><span class="w"> </span><span class="s2">"plm"</span><span class="p">,</span><span class="w"> </span><span class="s2">"forecast"</span><span class="p">,</span><span class="w"> </span><span class="s2">"lmtest"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sandwich"</span><span class="p">,</span><span class="w"> </span><span class="s2">"stargazer"</span><span class="p">))</span><span class="w">
</span></code></pre></div> </div> <ul> <li><code class="language-plaintext highlighter-rouge">tidyverse</code>：データ処理・可視化</li> <li><code class="language-plaintext highlighter-rouge">data.table</code>：高速データ処理</li> <li><code class="language-plaintext highlighter-rouge">broom</code>：回帰結果の整形</li> <li><code class="language-plaintext highlighter-rouge">plm</code>：パネルデータ回帰</li> <li><code class="language-plaintext highlighter-rouge">forecast</code>：時系列分析</li> <li><code class="language-plaintext highlighter-rouge">lmtest</code>・<code class="language-plaintext highlighter-rouge">sandwich</code>：計量経済学的検定・ロバスト標準誤差</li> <li><code class="language-plaintext highlighter-rouge">stargazer</code>：回帰結果の表形式出力</li> </ul> </li> <li> <p><strong>高度な計量経済学ツール</strong>：</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"AER"</span><span class="p">,</span><span class="w"> </span><span class="s2">"urca"</span><span class="p">,</span><span class="w"> </span><span class="s2">"vars"</span><span class="p">))</span><span class="w">
</span></code></pre></div> </div> </li> <li> <p><strong>金融時系列分析パッケージ（任意）</strong>：</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"quantmod"</span><span class="p">,</span><span class="w"> </span><span class="s2">"TTR"</span><span class="p">,</span><span class="w"> </span><span class="s2">"zoo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"xts"</span><span class="p">))</span><span class="w">
</span></code></pre></div> </div> </li> </ol> <h3 id="4-githubトークンを使ったプライベートパッケージのインストール">4. GitHubトークンを使ったプライベートパッケージのインストール</h3> <p>GitHubからパッケージをインストールする場合、API制限回避のためトークン利用を推奨します。</p> <ol> <li> <p>Rコンソールでトークン生成：</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">usethis</span><span class="o">::</span><span class="n">create_github_token</span><span class="p">()</span><span class="w">
</span></code></pre></div> </div> </li> <li> <p>GitHubでPersonal Access Tokenを作成</p> </li> <li> <p>R環境にトークンを設定：</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gitcreds</span><span class="o">::</span><span class="n">gitcreds_set</span><span class="p">()</span><span class="w">
</span></code></pre></div> </div> </li> </ol> <h3 id="5-サンプルplmパッケージでパネルデータ回帰">5. サンプル：plmパッケージでパネルデータ回帰</h3> <ol> <li> <p><strong>plmのインストール</strong>：</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"plm"</span><span class="p">)</span><span class="w">
</span></code></pre></div> </div> </li> <li> <p><strong>plmの利用例</strong>：</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">plm</span><span class="p">)</span><span class="w">

</span><span class="c1"># サンプルパネルデータ</span><span class="w">
</span><span class="n">data</span><span class="p">(</span><span class="s2">"Produc"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"plm"</span><span class="p">)</span><span class="w">
</span><span class="n">pdata</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pdata.frame</span><span class="p">(</span><span class="n">Produc</span><span class="p">,</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"state"</span><span class="p">,</span><span class="w"> </span><span class="s2">"year"</span><span class="p">))</span><span class="w">

</span><span class="c1"># 固定効果モデル</span><span class="w">
</span><span class="n">fe_model</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plm</span><span class="p">(</span><span class="nf">log</span><span class="p">(</span><span class="n">gsp</span><span class="p">)</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">pcap</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">hwy</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">water</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">util</span><span class="p">),</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pdata</span><span class="p">,</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"within"</span><span class="p">)</span><span class="w">
</span><span class="n">summary</span><span class="p">(</span><span class="n">fe_model</span><span class="p">)</span><span class="w">
</span></code></pre></div> </div> <p>以下は整理优化后的指南，以帮助更有效地同步数据、安装字体、并处理 Nvidia 驱动程序和库的相关问题。</p> </li> </ol> <hr/> <h2 id="其他问题">其他问题</h2> <hr/> <h3 id="1-データ同期">1. データ同期</h3> <p>ローカルデータをリモートサーバーに同期するには、<code class="language-plaintext highlighter-rouge">rsync</code>が効率的です。詳細は<a href="https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories">こちらのチュートリアル</a>を参照。</p> <ul> <li> <p><strong>同期コマンド例</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rsync <span class="nt">-r</span> /path/to/sync/ &lt;username&gt;@&lt;remote_host&gt;:&lt;destination_directory&gt;
</code></pre></div> </div> </li> <li> <p><strong>大容量ファイルの進捗監視</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>watch <span class="nt">-n</span> &lt;time_interval&gt; <span class="nb">du</span> <span class="nt">-sh</span> /path/to/large/file
</code></pre></div> </div> </li> </ul> <hr/> <h3 id="2-よく使うフォントのインストール">2. よく使うフォントのインストール</h3> <p>LinuxにはWindowsの標準フォント（ArialやTimes New Romanなど）が含まれていません。これらをインストールし、<code class="language-plaintext highlighter-rouge">matplotlib</code>のキャッシュを削除してフォントを反映させます。</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>msttcorefonts
<span class="nb">rm</span> <span class="nt">-rf</span> ~/.cache/matplotlib
</code></pre></div></div> <hr/> <h3 id="3-ドライバライブラリのバージョン不一致">3. ドライバ／ライブラリのバージョン不一致</h3> <p><code class="language-plaintext highlighter-rouge">nvidia-smi</code>で以下のエラーが出る場合：</p> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Failed to initialize NVML: Driver/library version mismatch
</code></pre></div></div> <p><a href="https://stackoverflow.com/questions/43022843/nvidia-nvml-driver-library-version-mismatch/45319156#45319156">Stack Overflowの解決策</a>を参考にしてください。</p> <ol> <li> <p><strong>サーバーの再起動</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>reboot
</code></pre></div> </div> </li> <li> <p><strong>Nvidiaドライバの再インストール</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt purge nvidia<span class="k">*</span> libnvidia<span class="k">*</span>
<span class="nb">sudo </span>ubuntu-drivers <span class="nb">install
sudo </span>reboot
</code></pre></div> </div> </li> </ol> <hr/> <h3 id="4-nvidiaドライバのアップグレード">4. Nvidiaドライバのアップグレード</h3> <ol> <li> <p><strong>旧ドライバの削除</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt purge <span class="k">*</span>nvidia<span class="k">*</span> <span class="nt">-y</span>
<span class="nb">sudo </span>apt remove <span class="k">*</span>nvidia<span class="k">*</span> <span class="nt">-y</span>
<span class="nb">sudo rm</span> /etc/apt/sources.list.d/cuda<span class="k">*</span>
<span class="nb">sudo </span>apt autoremove <span class="nt">-y</span> <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt autoclean <span class="nt">-y</span>
<span class="nb">sudo rm</span> <span class="nt">-rf</span> /usr/local/cuda<span class="k">*</span>
</code></pre></div> </div> </li> <li> <p><strong>推奨ドライバの検索とインストール</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ubuntu-drivers devices
</code></pre></div> </div> <p>例：バージョン550をインストール</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>libnvidia-common-550-server libnvidia-gl-550-server nvidia-driver-550-server <span class="nt">-y</span>
</code></pre></div> </div> </li> <li> <p><strong>再起動と確認</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>reboot now
</code></pre></div> </div> <p><code class="language-plaintext highlighter-rouge">nvidia-smi</code>でエラーが出る場合は、カーネルヘッダーを再インストールしてください。</p> </li> </ol> <hr/> <h3 id="5-カーネルヘッダーとgccの設定">5. カーネルヘッダーとGCCの設定</h3> <ol> <li> <p><strong>カーネルヘッダーの再インストール</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">--reinstall</span> linux-headers-<span class="si">$(</span><span class="nb">uname</span> <span class="nt">-r</span><span class="si">)</span>
<span class="nb">sudo </span>reboot
</code></pre></div> </div> </li> <li> <p><strong>GCCバージョンの更新</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>gcc-12
<span class="nb">sudo </span>update-alternatives <span class="nt">--install</span> /usr/bin/gcc gcc /usr/bin/gcc-12 12
</code></pre></div> </div> <p>カーネルヘッダー再インストール後、<code class="language-plaintext highlighter-rouge">nvidia-smi</code>が正常に動作するはずです。</p> </li> </ol> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer> <ul> <li><strong>监控大文件的传输进度</strong>：</li> </ul> <p>如果同步的是较大文件，可以用 <code class="language-plaintext highlighter-rouge">watch</code> 命令来监控同步进度：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>watch <span class="nt">-n</span> &lt;time_interval&gt; <span class="nb">du</span> <span class="nt">-sh</span> /path/to/large/file
</code></pre></div></div> <p>该命令会每隔 <code class="language-plaintext highlighter-rouge">&lt;time_interval&gt;</code> 秒刷新一次文件的大小变化。</p> <hr/> <h3 id="2-安装常用字体">2. 安装常用字体</h3> <p>Linux 系统默认不带有一些 Windows 中的常用字体（例如 <code class="language-plaintext highlighter-rouge">Arial</code> 和 <code class="language-plaintext highlighter-rouge">Times New Roman</code>）。安装这些字体可以改善文档和网站的显示效果，特别是那些依赖这些字体的图形输出。安装 Microsoft TrueType 核心字体包并刷新缓存：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>msttcorefonts
<span class="nb">rm</span> <span class="nt">-rf</span> ~/.cache/matplotlib
</code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">msttcorefonts</code> 包括多种 Microsoft 字体，如 Arial 和 Times New Roman。</li> <li>第二个命令删除了 <code class="language-plaintext highlighter-rouge">matplotlib</code> 缓存目录，以确保更新后的字体正确加载。</li> </ul> <hr/> <h3 id="3-驱动程序库版本不匹配">3. 驱动程序/库版本不匹配</h3> <p>在运行 <code class="language-plaintext highlighter-rouge">nvidia-smi</code> 时，如果出现以下错误：</p> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Failed to initialize NVML: Driver/library version mismatch
</code></pre></div></div> <p>可以参考 <a href="https://stackoverflow.com/questions/43022843/nvidia-nvml-driver-library-version-mismatch/45319156#45319156">Stack Overflow 上的解决方案</a>。简要的步骤如下：</p> <ol> <li> <p><strong>重启服务器</strong>：<br/> 某些情况下，重启服务器即可解决问题：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>reboot
</code></pre></div> </div> </li> <li> <p><strong>卸载并重新安装 Nvidia 驱动程序</strong>：</p> <p>如果重启无效，尝试以下命令清除现有的 Nvidia 驱动程序并重新安装：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt purge nvidia<span class="k">*</span> libnvidia<span class="k">*</span>
<span class="nb">sudo </span>ubuntu-drivers <span class="nb">install
sudo </span>reboot
</code></pre></div> </div> </li> </ol> <hr/> <h3 id="4升级-nvidia-驱动程序">4.升级 Nvidia 驱动程序</h3> <p>要升级 Nvidia 驱动程序，可以按照以下步骤进行：</p> <ol> <li> <p><strong>卸载旧驱动程序</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt purge <span class="k">*</span>nvidia<span class="k">*</span> <span class="nt">-y</span>
<span class="nb">sudo </span>apt remove <span class="k">*</span>nvidia<span class="k">*</span> <span class="nt">-y</span>
<span class="nb">sudo rm</span> /etc/apt/sources.list.d/cuda<span class="k">*</span>
<span class="nb">sudo </span>apt autoremove <span class="nt">-y</span> <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt autoclean <span class="nt">-y</span>
<span class="nb">sudo rm</span> <span class="nt">-rf</span> /usr/local/cuda<span class="k">*</span>
</code></pre></div> </div> </li> <li> <p><strong>查找并安装推荐的驱动程序</strong>：</p> <p>运行以下命令来查找推荐的 Nvidia 驱动程序版本：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ubuntu-drivers devices
</code></pre></div> </div> <p>或者通过以下命令安装指定版本（例如 <code class="language-plaintext highlighter-rouge">550</code>，根据系统需求调整版本号）：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>libnvidia-common-550-server libnvidia-gl-550-server nvidia-driver-550-server <span class="nt">-y</span>
</code></pre></div> </div> </li> <li> <p><strong>重启并检查</strong>：</p> <p>重启服务器并使用 <code class="language-plaintext highlighter-rouge">nvidia-smi</code> 检查新驱动是否正常运行：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>reboot now
</code></pre></div> </div> <p>如果 <code class="language-plaintext highlighter-rouge">nvidia-smi</code> 返回以下错误：</p> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver.
</code></pre></div> </div> <p>尝试重新安装内核头文件并重启。</p> </li> </ol> <hr/> <h3 id="5内核头文件安装和-gcc-配置">5.内核头文件安装和 GCC 配置</h3> <p>如遇到内核头文件或 GCC 版本问题，按以下步骤操作：</p> <ol> <li> <p><strong>重新安装内核头文件</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">--reinstall</span> linux-headers-<span class="si">$(</span><span class="nb">uname</span> <span class="nt">-r</span><span class="si">)</span>
<span class="nb">sudo </span>reboot
</code></pre></div> </div> </li> <li> <p><strong>更新 GCC 版本</strong>：</p> <p>如果内核头文件安装过程中遇到 GCC 错误，可以升级到 <code class="language-plaintext highlighter-rouge">gcc-12</code>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>gcc-12
<span class="nb">sudo </span>update-alternatives <span class="nt">--install</span> /usr/bin/gcc gcc /usr/bin/gcc-12 12
</code></pre></div> </div> <p>重新安装内核头文件并重启服务器后，<code class="language-plaintext highlighter-rouge">nvidia-smi</code> 应该能够正常工作。</p> </li> </ol> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer>]]></content><author><name></name></author><category term="Productivity"/><category term="Ubuntu"/><category term="Productivity"/><category term="Deployment"/><category term="Server"/><summary type="html"><![CDATA[Linuxサーバーの構築方法]]></summary></entry><entry><title type="html">Pythonプロジェクトで効率的にパスを管理するためのパラダイム</title><link href="https://waynexucn.github.io//ja_JP/blog/2024/Python%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E8%B7%AF%E5%BE%84%E7%9A%84%E8%8C%83%E5%BC%8F/" rel="alternate" type="text/html" title="Pythonプロジェクトで効率的にパスを管理するためのパラダイム"/><published>2024-07-15T22:18:35+00:00</published><updated>2024-07-15T22:18:35+00:00</updated><id>https://waynexucn.github.io//blog/2024/Python%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E8%B7%AF%E5%BE%84%E7%9A%84%E8%8C%83%E5%BC%8F</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/Python%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E8%B7%AF%E5%BE%84%E7%9A%84%E8%8C%83%E5%BC%8F/"><![CDATA[<h1 id="pythonプロジェクトで効率的にパスを管理するためのパラダイム">Pythonプロジェクトで効率的にパスを管理するためのパラダイム</h1> <p>Pythonプロジェクトでは、コードがデータファイルや設定ファイルの読み込み、ログファイルの出力などで頻繁にパスを扱います。パスをハードコーディングしたり、相対パスを都度結合したりすると、コードが冗長になり、パスのミスでプログラムがクラッシュしやすくなります。これらの問題を解決するため、パス管理の標準的な方法をまとめておくことで、コードの可読性・保守性・クロスプラットフォーム性を高めることができます。</p> <h2 id="パス管理の4つの方法">パス管理の4つの方法</h2> <h3 id="1-プロジェクトルートを設定する">1. プロジェクトルートを設定する</h3> <p>プロジェクトのルートディレクトリ（Project Root）をパス管理の基準とし、他のすべてのパスはこの基準から導出します。各ファイルの相対パスに依存しません。プロジェクトルートの動的な取得例：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># 現在のファイル（例: paths.py）からプロジェクトルートを特定
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">__file__</span><span class="p">).</span><span class="nf">resolve</span><span class="p">().</span><span class="n">parent</span><span class="p">.</span><span class="n">parent</span>
<span class="c1"># PROJECT_ROOT = Path.cwd().resolve().parent.parent
</span></code></pre></div></div> <h4 id="メリット">メリット</h4> <ul> <li>環境変数に依存せず、さまざまな開発環境に対応できる</li> <li>パス管理の基準が統一され、論理が明確</li> </ul> <hr/> <h3 id="2-環境変数でプロジェクトルートを設定する">2. 環境変数でプロジェクトルートを設定する</h3> <p>環境変数（例: <code class="language-plaintext highlighter-rouge">PYTHONPATH</code>）でプロジェクトルートを設定し、すべてのパス計算の基準とします。</p> <ol> <li> <p>環境変数にプロジェクトルートのパスを追加</p> <ul> <li> <p><strong>Linux/MacOS</strong>：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PYTHONPATH</span><span class="o">=</span>/path/to/your/project
</code></pre></div> </div> </li> <li> <p><strong>Windows</strong>：</p> <div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">set</span><span class="w"> </span><span class="nx">PYTHONPATH</span><span class="o">=</span><span class="n">C:\path\to\your\project</span><span class="w">
</span></code></pre></div> </div> </li> </ul> </li> <li> <p>コード内で <code class="language-plaintext highlighter-rouge">os.environ</code> から環境変数を取得：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="c1"># 環境変数からプロジェクトルートを取得
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="sh">"</span><span class="s">PYTHONPATH</span><span class="sh">"</span><span class="p">])</span>
</code></pre></div> </div> </li> </ol> <h4 id="メリット-1">メリット</h4> <ul> <li>コードとファイルシステム構造の分離ができ、パス管理が柔軟</li> <li>開発・本番など複数環境での運用に特に有効</li> </ul> <hr/> <h3 id="3-パスを集中管理する推奨">3. パスを集中管理する（推奨）</h3> <p>専用のパス管理モジュールを作成し、プロジェクト内の重要なパスを一元的に定義します。例として <code class="language-plaintext highlighter-rouge">config/paths.py</code> に主要パスを定義：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># プロジェクトルート
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">__file__</span><span class="p">).</span><span class="nf">resolve</span><span class="p">().</span><span class="n">parent</span><span class="p">.</span><span class="n">parent</span>

<span class="c1"># データフォルダ
</span><span class="n">DATA_RAW</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">raw</span><span class="sh">"</span>
<span class="n">DATA_PROCESSED</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">processed</span><span class="sh">"</span>

<span class="c1"># ログフォルダ
</span><span class="n">LOGS</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">logs</span><span class="sh">"</span>

<span class="c1"># 結果フォルダ
</span><span class="n">RESULTS</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">results</span><span class="sh">"</span>
</code></pre></div></div> <p>他のモジュールでの利用例：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">config.paths</span> <span class="kn">import</span> <span class="n">DATA_RAW</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="n">DATA_RAW</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data.txt</span><span class="sh">"</span>
<span class="k">with</span> <span class="n">file_path</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div></div> <h4 id="メリット-2">メリット</h4> <ul> <li>パス定義を一元管理でき、ディレクトリ構造変更時も修正が容易</li> <li>コードの可読性・モジュール性が向上</li> </ul> <hr/> <h3 id="4-動的パス管理ツールを使う">4. 動的パス管理ツールを使う</h3> <p>Python標準ライブラリやサードパーティツール（例: <code class="language-plaintext highlighter-rouge">importlib.resources</code>）を使い、プロジェクト内ファイルのパスを動的に管理します。特に静的リソースの読み込みに便利です。</p> <ul> <li> <p><strong><code class="language-plaintext highlighter-rouge">importlib.resources</code></strong>（Python 3.9+推奨）：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">importlib.resources</span> <span class="kn">import</span> <span class="n">files</span>

<span class="c1"># ファイルパスの取得
</span><span class="n">file_path</span> <span class="o">=</span> <span class="nf">files</span><span class="p">(</span><span class="sh">"</span><span class="s">data.raw</span><span class="sh">"</span><span class="p">)</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data.txt</span><span class="sh">"</span>

<span class="c1"># ファイルの読み込み
</span><span class="k">with</span> <span class="n">file_path</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div> </div> </li> <li> <p><strong><code class="language-plaintext highlighter-rouge">pkg_resources</code></strong>（従来手法）：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">pkg_resources</span> <span class="kn">import</span> <span class="n">resource_filename</span>

<span class="c1"># ファイルパスの取得
</span><span class="n">file_path</span> <span class="o">=</span> <span class="nf">resource_filename</span><span class="p">(</span><span class="sh">"</span><span class="s">data.raw</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">data.txt</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># ファイルの読み込み
</span><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div> </div> </li> </ul> <h4 id="メリット-3">メリット</h4> <ul> <li>ファイルパスを動的に計算でき、パッケージ化や配布にも対応</li> <li>パスのハードコーディングを避け、汎用性が高い</li> </ul> <hr/> <h2 id="パス管理の応用envファイルで環境変数を管理">パス管理の応用：<code class="language-plaintext highlighter-rouge">.env</code>ファイルで環境変数を管理</h2> <p><code class="language-plaintext highlighter-rouge">.env</code>ファイルでパス設定を一元管理し、<code class="language-plaintext highlighter-rouge">dotenv</code>ライブラリでコードに読み込む方法です。</p> <h4 id="例">例</h4> <ol> <li> <p><strong><code class="language-plaintext highlighter-rouge">.env</code>ファイルを作成：</strong></p> <div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">PROJECT_ROOT</span><span class="p">=</span><span class="s">/path/to/your/project</span>
</code></pre></div> </div> </li> <li> <p><strong>コードで<code class="language-plaintext highlighter-rouge">.env</code>ファイルを読み込む：</strong></p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span><span class="p">,</span> <span class="n">find_dotenv</span>
<span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="n">os</span>

<span class="c1"># プロジェクトルートの .env ファイルを自動検出
</span><span class="n">dotenv_path</span> <span class="o">=</span> <span class="nf">find_dotenv</span><span class="p">()</span>
<span class="nf">load_dotenv</span><span class="p">(</span><span class="n">dotenv_path</span><span class="p">)</span>

<span class="c1"># 環境変数からプロジェクトルートを取得
</span><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">"</span><span class="s">PROJECT_ROOT</span><span class="sh">"</span><span class="p">))</span>

<span class="c1"># サブディレクトリの結合
</span><span class="n">DATA_RAW</span> <span class="o">=</span> <span class="n">PROJECT_ROOT</span> <span class="o">/</span> <span class="sh">"</span><span class="s">data</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">raw</span><span class="sh">"</span>
</code></pre></div> </div> </li> </ol> <h4 id="メリット-4">メリット</h4> <ul> <li><code class="language-plaintext highlighter-rouge">.env</code>ファイルでバージョン管理や環境ごとの設定が容易</li> <li>パスのハードコーディングを避けられる</li> </ul> <h2 id="その他">その他</h2> <ol> <li>パスの区切り文字を統一するには、<code class="language-plaintext highlighter-rouge">os.path.normpath</code>で標準化できます。OSごとの区切り文字（Windowsは<code class="language-plaintext highlighter-rouge">\</code>、Linux/macOSは<code class="language-plaintext highlighter-rouge">/</code>）に自動変換されます。</li> <li><code class="language-plaintext highlighter-rouge">os.path.relpath(file, root_path)</code>で、<code class="language-plaintext highlighter-rouge">file</code>のパスを<code class="language-plaintext highlighter-rouge">root_path</code>からの相対パスに変換できます（<code class="language-plaintext highlighter-rouge">file</code>は<code class="language-plaintext highlighter-rouge">root_path</code>を含む絶対パスである必要あり）。</li> <li>目的のディレクトリが存在しない場合は、<code class="language-plaintext highlighter-rouge">os.makedirs(path, exist_ok=True)</code>で自動作成できます。</li> </ol> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer>]]></content><author><name></name></author><category term="Code"/><category term="Python"/><category term="AdvancedTips"/><summary type="html"><![CDATA[標準的なパス管理手法]]></summary></entry><entry><title type="html">「転載」なぜ今でもブログを書くのか</title><link href="https://waynexucn.github.io//ja_JP/blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E5%9C%A8%E5%86%99%E5%8D%9A%E5%AE%A2/" rel="alternate" type="text/html" title="「転載」なぜ今でもブログを書くのか"/><published>2024-07-14T12:44:14+00:00</published><updated>2024-07-14T12:44:14+00:00</updated><id>https://waynexucn.github.io//blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E5%9C%A8%E5%86%99%E5%8D%9A%E5%AE%A2</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/%E8%BD%AC%E8%BD%BD%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E5%9C%A8%E5%86%99%E5%8D%9A%E5%AE%A2/"><![CDATA[<blockquote> <p><a href="http://nathanmarz.com/blog/you-should-blog-even-if-you-have-no-readers.html">You should blog even if you have no readers</a> より抜粋・翻訳</p> </blockquote> <p>Spencer Fryは「なぜ起業家は執筆すべきか」について素晴らしい記事を書きました。私はさらに補足したいと思います。実は、執筆のメリットは想像以上に大きく、たとえ読者がいなくても（起業家でなくても）、ブログを書く価値は十分にあります。</p> <p>私は今、50以上の未完成の下書きを持っています。その中には、思いついたアイデアや自分自身との議論の過程を記録しただけのものもあります。ほとんどの下書きは公開されることはないかもしれませんが、どの執筆も私に独自の価値をもたらしてくれました。</p> <h3 id="執筆はより良い読者にしてくれる">執筆はより良い読者にしてくれる</h3> <p>ブログを書くことで、他人の作品の読み方が変わりました。</p> <p>適切な構成や表現方法を模索する中で、どんな主張が優れていて、どんな主張が弱いのかをより敏感に察知できるようになりました。他人の推論の穴も見抜きやすくなりました。</p> <p>また、読む際に、表面的に記事を反論する弱い反例に簡単に惑わされなくなりました。ほぼすべての記事には反例があり、それらは個別の特殊なケースに基づいていることが多いです。ネットのコメントでは、こうした反例を指摘する人が多いですが、これらの特殊例はしばしば記事の主旨を無視しています。記事の背後にある前提や背景を理解することで、読書からより多くの価値を得られるようになりました。</p> <p>また、優れた作家の文体にもより注目するようになりました。良い作家がどのように考えを表現するかを頭の中で記録しています。私は以前からPaul Grahamのエッセイが好きでしたが、今では彼の文章構成力をより評価しています。彼は読者を自分の世界に引き込み、自分の視点で物事を考えさせる魅力的な力を持っています。また、Bradford Crossのブログからも多くの良い執筆テクニックを学びました。彼の文章は構成が明快で、短い段落が読みやすさを高めています。</p> <h3 id="執筆はあなたを賢くする">執筆はあなたを賢くする</h3> <p>執筆は自分の思考の穴を明らかにしてくれます。考えを文章にして見返すと、頭の中で考えていたほど説得力がないことに気づきます。執筆は、反論を考えることで自分の主張をより成熟させることを強制します。</p> <p>執筆は思考をより論理的に整理する助けにもなります。これにより、関連する話題でより良い会話ができるようになります。執筆を通じて事前に考えを整理していたおかげで、他人とより深い議論ができたことは数え切れません。</p> <h3 id="その他のメリットはすべておまけ">その他のメリットはすべておまけ</h3> <p>執筆によるその他のメリット――パーソナルブランドの構築、人脈の拡大、より多くのチャンス――これらはすべて副次的なものです。たしかにこれらのメリットは非常に大きいかもしれませんが、それが執筆すべき主な理由ではありません。</p> <p>あなたが執筆すべき理由は、執筆があなたをより良い人間にしてくれるからです。</p> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer>]]></content><author><name></name></author><category term="Collection"/><category term="Discussion"/><category term="Thoughts"/><category term="Blogging"/><summary type="html"><![CDATA[読者がいなくてもブログを書くべき理由]]></summary></entry><entry><title type="html">Word レイアウト記録</title><link href="https://waynexucn.github.io//ja_JP/blog/2024/Word%E6%8E%92%E7%89%88%E8%AE%B0%E5%BD%95/" rel="alternate" type="text/html" title="Word レイアウト記録"/><published>2024-06-23T21:35:00+00:00</published><updated>2024-06-23T21:35:00+00:00</updated><id>https://waynexucn.github.io//blog/2024/Word%E6%8E%92%E7%89%88%E8%AE%B0%E5%BD%95</id><content type="html" xml:base="https://waynexucn.github.io//blog/2024/Word%E6%8E%92%E7%89%88%E8%AE%B0%E5%BD%95/"><![CDATA[<h2 id="word-マクロ">Word マクロ</h2> <h3 id="相互参照の色付け">相互参照の色付け</h3> <p>Word の相互参照や Endnote/Zotero の相互参照を自動でフォーマットし、デフォルト色を青に設定します。</p> <pre><code class="language-basic">Sub CitingColor()
    For i = 1 To ActiveDocument.Fields.Count 'ドキュメント内のすべてのフィールドを走査
        If Left(ActiveDocument.Fields(i).Code, 4) = " REF" Or Left(ActiveDocument.Fields(i).Code, 14) = " ADDIN EN.CITE" Or Left(ActiveDocument.Fields(i).Code, 31) = " ADDIN ZOTERO_ITEM CSL_CITATION" Then 'Word標準の相互参照は" REF"（先頭4文字）、EndNoteは" ADDIN EN.CITE"（先頭14文字）、Zoteroは" ADDIN ZOTERO_ITEM CSL_CITATION"（先頭31文字）。必要に応じて他のタイプも追加可能。
        ActiveDocument.Fields(i).Select '上記のフィールドを選択
        Selection.Font.Color = RGB(31, 77, 160) 'フォント色を設定
        End If
    Next
End Sub
</code></pre> <h3 id="mathtype-一括スケーリング">Mathtype 一括スケーリング</h3> <p>Mathtype 数式の更新後に一部数式の高さが不揃いになる問題を解決するため、再スケーリングするマクロです。</p> <pre><code class="language-basic">Sub EqMathtype_100()
'
' EqMathtype_100 Macro
''
Dim i As Integer
Dim total As Integer
total = ActiveDocument.InlineShapes.Count
i = 0
For Each s In ActiveDocument.InlineShapes
i = i + 1
On Error Resume Next
Application.StatusBar = "Progress: " &amp; i &amp; " of " &amp; total
If s.Type = msoAutoShape Then
If s.OLEFormat.ClassType = "Equation.DSMT4" Then
With s
.ScaleHeight = 100
.ScaleWidth = 100
End With
End If
End If
Next
End Sub
</code></pre> <footer lang="ja" style=" background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem; line-height: 1.5; padding: 1rem 1.5rem; margin-top: 2rem; border-top: 1px solid #e9ecef; text-align: center; "> <p style="margin: 0; word-break: break-word;"> このページは生成AIによって自動翻訳されており、不正確または不完全な情報が含まれている可能性があります。 <a href="mailto:wenjie.xu.cn@outlook.com" style=" color: #007bff; text-decoration: none; ">ご意見・ご指摘はこちらまで</a>。品質向上のためご協力をお願いいたします。 </p> </footer>]]></content><author><name></name></author><category term="Writing"/><category term="Word"/><category term="Typesetting"/><summary type="html"><![CDATA[よく使う Word のレイアウト経験とマクロツール]]></summary></entry></feed>